2021-01-07 23:53:01,132 p=11722 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-07 23:53:01,521 p=11722 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-07 23:53:01,555 p=11722 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-07 23:53:07,995 p=11722 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-07 23:53:07,995 p=11722 u=utewatia n=ansible | ok: [aws]
2021-01-07 23:53:08,011 p=11722 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-07 23:53:08,050 p=11722 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-07 23:53:08,051 p=11722 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-07 23:53:08,052 p=11722 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-07 23:57:53,287 p=12416 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-07 23:57:53,424 p=12416 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-07 23:57:53,433 p=12416 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-07 23:57:57,086 p=12416 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-07 23:57:57,087 p=12416 u=utewatia n=ansible | ok: [aws]
2021-01-07 23:57:57,162 p=12416 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-07 23:57:57,257 p=12416 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-07 23:57:57,330 p=12416 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-07 23:57:57,415 p=12416 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc| dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-07 23:57:57,419 p=12416 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-07 23:57:57,420 p=12416 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-07 23:58:42,991 p=12644 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-07 23:58:43,114 p=12644 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-07 23:58:43,122 p=12644 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-07 23:58:46,272 p=12644 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-07 23:58:46,272 p=12644 u=utewatia n=ansible | ok: [aws]
2021-01-07 23:58:46,290 p=12644 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-07 23:58:46,315 p=12644 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-07 23:58:46,332 p=12644 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-07 23:58:46,354 p=12644 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc | dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-07 23:58:46,356 p=12644 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-07 23:58:46,356 p=12644 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-07 23:59:40,870 p=12860 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-07 23:59:41,011 p=12860 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-07 23:59:41,020 p=12860 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-07 23:59:44,354 p=12860 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-07 23:59:44,355 p=12860 u=utewatia n=ansible | ok: [aws]
2021-01-07 23:59:44,372 p=12860 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-07 23:59:44,399 p=12860 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-07 23:59:44,415 p=12860 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-07 23:59:44,434 p=12860 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc | dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-07 23:59:44,436 p=12860 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-07 23:59:44,436 p=12860 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-08 00:07:44,130 p=13748 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:07:44,259 p=13748 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 00:07:44,268 p=13748 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 00:07:47,564 p=13748 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 00:07:47,564 p=13748 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:07:47,585 p=13748 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 00:07:47,612 p=13748 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 00:07:47,629 p=13748 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 00:07:47,649 p=13748 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc | dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-08 00:07:47,651 p=13748 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 00:07:47,651 p=13748 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-08 00:09:58,155 p=14118 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:09:58,276 p=14118 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 00:09:58,285 p=14118 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 00:10:01,460 p=14118 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 00:10:01,460 p=14118 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:10:01,477 p=14118 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 00:10:01,499 p=14118 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 00:10:01,515 p=14118 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 00:10:01,535 p=14118 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc|dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-08 00:10:01,537 p=14118 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 00:10:01,537 p=14118 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-08 00:12:16,552 p=14462 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:12:16,673 p=14462 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 00:12:16,682 p=14462 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 00:12:19,933 p=14462 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 00:12:19,933 p=14462 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:12:19,955 p=14462 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 00:12:19,983 p=14462 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 00:12:19,998 p=14462 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 00:12:20,018 p=14462 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unable to look up a name or access an attribute in template string ({{ aws_vpc|dict2items }}).\nMake sure your variable name does not contain invalid characters like '-': dict2items requires a dictionary, got <class 'ansible.template.AnsibleUndefined'> instead."}
2021-01-08 00:12:20,019 p=14462 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 00:12:20,020 p=14462 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-08 00:22:04,718 p=15050 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:22:04,855 p=15050 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-08 00:22:04,863 p=15050 u=utewatia n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: No JSON object could be decoded

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/utewatia/ansible_practice/inventory/aws-prod/host_vars/aws/vars-vpc': line 30, column 18, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

            name: "{{ first_vpc_igw_name }}_1a_public_ng
        - name: "{{ first_vpc_name }}_1b_public"
                 ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-01-08 00:24:00,237 p=15250 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:24:00,360 p=15250 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-08 00:24:00,368 p=15250 u=utewatia n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: No JSON object could be decoded

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/utewatia/ansible_practice/inventory/aws-prod/host_vars/aws/vars-vpc': line 52, column 31, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

        subnets:
        - {{ first_vpc_name }}_1a_public"
                              ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-01-08 00:25:32,959 p=15411 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:25:33,100 p=15411 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-08 00:25:33,110 p=15411 u=utewatia n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: No JSON object could be decoded

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/utewatia/ansible_practice/inventory/aws-prod/host_vars/aws/vars-vpc': line 52, column 31, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

        subnets:
        - {{ first_vpc_name }}_1a_public"
                              ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2021-01-08 00:27:01,321 p=15566 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:27:01,460 p=15566 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-08 00:27:01,473 p=15566 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-08 00:27:04,749 p=15566 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-08 00:27:04,749 p=15566 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:27:04,769 p=15566 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-08 00:27:04,799 p=15566 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 00:27:04,822 p=15566 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-08 00:27:04,959 p=15566 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 00:27:04,979 p=15566 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-08 00:27:05,007 p=15566 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:27:05,025 p=15566 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-08 00:27:16,778 p=15566 u=utewatia n=ansible | changed: [aws]
2021-01-08 00:27:16,795 p=15566 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-08 00:27:16,818 p=15566 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": true, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 00:27:16,820 p=15566 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-08 00:27:16,821 p=15566 u=utewatia n=ansible | aws                        : ok=6    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 00:28:12,520 p=15812 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 00:28:12,644 p=15812 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-08 00:28:12,655 p=15812 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-08 00:28:15,848 p=15812 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-08 00:28:15,848 p=15812 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:28:15,866 p=15812 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-08 00:28:15,893 p=15812 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 00:28:15,908 p=15812 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-08 00:28:16,043 p=15812 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 00:28:16,067 p=15812 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-08 00:28:16,095 p=15812 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:28:16,112 p=15812 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-08 00:28:24,324 p=15812 u=utewatia n=ansible | ok: [aws]
2021-01-08 00:28:24,339 p=15812 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-08 00:28:24,362 p=15812 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 00:28:24,364 p=15812 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-08 00:28:24,365 p=15812 u=utewatia n=ansible | aws                        : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 15:05:54,662 p=1470 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 15:05:55,023 p=1470 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 15:05:55,055 p=1470 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 15:05:58,934 p=1470 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 15:05:58,934 p=1470 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:05:58,950 p=1470 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 15:05:58,990 p=1470 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 15:05:59,010 p=1470 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:05:59,111 p=1470 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 15:05:59,126 p=1470 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 15:05:59,153 p=1470 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:05:59,168 p=1470 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:06:08,536 p=1470 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:06:08,552 p=1470 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 15:06:08,575 p=1470 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 15:06:08,577 p=1470 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 15:06:08,577 p=1470 u=utewatia n=ansible | aws                        : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 15:26:45,493 p=3546 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 15:26:45,620 p=3546 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 15:26:45,631 p=3546 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 15:26:48,805 p=3546 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 15:26:48,805 p=3546 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:26:48,821 p=3546 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 15:26:48,845 p=3546 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 15:26:48,864 p=3546 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:26:48,994 p=3546 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 15:26:49,010 p=3546 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 15:26:49,033 p=3546 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:26:49,048 p=3546 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:26:58,222 p=3546 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:26:58,238 p=3546 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 15:26:58,262 p=3546 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 15:26:58,277 p=3546 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 15:27:03,637 p=3546 u=utewatia n=ansible | changed: [aws]
2021-01-08 15:27:03,639 p=3546 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 15:27:03,639 p=3546 u=utewatia n=ansible | aws                        : ok=7    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 15:29:11,855 p=3956 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 15:29:11,990 p=3956 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 15:29:12,000 p=3956 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 15:29:15,064 p=3956 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 15:29:15,064 p=3956 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:29:15,084 p=3956 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 15:29:15,109 p=3956 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 15:29:15,127 p=3956 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:29:15,222 p=3956 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 15:29:15,241 p=3956 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 15:29:15,269 p=3956 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:29:15,291 p=3956 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:29:24,891 p=3956 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:29:24,907 p=3956 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 15:29:24,929 p=3956 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 15:29:24,945 p=3956 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 15:29:28,176 p=3956 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:29:28,191 p=3956 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 15:29:28,213 p=3956 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 15:29:28,215 p=3956 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 15:29:28,216 p=3956 u=utewatia n=ansible | aws                        : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 15:48:39,882 p=5961 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 15:48:40,013 p=5961 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 15:48:40,024 p=5961 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 15:48:43,157 p=5961 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 15:48:43,157 p=5961 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:48:43,178 p=5961 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 15:48:43,208 p=5961 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 15:48:43,223 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:48:43,350 p=5961 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 15:48:43,370 p=5961 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 15:48:43,396 p=5961 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:48:43,412 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 15:48:52,748 p=5961 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:48:52,764 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 15:48:52,786 p=5961 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 15:48:52,801 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 15:48:56,208 p=5961 u=utewatia n=ansible | ok: [aws]
2021-01-08 15:48:56,223 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 15:48:56,245 p=5961 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 15:48:56,260 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 15:48:56,283 p=6153 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 15:49:00,868 p=5961 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 15:49:06,928 p=5961 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 15:49:06,946 p=5961 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 15:49:06,973 p=5961 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": true, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 15:49:06,975 p=5961 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 15:49:06,976 p=5961 u=utewatia n=ansible | aws                        : ok=10   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 16:41:00,010 p=10444 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 16:41:00,174 p=10444 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 16:41:00,188 p=10444 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 16:41:03,547 p=10444 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 16:41:03,547 p=10444 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:41:03,563 p=10444 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 16:41:03,588 p=10444 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 16:41:03,605 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 16:41:03,712 p=10444 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 16:41:03,731 p=10444 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 16:41:03,755 p=10444 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:41:03,771 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 16:41:12,394 p=10444 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:41:12,409 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 16:41:12,433 p=10444 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 16:41:12,448 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 16:41:16,585 p=10444 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:41:16,606 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 16:41:16,634 p=10444 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 16:41:16,657 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 16:41:16,677 p=10660 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 16:41:20,743 p=10444 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 16:41:26,987 p=10444 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 16:41:27,002 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 16:41:27,029 p=10444 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 16:41:27,047 p=10444 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-08 16:41:27,076 p=10444 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'internal_vpc_region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml': line 54, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Private Subnet\n  ^ here\n"}
2021-01-08 16:41:27,078 p=10444 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 16:41:27,078 p=10444 u=utewatia n=ansible | aws                        : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-08 16:42:00,648 p=10819 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 16:42:00,784 p=10819 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 16:42:00,795 p=10819 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 16:42:03,826 p=10819 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 16:42:03,826 p=10819 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:42:03,846 p=10819 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 16:42:03,871 p=10819 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 16:42:03,891 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 16:42:04,004 p=10819 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 16:42:04,020 p=10819 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 16:42:04,045 p=10819 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:42:04,062 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 16:42:10,110 p=10819 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:42:10,126 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 16:42:10,148 p=10819 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 16:42:10,165 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 16:42:13,290 p=10819 u=utewatia n=ansible | ok: [aws]
2021-01-08 16:42:13,305 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 16:42:13,327 p=10819 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 16:42:13,343 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 16:42:13,364 p=11008 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 16:42:15,527 p=10819 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 16:42:19,779 p=10819 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 16:42:19,795 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 16:42:19,819 p=10819 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 16:42:19,835 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-08 16:42:27,190 p=10819 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-08 16:42:30,895 p=10819 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-08 16:42:36,559 p=10819 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-08 16:42:42,449 p=10819 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-08 16:42:47,102 p=10819 u=utewatia n=ansible | changed: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-08 16:42:47,118 p=10819 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-08 16:42:47,150 p=10819 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": true, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": true, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 16:42:47,153 p=10819 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 16:42:47,153 p=10819 u=utewatia n=ansible | aws                        : ok=12   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 17:51:53,911 p=17498 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 17:51:54,098 p=17498 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 17:51:54,117 p=17498 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 17:51:57,664 p=17498 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 17:51:57,665 p=17498 u=utewatia n=ansible | ok: [aws]
2021-01-08 17:51:57,684 p=17498 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 17:51:57,713 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 17:51:57,732 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 17:51:57,835 p=17498 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 17:51:57,852 p=17498 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 17:51:57,877 p=17498 u=utewatia n=ansible | ok: [aws]
2021-01-08 17:51:57,894 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 17:52:06,832 p=17498 u=utewatia n=ansible | ok: [aws]
2021-01-08 17:52:06,847 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 17:52:06,869 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 17:52:06,885 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 17:52:09,980 p=17498 u=utewatia n=ansible | ok: [aws]
2021-01-08 17:52:09,996 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 17:52:10,017 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 17:52:10,032 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 17:52:10,055 p=17690 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 17:52:12,288 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 17:52:16,331 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 17:52:16,347 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 17:52:16,373 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 17:52:16,389 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-08 17:52:18,421 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-08 17:52:22,225 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-08 17:52:24,336 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-08 17:52:28,270 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-08 17:52:30,361 p=17498 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-08 17:52:30,381 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-08 17:52:30,421 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 17:52:30,447 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-08 17:54:13,484 p=17498 u=utewatia n=ansible | changed: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-08 17:54:13,490 p=17498 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-08 17:54:13,506 p=17498 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-08 17:54:13,536 p=17498 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": true, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": true, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT gateway nat-095b3a13c5aa8e4f5 created", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-08 17:54:13,538 p=17498 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 17:54:13,539 p=17498 u=utewatia n=ansible | aws                        : ok=14   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 18:30:21,393 p=20664 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 18:30:21,530 p=20664 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 18:30:21,543 p=20664 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 18:30:24,889 p=20664 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 18:30:24,889 p=20664 u=utewatia n=ansible | ok: [aws]
2021-01-08 18:30:24,909 p=20664 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 18:30:24,935 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 18:30:24,950 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 18:30:25,082 p=20664 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 18:30:25,105 p=20664 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 18:30:25,130 p=20664 u=utewatia n=ansible | ok: [aws]
2021-01-08 18:30:25,146 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 18:30:33,379 p=20664 u=utewatia n=ansible | ok: [aws]
2021-01-08 18:30:33,397 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 18:30:33,424 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 18:30:33,441 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 18:30:37,283 p=20664 u=utewatia n=ansible | ok: [aws]
2021-01-08 18:30:37,298 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 18:30:37,320 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 18:30:37,335 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 18:30:37,354 p=20872 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 18:30:40,472 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 18:30:44,564 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 18:30:44,580 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 18:30:44,605 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 18:30:44,621 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-08 18:30:46,725 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-08 18:30:50,542 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-08 18:30:52,578 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-08 18:30:56,520 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-08 18:30:58,485 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-08 18:30:58,502 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-08 18:30:58,531 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 18:30:58,551 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-08 18:31:02,137 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-08 18:31:02,141 p=20664 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-08 18:31:02,157 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-08 18:31:02,185 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-08 18:31:02,204 p=20664 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-08 18:31:02,237 p=20664 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-08 18:31:02,243 p=20664 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-08 18:31:02,259 p=20664 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-08 18:31:02,282 p=20664 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-08 18:31:02,284 p=20664 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 18:31:02,284 p=20664 u=utewatia n=ansible | aws                        : ok=16   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-08 23:39:56,032 p=25486 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-08 23:39:56,349 p=25486 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-08 23:39:56,370 p=25486 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-08 23:40:06,902 p=25486 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-08 23:40:06,902 p=25486 u=utewatia n=ansible | ok: [aws]
2021-01-08 23:40:06,928 p=25486 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-08 23:40:06,967 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-08 23:40:06,993 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 23:40:07,168 p=25486 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-08 23:40:07,195 p=25486 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-08 23:40:07,238 p=25486 u=utewatia n=ansible | ok: [aws]
2021-01-08 23:40:07,268 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-08 23:40:17,979 p=25486 u=utewatia n=ansible | ok: [aws]
2021-01-08 23:40:18,018 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-08 23:40:18,064 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-08 23:40:18,091 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-08 23:40:22,177 p=25486 u=utewatia n=ansible | ok: [aws]
2021-01-08 23:40:22,204 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-08 23:40:22,241 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-08 23:40:22,266 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-08 23:40:22,300 p=25709 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-08 23:40:27,296 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-08 23:40:29,985 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-08 23:40:30,019 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-08 23:40:30,063 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 23:40:30,088 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-08 23:40:34,263 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-08 23:40:36,827 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-08 23:40:41,538 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-08 23:40:46,168 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-08 23:40:48,834 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-08 23:40:48,868 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-08 23:40:48,922 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-08 23:40:48,952 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-08 23:40:52,713 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-08 23:40:52,727 p=25486 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-08 23:40:52,760 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-08 23:40:52,805 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-08 23:40:52,831 p=25486 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-08 23:40:52,890 p=25486 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-08 23:40:52,898 p=25486 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-08 23:40:52,928 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-08 23:40:52,965 p=25486 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-08 23:40:52,996 p=25486 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-08 23:40:58,935 p=25486 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-08 23:40:58,938 p=25486 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-08 23:40:58,938 p=25486 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-09 22:34:05,777 p=548 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 22:34:16,187 p=548 u=utewatia n=ansible | aws | UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname aws: No address associated with hostname", 
    "unreachable": true
}
2021-01-09 22:34:26,330 p=548 u=utewatia n=ansible | [WARNING]: Platform linux on host 54.82.214.172 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-01-09 22:34:26,331 p=548 u=utewatia n=ansible | 54.82.214.172 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "ping": "pong"
}
2021-01-09 22:34:46,500 p=548 u=utewatia n=ansible |  [ERROR]: User interrupted execution

2021-01-09 23:12:07,048 p=675 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 23:12:16,133 p=675 u=utewatia n=ansible | aws | UNREACHABLE! => {
    "changed": false, 
    "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname aws: No address associated with hostname", 
    "unreachable": true
}
2021-01-09 23:12:17,916 p=675 u=utewatia n=ansible | 3.89.228.135 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    }, 
    "changed": false, 
    "ping": "pong"
}
2021-01-09 23:12:18,883 p=675 u=utewatia n=ansible | [WARNING]: Platform linux on host 54.82.214.172 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-01-09 23:12:18,883 p=675 u=utewatia n=ansible | 54.82.214.172 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "ping": "pong"
}
2021-01-09 23:18:55,865 p=757 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 23:19:05,844 p=757 u=utewatia n=ansible | 3.89.228.135 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    }, 
    "changed": false, 
    "ping": "pong"
}
2021-01-09 23:19:07,408 p=757 u=utewatia n=ansible | [WARNING]: Platform linux on host 54.82.214.172 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-01-09 23:19:07,409 p=757 u=utewatia n=ansible | 54.82.214.172 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "ping": "pong"
}
2021-01-09 23:20:14,877 p=794 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 23:20:14,878 p=794 u=utewatia n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: groups

2021-01-09 23:20:14,879 p=794 u=utewatia n=ansible | [WARNING]: No hosts matched, nothing to do

2021-01-09 23:20:45,930 p=801 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 23:20:55,838 p=801 u=utewatia n=ansible | [WARNING]: Platform linux on host 54.82.214.172 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-01-09 23:20:55,838 p=801 u=utewatia n=ansible | 54.82.214.172 | CHANGED | rc=0 >>
 17:50:53 up 87 days,  5:28,  1 user,  load average: 0.00, 0.00, 0.00

2021-01-09 23:20:55,952 p=801 u=utewatia n=ansible | 3.89.228.135 | CHANGED | rc=0 >>
 17:50:53 up 48 min,  1 user,  load average: 0.00, 0.00, 0.00

2021-01-09 23:26:47,969 p=838 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-09 23:26:58,205 p=838 u=utewatia n=ansible | 3.89.228.135 | CHANGED | rc=0 >>
              total        used        free      shared  buff/cache   available
Mem:            978         126         407           0         444         710
Swap:             0           0           0

2021-01-09 23:26:59,562 p=838 u=utewatia n=ansible | [WARNING]: Platform linux on host 54.82.214.172 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-01-09 23:26:59,562 p=838 u=utewatia n=ansible | 54.82.214.172 | CHANGED | rc=0 >>
              total        used        free      shared  buff/cache   available
Mem:            983         159         151           0         672         668
Swap:             0           0           0

2021-01-11 16:41:41,345 p=10409 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 16:41:42,014 p=10409 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-11 16:41:42,087 p=10409 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-11 16:41:52,461 p=10409 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-11 16:41:52,461 p=10409 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:41:52,489 p=10409 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-11 16:41:52,552 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 16:41:52,578 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:41:52,770 p=10409 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 16:41:52,801 p=10409 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-11 16:41:52,845 p=10409 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:41:52,872 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:42:03,555 p=10409 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:42:03,584 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-11 16:42:03,627 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 16:42:03,656 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-11 16:42:08,341 p=10409 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:42:08,368 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-11 16:42:08,408 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 16:42:08,434 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-11 16:42:08,468 p=10648 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:42:11,362 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 16:42:15,624 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 16:42:15,656 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-11 16:42:15,706 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:42:15,735 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-11 16:42:18,420 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 16:42:22,491 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 16:42:25,053 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 16:42:29,848 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 16:42:32,424 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 16:42:32,457 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-11 16:42:32,507 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:42:32,535 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-11 16:42:36,006 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 16:42:36,015 p=10409 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 16:42:36,046 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-11 16:42:36,094 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 16:42:36,120 p=10409 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-11 16:42:36,225 p=10409 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 16:42:36,234 p=10409 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 16:42:36,263 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-11 16:42:36,299 p=10409 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 16:42:36,331 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-11 16:42:41,016 p=10409 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 16:42:41,045 p=10409 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-11 16:42:41,084 p=11000 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:42:41,142 p=10409 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 5, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n  - name: Update Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 16:42:41,143 p=10409 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 5, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n  - name: Update Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 16:42:41,145 p=10409 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-11 16:42:41,145 p=10409 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 16:55:07,676 p=12178 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 16:55:07,903 p=12178 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-11 16:55:07,924 p=12178 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-11 16:55:18,237 p=12178 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-11 16:55:18,237 p=12178 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:55:18,263 p=12178 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-11 16:55:18,305 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 16:55:18,332 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:55:18,517 p=12178 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 16:55:18,544 p=12178 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-11 16:55:18,587 p=12178 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:55:18,613 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:55:29,229 p=12178 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:55:29,255 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-11 16:55:29,302 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 16:55:29,334 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-11 16:55:33,322 p=12178 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:55:33,354 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-11 16:55:33,395 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 16:55:33,421 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-11 16:55:33,455 p=12385 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:55:36,405 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 16:55:40,491 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 16:55:40,518 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-11 16:55:40,566 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:55:40,592 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-11 16:55:46,584 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 16:55:50,414 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 16:55:52,976 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 16:55:57,588 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 16:56:01,385 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 16:56:01,414 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-11 16:56:01,463 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:56:01,490 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-11 16:56:03,738 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 16:56:03,747 p=12178 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 16:56:03,777 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-11 16:56:03,861 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 16:56:03,887 p=12178 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-11 16:56:03,943 p=12178 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 16:56:03,951 p=12178 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 16:56:03,982 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-11 16:56:04,021 p=12178 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 16:56:04,049 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-11 16:56:08,033 p=12178 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 16:56:08,060 p=12178 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-11 16:56:08,095 p=12700 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:56:08,155 p=12178 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 5, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n  - name: Update Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 16:56:08,156 p=12178 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 5, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n  - name: Update Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 16:56:08,158 p=12178 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-11 16:56:08,158 p=12178 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 16:58:47,569 p=12971 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 16:58:47,794 p=12971 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-11 16:58:47,815 p=12971 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-11 16:58:57,638 p=12971 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-11 16:58:57,638 p=12971 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:58:57,666 p=12971 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-11 16:58:57,705 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 16:58:57,732 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:58:57,919 p=12971 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 16:58:57,946 p=12971 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-11 16:58:57,991 p=12971 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:58:58,022 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-11 16:59:07,338 p=12971 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:59:07,369 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-11 16:59:07,407 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 16:59:07,433 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-11 16:59:11,744 p=12971 u=utewatia n=ansible | ok: [aws]
2021-01-11 16:59:11,776 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-11 16:59:11,813 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 16:59:11,842 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-11 16:59:11,878 p=13209 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:59:16,668 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 16:59:21,270 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 16:59:21,298 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-11 16:59:21,340 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:59:21,373 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-11 16:59:24,899 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 16:59:27,432 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 16:59:31,100 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 16:59:33,667 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 16:59:38,411 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 16:59:38,443 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-11 16:59:38,496 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 16:59:38,526 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-11 16:59:42,363 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 16:59:42,372 p=12971 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 16:59:42,405 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-11 16:59:42,452 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 16:59:42,479 p=12971 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-11 16:59:42,537 p=12971 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 16:59:42,544 p=12971 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 16:59:42,576 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-11 16:59:42,612 p=12971 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 16:59:42,639 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-11 16:59:46,969 p=12971 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 16:59:47,002 p=12971 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-11 16:59:47,038 p=13527 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 16:59:47,092 p=12971 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 20, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 16:59:47,094 p=12971 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 20, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 16:59:47,095 p=12971 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-11 16:59:47,096 p=12971 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 17:13:18,454 p=14789 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:13:18,670 p=14789 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:13:18,691 p=14789 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:13:28,164 p=14789 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:13:28,164 p=14789 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:13:28,190 p=14789 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:13:28,227 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:13:28,256 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:13:28,450 p=14789 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:13:28,489 p=14789 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:13:28,530 p=14789 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:13:28,556 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:13:37,957 p=14789 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:13:37,988 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:13:38,026 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:13:38,052 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:13:42,866 p=14789 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:13:42,899 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:13:42,935 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:13:42,961 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:13:42,994 p=15027 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:13:48,139 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:13:50,797 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:13:50,824 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:13:50,866 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:13:50,891 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:13:54,880 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:13:57,530 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:14:02,122 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:14:05,808 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:14:08,373 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:14:08,403 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:14:08,455 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:14:08,483 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:14:12,149 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:14:12,157 p=14789 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:14:12,191 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:14:12,240 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:14:12,271 p=14789 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:14:12,343 p=14789 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:14:12,355 p=14789 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:14:12,386 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:14:12,422 p=14789 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:14:12,451 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:14:15,037 p=14789 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:14:15,073 p=14789 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:14:15,107 p=15390 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:14:15,162 p=14789 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 14, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 17:14:15,163 p=14789 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 14, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 17:14:15,165 p=14789 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:14:15,166 p=14789 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 17:19:33,996 p=15984 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:19:34,235 p=15984 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:19:34,255 p=15984 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:19:44,008 p=15984 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:19:44,008 p=15984 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:19:44,036 p=15984 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:19:44,079 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:19:44,113 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:19:44,289 p=15984 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:19:44,317 p=15984 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:19:44,370 p=15984 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:19:44,400 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:19:55,520 p=15984 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:19:55,549 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:19:55,586 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:19:55,613 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:20:00,107 p=15984 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:20:00,136 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:20:00,175 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:20:00,201 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:20:00,237 p=16191 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:20:06,561 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:20:09,233 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:20:09,269 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:20:09,313 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:20:09,342 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:20:13,337 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:20:16,502 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:20:20,581 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:20:23,100 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:20:27,284 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:20:27,314 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:20:27,407 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:20:27,434 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:20:29,672 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:20:29,683 p=15984 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:20:29,713 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:20:29,758 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:20:29,785 p=15984 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:20:29,845 p=15984 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:20:29,854 p=15984 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:20:29,883 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:20:29,923 p=15984 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:20:29,952 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:20:33,904 p=15984 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:20:33,932 p=15984 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:20:33,970 p=16506 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:20:34,027 p=15984 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 14, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 17:20:34,028 p=15984 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected <document start>\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 14, column 1, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Route Table\n^ here\n"}
2021-01-11 17:20:34,030 p=15984 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:20:34,031 p=15984 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 17:22:14,619 p=16683 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:22:14,838 p=16683 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:22:14,859 p=16683 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:22:24,205 p=16683 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:22:24,206 p=16683 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:22:24,239 p=16683 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:22:24,278 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:22:24,311 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:22:24,495 p=16683 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:22:24,523 p=16683 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:22:24,564 p=16683 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:22:24,592 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:22:34,321 p=16683 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:22:34,348 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:22:34,388 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:22:34,415 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:22:39,045 p=16683 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:22:39,073 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:22:39,124 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:22:39,153 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:22:39,190 p=16911 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:22:44,086 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:22:48,162 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:22:48,195 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:22:48,239 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:22:48,266 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:22:50,932 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:22:58,912 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:23:01,467 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:23:05,994 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:23:08,631 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:23:08,663 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:23:08,715 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:23:08,742 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:23:12,527 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:23:12,540 p=16683 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:23:12,570 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:23:12,618 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:23:12,646 p=16683 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:23:12,707 p=16683 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:23:12,717 p=16683 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:23:12,747 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:23:12,789 p=16683 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:23:12,817 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:23:16,421 p=16683 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:23:16,453 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:23:16,491 p=17248 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:23:16,550 p=16683 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:23:16,555 p=16683 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:23:16,589 p=16683 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:23:16,617 p=16683 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:23:16,648 p=16683 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:23:16,713 p=17252 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:23:16,731 p=16683 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token 'name', got '{'. String: {{ routes_gw | default([]) | {% if item['gateway_name'] is defined %} [{'dest':item.dest,'gateway_id':igw_id}] {% else %} [{'dest':item.dest,'gateway_id':ngws.get(item.get('natgateway_name',''),'') }] {% endif %} }}"}
2021-01-11 17:23:16,733 p=16683 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:23:16,733 p=16683 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 17:33:52,247 p=18259 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:33:52,549 p=18259 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:33:52,566 p=18259 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:34:05,373 p=18259 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:34:05,373 p=18259 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:34:05,401 p=18259 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:34:05,442 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:34:05,472 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:34:05,680 p=18259 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:34:05,717 p=18259 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:34:05,800 p=18259 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:34:05,838 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:34:16,384 p=18259 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:34:16,413 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:34:16,453 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:34:16,482 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:34:21,208 p=18259 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:34:21,247 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:34:21,303 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:34:21,343 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:34:21,396 p=18469 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:34:24,431 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:34:29,153 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:34:29,186 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:34:29,236 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:34:29,271 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:34:34,270 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:34:38,961 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:34:42,810 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:34:45,738 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:34:50,142 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:34:50,182 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:34:50,256 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:34:50,299 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:34:54,541 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:34:54,551 p=18259 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:34:54,581 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:34:54,648 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:34:54,688 p=18259 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:34:54,772 p=18259 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:34:54,785 p=18259 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:34:54,831 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:34:54,885 p=18259 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:34:54,926 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:34:59,602 p=18259 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:34:59,647 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:34:59,684 p=18793 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:34:59,749 p=18259 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:34:59,754 p=18259 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:34:59,788 p=18259 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:34:59,815 p=18259 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:34:59,846 p=18259 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:34:59,872 p=18797 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:34:59,887 p=18259 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: unexpected '%'. String: {{ {% if item['gateway_name'] is defined %} [{'dest':item.dest,'gateway_id':igw_id}] {% else %} [{'dest':item.dest,'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] {% endif %} }}"}
2021-01-11 17:34:59,890 p=18259 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:34:59,890 p=18259 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 17:38:30,260 p=19131 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:38:30,632 p=19131 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:38:30,650 p=19131 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:38:43,237 p=19131 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:38:43,238 p=19131 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:38:43,270 p=19131 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:38:43,307 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:38:43,336 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:38:43,511 p=19131 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:38:43,539 p=19131 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:38:43,582 p=19131 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:38:43,618 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:38:53,690 p=19131 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:38:53,731 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:38:53,843 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:38:53,870 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:38:58,340 p=19131 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:38:58,373 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:38:58,412 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:38:58,439 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:38:58,483 p=19341 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:39:01,527 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:39:05,809 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:39:05,851 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:39:05,913 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:39:05,957 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:39:10,558 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:39:13,349 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:39:17,793 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:39:20,584 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:39:24,595 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:39:24,639 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:39:24,712 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:39:24,755 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:39:29,087 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:39:29,099 p=19131 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:39:29,144 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:39:29,213 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:39:29,255 p=19131 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:39:29,328 p=19131 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:39:29,338 p=19131 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:39:29,370 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:39:29,412 p=19131 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:39:29,444 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:39:34,558 p=19131 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:39:34,628 p=19131 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:39:34,691 p=19659 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:39:34,785 p=19131 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  found character that cannot start any token\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 7, column 17, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  set_fact:\n    routes_gw: {% if item['gateway_name'] is defined %} [{'dest':item.dest,'gateway_id':igw_id}] {% else %} [{'dest':item.dest,'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] {% endif %}\n                ^ here\n"}
2021-01-11 17:39:34,787 p=19131 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  found character that cannot start any token\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 7, column 17, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  set_fact:\n    routes_gw: {% if item['gateway_name'] is defined %} [{'dest':item.dest,'gateway_id':igw_id}] {% else %} [{'dest':item.dest,'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] {% endif %}\n                ^ here\n"}
2021-01-11 17:39:34,790 p=19131 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:39:34,790 p=19131 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 17:42:40,664 p=19965 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:42:40,899 p=19965 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:42:40,917 p=19965 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:42:47,138 p=19965 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:42:47,138 p=19965 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:42:47,164 p=19965 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:42:47,200 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:42:47,227 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:42:47,393 p=19965 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:42:47,419 p=19965 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:42:47,461 p=19965 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:42:47,487 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:42:56,931 p=19965 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:42:56,958 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:42:56,993 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:42:57,019 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:43:00,595 p=19965 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:43:00,620 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:43:00,657 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:43:00,686 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:43:00,719 p=20163 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:43:03,335 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:43:06,908 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:43:06,936 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:43:06,975 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:43:07,001 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:43:09,366 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:43:12,889 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:43:15,225 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:43:19,071 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:43:21,364 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:43:21,395 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:43:21,442 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:43:21,469 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:43:25,296 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:43:25,306 p=19965 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:43:25,335 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:43:25,380 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:43:25,406 p=19965 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:43:25,464 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:43:25,473 p=19965 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:43:25,503 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:43:25,539 p=19965 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:43:25,569 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:43:31,490 p=19965 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:43:31,516 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:43:31,592 p=20472 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:43:31,676 p=19965 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:43:31,680 p=19965 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:43:31,712 p=19965 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:43:31,736 p=19965 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:43:31,763 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:43:31,781 p=20479 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:43:31,797 p=19965 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 17:43:31,824 p=19965 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:43:32,713 p=19965 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: AttributeError: 'str' object has no attribute 'pop'
2021-01-11 17:43:32,713 p=19965 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367211.86-20481-22696900919060/AnsiballZ_ec2_vpc_route_table.py\", line 102, in <module>\n    _ansiballz_main()\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367211.86-20481-22696900919060/AnsiballZ_ec2_vpc_route_table.py\", line 94, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367211.86-20481-22696900919060/AnsiballZ_ec2_vpc_route_table.py\", line 40, in invoke_module\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.ec2_vpc_route_table', init_globals=None, run_name='__main__', alter_sys=True)\n  File \"/usr/lib/python2.7/runpy.py\", line 188, in run_module\n    fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 82, in _run_module_code\n    mod_name, mod_fname, mod_loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_Cxi5Oj/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 751, in <module>\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_Cxi5Oj/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 743, in main\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_Cxi5Oj/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 643, in ensure_route_table_present\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_Cxi5Oj/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 621, in create_route_spec\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_Cxi5Oj/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 429, in rename_key\nAttributeError: 'str' object has no attribute 'pop'\n", "module_stdout": "", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2021-01-11 17:43:32,716 p=19965 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:43:32,716 p=19965 u=utewatia n=ansible | aws                        : ok=21   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 17:48:21,728 p=21004 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:48:21,940 p=21004 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:48:21,958 p=21004 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:48:28,822 p=21004 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:48:28,823 p=21004 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:48:28,849 p=21004 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:48:28,886 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:48:28,914 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:48:29,080 p=21004 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:48:29,107 p=21004 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:48:29,148 p=21004 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:48:29,176 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:48:38,534 p=21004 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:48:38,560 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:48:38,598 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:48:38,627 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:48:42,343 p=21004 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:48:42,370 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:48:42,406 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:48:42,433 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:48:42,469 p=21205 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:48:45,246 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:48:49,663 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:48:49,690 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:48:49,730 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:48:49,756 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:48:55,403 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:48:57,773 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:49:01,355 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:49:03,626 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:49:07,662 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:49:07,692 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:49:07,738 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:49:07,765 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:49:09,726 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:49:09,733 p=21004 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:49:09,761 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:49:09,807 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:49:09,832 p=21004 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:49:09,885 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:49:09,894 p=21004 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:49:09,921 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:49:09,954 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:49:09,980 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:49:14,035 p=21004 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:49:14,061 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:49:14,093 p=21567 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:49:14,148 p=21004 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:49:14,153 p=21004 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:49:14,213 p=21004 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:49:14,234 p=21004 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:49:14,261 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:49:14,279 p=21571 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:49:14,294 p=21004 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 17:49:14,320 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 17:49:14,341 p=21004 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": " [{'dest':item.dest,'gateway_id':igw_id}] "
}
2021-01-11 17:49:14,367 p=21004 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:49:15,245 p=21004 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: AttributeError: 'str' object has no attribute 'pop'
2021-01-11 17:49:15,245 p=21004 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367554.4-21575-164948319342231/AnsiballZ_ec2_vpc_route_table.py\", line 102, in <module>\n    _ansiballz_main()\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367554.4-21575-164948319342231/AnsiballZ_ec2_vpc_route_table.py\", line 94, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367554.4-21575-164948319342231/AnsiballZ_ec2_vpc_route_table.py\", line 40, in invoke_module\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.ec2_vpc_route_table', init_globals=None, run_name='__main__', alter_sys=True)\n  File \"/usr/lib/python2.7/runpy.py\", line 188, in run_module\n    fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 82, in _run_module_code\n    mod_name, mod_fname, mod_loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_wHLBBg/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 751, in <module>\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_wHLBBg/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 743, in main\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_wHLBBg/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 643, in ensure_route_table_present\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_wHLBBg/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 621, in create_route_spec\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_wHLBBg/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 429, in rename_key\nAttributeError: 'str' object has no attribute 'pop'\n", "module_stdout": "", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2021-01-11 17:49:15,247 p=21004 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:49:15,248 p=21004 u=utewatia n=ansible | aws                        : ok=22   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 17:55:05,092 p=22155 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:55:05,302 p=22155 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:55:05,319 p=22155 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:55:11,400 p=22155 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:55:11,400 p=22155 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:55:11,426 p=22155 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:55:11,464 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:55:11,493 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:55:11,668 p=22155 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:55:11,696 p=22155 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:55:11,736 p=22155 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:55:11,762 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:55:20,647 p=22155 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:55:20,681 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:55:20,730 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:55:20,767 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:55:27,295 p=22155 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:55:27,321 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:55:27,356 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:55:27,381 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:55:27,414 p=22382 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:55:31,920 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:55:34,206 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:55:34,233 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:55:34,272 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:55:34,297 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:55:38,640 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:55:41,172 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:55:44,777 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:55:47,176 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:55:51,066 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:55:51,096 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:55:51,145 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:55:51,170 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:55:53,101 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:55:53,109 p=22155 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:55:53,138 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:55:53,185 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:55:53,212 p=22155 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:55:53,308 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:55:53,318 p=22155 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:55:53,348 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:55:53,387 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:55:53,413 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:55:57,545 p=22155 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:55:57,571 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:55:57,605 p=22717 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:55:57,662 p=22155 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:55:57,667 p=22155 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:55:57,700 p=22155 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:55:57,727 p=22155 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:55:57,754 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:55:57,777 p=22721 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:55:57,795 p=22155 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 17:55:57,824 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 17:55:57,852 p=22155 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": " [{'dest':0.0.0.0/0,'gateway_id':igw-0e2c57a47c8ec696e }] "
}
2021-01-11 17:55:57,879 p=22155 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:55:58,791 p=22155 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: AttributeError: 'str' object has no attribute 'pop'
2021-01-11 17:55:58,792 p=22155 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367957.92-22725-274769701905711/AnsiballZ_ec2_vpc_route_table.py\", line 102, in <module>\n    _ansiballz_main()\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367957.92-22725-274769701905711/AnsiballZ_ec2_vpc_route_table.py\", line 94, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610367957.92-22725-274769701905711/AnsiballZ_ec2_vpc_route_table.py\", line 40, in invoke_module\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.ec2_vpc_route_table', init_globals=None, run_name='__main__', alter_sys=True)\n  File \"/usr/lib/python2.7/runpy.py\", line 188, in run_module\n    fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 82, in _run_module_code\n    mod_name, mod_fname, mod_loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_e22bdC/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 751, in <module>\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_e22bdC/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 743, in main\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_e22bdC/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 643, in ensure_route_table_present\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_e22bdC/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 621, in create_route_spec\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_e22bdC/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 429, in rename_key\nAttributeError: 'str' object has no attribute 'pop'\n", "module_stdout": "", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2021-01-11 17:55:58,794 p=22155 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:55:58,795 p=22155 u=utewatia n=ansible | aws                        : ok=22   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 17:58:23,751 p=22997 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 17:58:23,960 p=22997 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 17:58:23,978 p=22997 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 17:58:30,458 p=22997 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 17:58:30,459 p=22997 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:58:30,485 p=22997 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 17:58:30,521 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 17:58:30,548 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:58:30,718 p=22997 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 17:58:30,745 p=22997 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:58:30,782 p=22997 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:58:30,808 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 17:58:39,245 p=22997 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:58:39,273 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 17:58:39,309 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 17:58:39,335 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 17:58:43,646 p=22997 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:58:43,678 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 17:58:43,728 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 17:58:43,767 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 17:58:43,811 p=23195 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:58:46,386 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 17:58:50,530 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 17:58:50,561 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 17:58:50,605 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:58:50,631 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 17:58:53,000 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 17:58:56,830 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 17:58:59,110 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 17:59:02,465 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 17:59:04,771 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 17:59:04,802 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 17:59:04,855 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 17:59:04,887 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 17:59:11,144 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 17:59:11,154 p=22997 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 17:59:11,183 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 17:59:11,236 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 17:59:11,265 p=22997 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 17:59:11,329 p=22997 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 17:59:11,338 p=22997 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 17:59:11,369 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 17:59:11,412 p=22997 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 17:59:11,440 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 17:59:13,845 p=22997 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 17:59:13,873 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 17:59:13,957 p=23504 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:59:14,045 p=22997 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:59:14,050 p=22997 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 17:59:14,085 p=22997 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 17:59:14,111 p=22997 u=utewatia n=ansible | ok: [aws]
2021-01-11 17:59:14,138 p=22997 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 17:59:14,157 p=23511 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 17:59:14,168 p=22997 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: unexpected '%'. String: {{ {% if item['gateway_name'] is defined %} [{'dest':{{item.dest}},'gateway_id':igw_id }] {% else %} [{'dest':item.dest,'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] {% endif %} }}"}
2021-01-11 17:59:14,170 p=22997 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 17:59:14,170 p=22997 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:00:38,013 p=23665 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:00:38,221 p=23665 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:00:38,238 p=23665 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:00:44,772 p=23665 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:00:44,772 p=23665 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:00:44,802 p=23665 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:00:44,840 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:00:44,870 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:00:45,070 p=23665 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:00:45,103 p=23665 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:00:45,151 p=23665 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:00:45,181 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:00:53,884 p=23665 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:00:53,910 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:00:53,946 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:00:53,975 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:01:00,006 p=23665 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:01:00,047 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:01:00,085 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:01:00,111 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:01:00,144 p=23905 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:01:04,335 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:01:06,663 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:01:06,690 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:01:06,730 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:01:06,755 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:01:10,600 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:01:12,912 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:01:16,333 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:01:18,857 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:01:22,328 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:01:22,357 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:01:22,407 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:01:22,434 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:01:24,410 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:01:24,418 p=23665 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:01:24,447 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:01:24,495 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:01:24,521 p=23665 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:01:24,580 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:01:24,588 p=23665 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:01:24,616 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:01:24,654 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:01:24,683 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:01:29,184 p=23665 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:01:29,210 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:01:29,286 p=24259 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:01:29,368 p=23665 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:01:29,373 p=23665 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:01:29,405 p=23665 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:01:29,431 p=23665 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:01:29,458 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:01:29,478 p=24263 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:01:29,496 p=23665 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 18:01:29,526 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 18:01:29,549 p=23665 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": " [{'dest':0.0.0.0/0,'gateway_id':igw-0e2c57a47c8ec696e }] "
}
2021-01-11 18:01:29,578 p=23665 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:01:30,480 p=23665 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: AttributeError: 'str' object has no attribute 'pop'
2021-01-11 18:01:30,481 p=23665 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610368289.62-24267-149316888451409/AnsiballZ_ec2_vpc_route_table.py\", line 102, in <module>\n    _ansiballz_main()\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610368289.62-24267-149316888451409/AnsiballZ_ec2_vpc_route_table.py\", line 94, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/utewatia/.ansible/tmp/ansible-tmp-1610368289.62-24267-149316888451409/AnsiballZ_ec2_vpc_route_table.py\", line 40, in invoke_module\n    runpy.run_module(mod_name='ansible.modules.cloud.amazon.ec2_vpc_route_table', init_globals=None, run_name='__main__', alter_sys=True)\n  File \"/usr/lib/python2.7/runpy.py\", line 188, in run_module\n    fname, loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 82, in _run_module_code\n    mod_name, mod_fname, mod_loader, pkg_name)\n  File \"/usr/lib/python2.7/runpy.py\", line 72, in _run_code\n    exec code in run_globals\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_bP8Phu/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 751, in <module>\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_bP8Phu/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 743, in main\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_bP8Phu/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 643, in ensure_route_table_present\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_bP8Phu/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 621, in create_route_spec\n  File \"/tmp/ansible_ec2_vpc_route_table_payload_bP8Phu/ansible_ec2_vpc_route_table_payload.zip/ansible/modules/cloud/amazon/ec2_vpc_route_table.py\", line 429, in rename_key\nAttributeError: 'str' object has no attribute 'pop'\n", "module_stdout": "", "msg": "MODULE FAILURE\nSee stdout/stderr for the exact error", "rc": 1}
2021-01-11 18:01:30,483 p=23665 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:01:30,483 p=23665 u=utewatia n=ansible | aws                        : ok=22   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:07:10,774 p=24825 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:07:10,990 p=24825 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:07:11,007 p=24825 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:07:17,663 p=24825 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:07:17,663 p=24825 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:07:17,689 p=24825 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:07:17,727 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:07:17,752 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:07:17,926 p=24825 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:07:17,953 p=24825 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:07:17,992 p=24825 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:07:18,018 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:07:26,760 p=24825 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:07:26,785 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:07:26,821 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:07:26,848 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:07:30,466 p=24825 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:07:30,491 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:07:30,526 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:07:30,551 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:07:30,583 p=25047 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:07:33,140 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:07:36,748 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:07:36,775 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:07:36,815 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:07:36,840 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:07:39,256 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:07:42,695 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:07:44,955 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:07:48,698 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:07:51,023 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:07:51,052 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:07:51,100 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:07:51,128 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:07:56,106 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:07:56,115 p=24825 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:07:56,144 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:07:56,189 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:07:56,217 p=24825 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:07:56,272 p=24825 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:07:56,280 p=24825 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:07:56,308 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:07:56,345 p=24825 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:07:56,371 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:08:02,704 p=24825 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:08:02,730 p=24825 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:08:02,764 p=25359 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:08:02,818 p=24825 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "conflicting action statements: debug, type_debug\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 10, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Print Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 18:08:02,822 p=24825 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "conflicting action statements: debug, type_debug\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 10, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Print Gateway Name with Gateway id\n  ^ here\n"}
2021-01-11 18:08:02,824 p=24825 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:08:02,824 p=24825 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 18:15:07,284 p=26014 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:15:07,411 p=26014 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:15:07,423 p=26014 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:15:10,970 p=26014 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:15:10,970 p=26014 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:15:10,987 p=26014 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:15:11,011 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:15:11,032 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:15:11,145 p=26014 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:15:11,163 p=26014 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:15:11,194 p=26014 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:15:11,215 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:15:19,819 p=26014 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:15:19,836 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:15:19,863 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:15:19,879 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:15:23,711 p=26014 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:15:23,727 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:15:23,755 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:15:23,776 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:15:23,801 p=26206 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:15:26,211 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:15:30,850 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:15:30,867 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:15:30,894 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:15:30,911 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:15:33,041 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:15:37,959 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:15:40,172 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:15:44,290 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:15:51,465 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:15:51,482 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:15:51,514 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:15:51,529 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:15:54,412 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:15:54,417 p=26014 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:15:54,433 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:15:54,460 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:15:54,476 p=26014 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:15:54,508 p=26014 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:15:54,512 p=26014 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:15:54,528 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:15:54,548 p=26014 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:15:54,563 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:15:56,458 p=26014 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:15:56,473 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:15:56,496 p=26521 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:15:56,534 p=26014 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:15:56,538 p=26014 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:15:56,558 p=26014 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:15:56,577 p=26014 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:15:56,595 p=26014 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:15:56,609 p=26525 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:15:56,621 p=26014 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token ':', got '}'. String: {% if item['gateway_name'] is defined %} {{ [{'dest':{{item.dest}},'gateway_id':{{igw_id}} }] }} {% else %} {{ [{'dest':{{item.dest}},'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] }} {% endif %}"}
2021-01-11 18:15:56,622 p=26014 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:15:56,622 p=26014 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:27:31,273 p=27601 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:27:31,398 p=27601 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:27:31,409 p=27601 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:27:34,848 p=27601 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:27:34,849 p=27601 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:27:34,870 p=27601 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:27:34,898 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:27:34,919 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:27:35,045 p=27601 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:27:35,061 p=27601 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:27:35,087 p=27601 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:27:35,105 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:27:43,895 p=27601 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:27:43,935 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:27:43,972 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:27:44,014 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:27:49,594 p=27601 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:27:49,609 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:27:49,631 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:27:49,650 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:27:49,671 p=27812 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:27:52,050 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:27:54,095 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:27:54,114 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:27:54,155 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:27:54,199 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:27:57,913 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:28:00,152 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:28:02,318 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:28:06,251 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:28:08,449 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:28:08,467 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:28:08,496 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:28:08,513 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:28:11,498 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:28:11,503 p=27601 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:28:11,521 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:28:11,551 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:28:11,568 p=27601 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:28:11,607 p=27601 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:28:11,615 p=27601 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:28:11,634 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:28:11,660 p=27601 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:28:11,677 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:28:13,769 p=27601 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:28:13,785 p=27601 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:28:13,804 p=28112 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:28:13,838 p=27601 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  found character that cannot start any token\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 7, column 6, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  set_fact:\n    {% if item['gateway_name'] is defined %}\n     ^ here\n"}
2021-01-11 18:28:13,838 p=27601 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  found character that cannot start any token\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml': line 7, column 6, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n  set_fact:\n    {% if item['gateway_name'] is defined %}\n     ^ here\n"}
2021-01-11 18:28:13,839 p=27601 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:28:13,840 p=27601 u=utewatia n=ansible | aws                        : ok=17   changed=1    unreachable=0    failed=2    skipped=0    rescued=0    ignored=0   
2021-01-11 18:30:20,587 p=28328 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:30:20,712 p=28328 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:30:20,722 p=28328 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:30:24,423 p=28328 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:30:24,423 p=28328 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:30:24,439 p=28328 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:30:24,467 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:30:24,483 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:30:24,595 p=28328 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:30:24,612 p=28328 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:30:24,645 p=28328 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:30:24,667 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:30:33,378 p=28328 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:30:33,394 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:30:33,416 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:30:33,431 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:30:38,745 p=28328 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:30:38,761 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:30:38,785 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:30:38,802 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:30:38,825 p=28550 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:30:42,724 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:30:44,733 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:30:44,750 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:30:44,777 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:30:44,794 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:30:48,842 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:30:50,945 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:30:54,630 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:30:56,632 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:31:00,895 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:31:00,911 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:31:00,943 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:31:00,961 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:31:06,025 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:31:06,030 p=28328 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:31:06,046 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:31:06,074 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:31:06,093 p=28328 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:31:06,156 p=28328 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:31:06,161 p=28328 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:31:06,180 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:31:06,205 p=28328 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:31:06,224 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:31:08,186 p=28328 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:31:08,203 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:31:08,258 p=28856 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:31:08,315 p=28328 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:31:08,318 p=28328 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:31:08,336 p=28328 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:31:08,355 p=28328 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:31:08,373 p=28328 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:31:08,387 p=28860 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:31:08,394 p=28328 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token ':', got '}'. String: {{ [{'dest':{{item.dest}},'gateway_id':{{igw_id}} }] if item['gateway_name'] is defined else [{'dest':{{item.dest}},'gateway_id':ngws.get(item.get('natgateway_name',''),'')}] }}"}
2021-01-11 18:31:08,397 p=28328 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:31:08,398 p=28328 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:32:10,552 p=28980 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:32:10,703 p=28980 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:32:10,715 p=28980 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:32:14,060 p=28980 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:32:14,060 p=28980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:32:14,082 p=28980 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:32:14,110 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:32:14,132 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:32:14,252 p=28980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:32:14,276 p=28980 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:32:14,307 p=28980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:32:14,325 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:32:23,341 p=28980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:32:23,356 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:32:23,380 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:32:23,397 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:32:27,362 p=28980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:32:27,378 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:32:27,402 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:32:27,418 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:32:27,441 p=29175 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:32:29,576 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:32:33,470 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:32:33,487 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:32:33,512 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:32:33,528 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:32:35,604 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:32:39,377 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:32:41,335 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:32:44,715 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:32:46,790 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:32:46,808 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:32:46,843 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:32:46,887 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:32:50,139 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:32:50,145 p=28980 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:32:50,161 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:32:50,192 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:32:50,208 p=28980 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:32:50,243 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:32:50,251 p=28980 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:32:50,269 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:32:50,293 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:32:50,310 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:32:52,230 p=28980 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:32:52,246 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:32:52,297 p=29475 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:32:52,330 p=28980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:32:52,333 p=28980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:32:52,352 p=28980 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:32:52,368 p=28980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:32:52,386 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:32:52,399 p=29479 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:32:52,414 p=28980 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 18:32:52,432 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 18:32:52,447 p=28980 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-11 18:32:52,463 p=28980 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:32:58,566 p=28980 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Subnet named \"my_test_vpc_igw_1b_public\" does not exist"}
2021-01-11 18:32:58,568 p=28980 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:32:58,568 p=28980 u=utewatia n=ansible | aws                        : ok=22   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:37:03,213 p=29926 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:37:03,338 p=29926 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:37:03,348 p=29926 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:37:06,522 p=29926 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:37:06,522 p=29926 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:37:06,537 p=29926 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:37:06,562 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:37:06,584 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:37:06,714 p=29926 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:37:06,730 p=29926 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:37:06,758 p=29926 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:37:06,777 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:37:15,604 p=29926 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:37:15,620 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:37:15,644 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:37:15,659 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:37:20,964 p=29926 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:37:20,981 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:37:21,006 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:37:21,026 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:37:21,051 p=30129 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:37:23,487 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:37:27,318 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:37:27,335 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:37:27,364 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:37:27,382 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:37:29,492 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:37:33,271 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:37:35,496 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:37:38,965 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:37:41,040 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:37:41,059 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:37:41,090 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:37:41,105 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:37:44,389 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:37:44,395 p=29926 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:37:44,412 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:37:44,439 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:37:44,457 p=29926 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:37:44,500 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:37:44,508 p=29926 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:37:44,526 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:37:44,555 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:37:44,573 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:37:46,538 p=29926 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:37:46,554 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:37:46,574 p=30463 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:37:46,612 p=29926 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:37:46,615 p=29926 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:37:46,635 p=29926 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:37:46,653 p=29926 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:37:46,670 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:37:46,684 p=30467 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:37:46,699 p=29926 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 18:37:46,716 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 18:37:46,736 p=29926 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-11 18:37:46,751 p=29926 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:37:51,573 p=29926 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Subnet named \"my_test_vpc_igw_1b_public\" does not exist"}
2021-01-11 18:37:51,576 p=29926 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:37:51,576 p=29926 u=utewatia n=ansible | aws                        : ok=22   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-11 18:42:42,854 p=30980 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-11 18:42:42,991 p=30980 u=utewatia n=ansible | PLAY [aws-cluster] ************************************************************************************************************************************************************************************************
2021-01-11 18:42:43,003 p=30980 u=utewatia n=ansible | TASK [Gathering Facts] ********************************************************************************************************************************************************************************************
2021-01-11 18:42:46,160 p=30980 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will 
default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information. This feature will be removed in 
version 2.12. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2021-01-11 18:42:46,161 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:42:46,179 p=30980 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] *********************************************************************************************************************************************************************
2021-01-11 18:42:46,205 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-11 18:42:46,225 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:42:46,350 p=30980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-11 18:42:46,368 p=30980 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:42:46,399 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:42:46,420 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ***************************************************************************************************************************************************************************************
2021-01-11 18:42:57,063 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:42:57,078 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] *********************************************************************************************************************************************************************************
2021-01-11 18:42:57,100 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-11 18:42:57,116 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] **************************************************************************************************************************************************************************
2021-01-11 18:43:02,201 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:43:02,216 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] ********************************************************************************************************************************************************************
2021-01-11 18:43:02,239 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-11 18:43:02,254 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] ****************************************************************************************************************************************************************************
2021-01-11 18:43:02,280 p=31178 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:43:04,545 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-11 18:43:09,480 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-11 18:43:09,496 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ***********************************************************************************************************************************************************************
2021-01-11 18:43:09,524 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:43:09,542 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] ****************************************************************************************************************************************************************************
2021-01-11 18:43:13,484 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-11 18:43:15,640 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-11 18:43:19,562 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-11 18:43:21,639 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-11 18:43:25,596 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-11 18:43:25,612 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] *********************************************************************************************************************************************************************
2021-01-11 18:43:25,644 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-11 18:43:25,661 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] *****************************************************************************************************************************************************************
2021-01-11 18:43:27,272 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-11 18:43:27,279 p=30980 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-11 18:43:27,296 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ******************************************************************************************************************************************************************
2021-01-11 18:43:27,327 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-11 18:43:27,343 p=30980 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ******************************************************************************************************************************************************************************
2021-01-11 18:43:27,378 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-11 18:43:27,385 p=30980 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-11 18:43:27,402 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] ************************************************************************************************************************************************************************
2021-01-11 18:43:27,428 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-11 18:43:27,445 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] **************************************************************************************************************************************************************************
2021-01-11 18:43:31,378 p=30980 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-11 18:43:31,393 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:43:31,445 p=31487 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:43:31,480 p=30980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:43:31,483 p=30980 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-11 18:43:31,503 p=30980 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:43:31,524 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:43:31,541 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:43:31,559 p=31491 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:43:31,571 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-11 18:43:31,588 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 18:43:31,607 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-11 18:43:31,627 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:43:41,420 p=30980 u=utewatia n=ansible | changed: [aws]
2021-01-11 18:43:41,435 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] *******************************************************************************************************************************************************************************
2021-01-11 18:43:41,452 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": true, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-11 18:43:41,469 p=30980 u=utewatia n=ansible | TASK [aws-vpc : set_fact] *****************************************************************************************************************************************************************************************
2021-01-11 18:43:41,487 p=30980 u=utewatia n=ansible | ok: [aws]
2021-01-11 18:43:41,502 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] **************************************************************************************************************************************************************
2021-01-11 18:43:41,516 p=31543 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-11 18:43:41,529 p=30980 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-11 18:43:41,547 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ***************************************************************************************************************************************************************
2021-01-11 18:43:41,563 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-11 18:43:41,580 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] *******************************************************************************************************************************************************************************
2021-01-11 18:43:55,569 p=30980 u=utewatia n=ansible | changed: [aws]
2021-01-11 18:43:55,585 p=30980 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] *******************************************************************************************************************************************************************************
2021-01-11 18:43:55,601 p=30980 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": true, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-11 18:43:55,603 p=30980 u=utewatia n=ansible | PLAY RECAP ********************************************************************************************************************************************************************************************************
2021-01-11 18:43:55,604 p=30980 u=utewatia n=ansible | aws                        : ok=29   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-12 14:06:37,132 p=7524 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:06:37,748 p=7524 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:06:37,798 p=7524 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:06:48,948 p=7524 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:06:48,948 p=7524 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:06:48,984 p=7524 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:06:49,047 p=7524 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:06:49,078 p=7524 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:06:49,178 p=7524 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml': line 124, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n  - name: Create Egress Security Groups\n  ^ here\n"}
2021-01-12 14:06:49,179 p=7524 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:06:49,180 p=7524 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-12 14:09:32,411 p=7937 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:09:32,631 p=7937 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:09:32,650 p=7937 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:09:42,869 p=7937 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:09:42,870 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:09:42,896 p=7937 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:09:42,940 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:09:42,968 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:09:43,152 p=7937 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:09:43,180 p=7937 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:09:43,219 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:09:43,245 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:09:54,172 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:09:54,200 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:09:54,239 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:09:54,268 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:09:58,278 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:09:58,306 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:09:58,342 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:09:58,367 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:09:58,401 p=8144 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:10:01,551 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:10:05,954 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:10:05,980 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:10:06,024 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:10:06,050 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:10:10,382 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:10:12,923 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:10:17,433 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:10:21,535 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:10:24,088 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:10:24,121 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:10:24,172 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:10:24,200 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:10:27,769 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:10:27,781 p=7937 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:10:27,813 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:10:27,865 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:10:27,892 p=7937 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:10:27,955 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:10:27,962 p=7937 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:10:27,994 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:10:28,031 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:10:28,060 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:10:33,214 p=7937 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:10:33,242 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:10:33,280 p=8459 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:10:33,337 p=7937 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:10:33,342 p=7937 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:10:33,375 p=7937 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:10:33,400 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:10:33,426 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:10:33,445 p=8463 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:10:33,468 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:10:33,494 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:10:33,517 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:10:33,544 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:10:38,956 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:10:38,990 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:10:39,019 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:10:39,047 p=7937 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:10:39,072 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:10:39,107 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:10:39,127 p=8509 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:10:39,150 p=7937 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:10:39,189 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:10:39,213 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:10:39,240 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:10:46,292 p=7937 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:10:46,318 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:10:46,346 p=7937 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:10:46,375 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:10:46,436 p=7937 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:10:46,514 p=7937 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "Could not find or access '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml' on the Ansible Controller."}
2021-01-12 14:10:46,515 p=7937 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "Could not find or access '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml' on the Ansible Controller."}
2021-01-12 14:10:46,516 p=7937 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "Could not find or access '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml' on the Ansible Controller."}
2021-01-12 14:10:46,517 p=7937 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:10:46,518 p=7937 u=utewatia n=ansible | aws                        : ok=29   changed=1    unreachable=0    failed=3    skipped=1    rescued=0    ignored=0   
2021-01-12 14:12:28,713 p=8755 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:12:28,953 p=8755 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:12:28,969 p=8755 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:12:39,284 p=8755 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:12:39,284 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:12:39,311 p=8755 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:12:39,346 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:12:39,376 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:12:39,559 p=8755 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:12:39,595 p=8755 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:12:39,640 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:12:39,666 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:12:49,379 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:12:49,416 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:12:49,461 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:12:49,488 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:12:53,793 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:12:53,819 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:12:53,854 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:12:53,886 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:12:53,928 p=8962 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:12:58,304 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:13:00,955 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:13:00,986 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:13:01,033 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:13:01,059 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:13:05,474 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:13:12,122 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:13:18,151 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:13:22,167 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:13:24,821 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:13:24,851 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:13:24,903 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:13:24,931 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:13:28,411 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:13:28,426 p=8755 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:13:28,469 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:13:28,515 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:13:28,542 p=8755 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:13:28,602 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:13:28,649 p=8755 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:13:28,679 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:13:28,717 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:13:28,746 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:13:31,578 p=8755 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:13:31,605 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:13:31,640 p=9280 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:13:31,699 p=8755 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:13:31,704 p=8755 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:13:31,769 p=8755 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:13:31,794 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:13:31,824 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:13:31,844 p=9287 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:13:31,865 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:13:31,893 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:13:31,919 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:13:31,947 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:13:38,204 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:13:38,231 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:13:38,258 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:13:38,285 p=8755 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:13:38,309 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:13:38,336 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:13:38,356 p=9333 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:13:38,377 p=8755 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:13:38,404 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:13:38,432 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:13:38,458 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:13:45,410 p=8755 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:13:45,437 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:13:45,465 p=8755 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:13:45,493 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:13:45,545 p=8755 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:13:45,626 p=8755 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 53, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.description | default(\"\")}}\"\n                                                    ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:13:45,627 p=8755 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 53, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.description | default(\"\")}}\"\n                                                    ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:13:45,628 p=8755 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 53, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.description | default(\"\")}}\"\n                                                    ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:13:45,630 p=8755 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:13:45,630 p=8755 u=utewatia n=ansible | aws                        : ok=29   changed=1    unreachable=0    failed=3    skipped=1    rescued=0    ignored=0   
2021-01-12 14:15:18,422 p=9553 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:15:18,643 p=9553 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:15:18,660 p=9553 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:15:28,990 p=9553 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:15:28,990 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:15:29,016 p=9553 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:15:29,054 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:15:29,084 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:15:29,266 p=9553 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:15:29,296 p=9553 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:15:29,341 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:15:29,367 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:15:39,274 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:15:39,302 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:15:39,338 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:15:39,367 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:15:43,543 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:15:43,570 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:15:43,605 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:15:43,632 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:15:43,666 p=9757 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:15:48,285 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:15:50,837 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:15:50,875 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:15:50,920 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:15:50,946 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:15:54,838 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:15:57,387 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:16:01,893 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:16:04,564 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:16:11,232 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:16:11,262 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:16:11,313 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:16:11,340 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:16:15,140 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:16:15,149 p=9553 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:16:15,177 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:16:15,221 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:16:15,248 p=9553 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:16:15,305 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:16:15,315 p=9553 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:16:15,345 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:16:15,382 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:16:15,410 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:16:18,183 p=9553 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:16:18,219 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:16:18,296 p=10075 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:16:18,362 p=9553 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:16:18,368 p=9553 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:16:18,401 p=9553 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:16:18,426 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:16:18,453 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:16:18,470 p=10079 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:16:18,491 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:16:18,519 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:16:18,542 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:16:18,570 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:16:25,039 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:16:25,064 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:16:25,090 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:16:25,118 p=9553 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:16:25,142 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:16:25,168 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:16:25,189 p=10125 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:16:25,210 p=9553 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:16:25,237 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:16:25,265 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:16:25,293 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:16:32,633 p=9553 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:16:32,659 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:16:32,687 p=9553 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:16:32,713 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:16:32,764 p=9553 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:16:32,841 p=9553 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 51, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.rule_desc | default(\"\") }}\"\n                                                  ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:16:32,842 p=9553 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 51, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.rule_desc | default(\"\") }}\"\n                                                  ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:16:32,844 p=9553 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  did not find expected key\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml': line 31, column 51, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n    region: \"{{ internal_vpc_region }}\"\n    description: \"{{ sg_conf.rule_desc | default(\"\") }}\"\n                                                  ^ here\nWe could be wrong, but this one looks like it might be an issue with\nmissing quotes. Always quote template expression brackets when they\nstart a value. For instance:\n\n    with_items:\n      - {{ foo }}\n\nShould be written as:\n\n    with_items:\n      - \"{{ foo }}\"\n"}
2021-01-12 14:16:32,846 p=9553 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:16:32,846 p=9553 u=utewatia n=ansible | aws                        : ok=29   changed=1    unreachable=0    failed=3    skipped=1    rescued=0    ignored=0   
2021-01-12 14:20:18,450 p=10554 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:20:18,668 p=10554 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:20:18,688 p=10554 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:20:28,256 p=10554 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:20:28,257 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:20:28,283 p=10554 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:20:28,319 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:20:28,348 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:20:28,534 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:20:28,565 p=10554 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:20:28,605 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:20:28,631 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:20:38,606 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:20:38,636 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:20:38,680 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:20:38,707 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:20:43,020 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:20:43,046 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:20:43,082 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:20:43,110 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:20:43,149 p=10790 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:20:46,017 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:20:50,716 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:20:50,744 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:20:50,788 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:20:50,814 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:20:53,335 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:20:57,426 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:20:59,989 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:21:04,392 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:21:06,863 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:21:06,898 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:21:06,949 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:21:06,975 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:21:10,855 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:21:10,865 p=10554 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:21:10,903 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:21:10,956 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:21:10,984 p=10554 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:21:11,041 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:21:11,049 p=10554 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:21:11,080 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:21:11,120 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:21:11,152 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:21:13,806 p=10554 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:21:13,832 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:21:13,871 p=11107 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:21:13,929 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:21:13,934 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:21:13,999 p=10554 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:21:14,030 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:21:14,066 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:21:14,089 p=11114 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:21:14,112 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:21:14,142 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:21:14,167 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:21:14,193 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:21:20,478 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:21:20,504 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:21:20,533 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:21:20,560 p=10554 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:21:20,583 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:21:20,610 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:21:20,629 p=11160 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:21:20,650 p=10554 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:21:20,676 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:21:20,701 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:21:20,728 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:21:28,455 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:21:28,489 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:21:28,525 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:21:28,556 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:21:28,611 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:21:28,692 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:21:28,701 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:21:28,709 p=10554 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:21:28,749 p=10554 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:21:28,778 p=10554 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:21:28,805 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:21:28,834 p=10554 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}) 
2021-01-12 14:21:28,842 p=10554 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}) 
2021-01-12 14:21:28,871 p=10554 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:21:28,899 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh access", 
        "name": "security_group_web_app", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    443
                ], 
                "proto": "tcp", 
                "rule_desc": "allow all on port 443"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    443, 
                    80
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 443 and 80"
            }
        ]
    }
}
2021-01-12 14:21:28,926 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:21:28,964 p=10554 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'180.149.227.210/32'])
2021-01-12 14:21:28,975 p=10554 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'198.168.25.64/29'])
2021-01-12 14:21:28,985 p=10554 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}, u'10.2.0.0/16'])
2021-01-12 14:21:29,017 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:21:29,049 p=10554 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                443, 
                80
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 443 and 80"
        }
    ]
}
2021-01-12 14:21:29,075 p=10554 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:21:29,772 p=10554 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Must provide description when state is present."}
2021-01-12 14:21:29,775 p=10554 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:21:29,775 p=10554 u=utewatia n=ansible | aws                        : ok=36   changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2021-01-12 14:23:15,450 p=11433 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:23:15,693 p=11433 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:23:15,712 p=11433 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:23:25,944 p=11433 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:23:25,944 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:23:25,970 p=11433 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:23:26,006 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:23:26,033 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:23:26,215 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:23:26,241 p=11433 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:23:26,281 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:23:26,308 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:23:41,171 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:23:41,203 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:23:41,243 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:23:41,270 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:23:46,091 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:23:46,117 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:23:46,156 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:23:46,185 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:23:46,219 p=11649 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:23:50,286 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:23:52,855 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:23:52,882 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:23:52,924 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:23:52,951 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:23:57,354 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:24:00,012 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:24:04,299 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:24:06,793 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:24:11,787 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:24:11,816 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:24:11,865 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:24:11,891 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:24:15,366 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:24:15,377 p=11433 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:24:15,407 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:24:15,495 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:24:15,523 p=11433 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:24:15,580 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:24:15,588 p=11433 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:24:15,621 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:24:15,662 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:24:15,689 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:24:18,437 p=11433 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:24:18,476 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:24:18,514 p=11961 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:24:18,577 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:24:18,582 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:24:18,617 p=11433 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:24:18,681 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:24:18,707 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:24:18,726 p=11965 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:24:18,745 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:24:18,771 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:24:18,796 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:24:18,823 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:24:25,160 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:24:25,186 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:24:25,214 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:24:25,240 p=11433 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:24:25,264 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:24:25,290 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:24:25,310 p=12011 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:24:25,332 p=11433 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:24:25,358 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:24:25,382 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:24:25,410 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:24:35,945 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:24:35,977 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:24:36,005 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:24:36,032 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:24:36,082 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:24:36,170 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:24:36,176 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:24:36,183 p=11433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:24:36,225 p=11433 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:24:36,248 p=11433 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:24:36,277 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:24:36,307 p=11433 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}) 
2021-01-12 14:24:36,314 p=11433 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}) 
2021-01-12 14:24:36,348 p=11433 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:24:36,377 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh access", 
        "name": "security_group_web_app", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    443
                ], 
                "proto": "tcp", 
                "rule_desc": "allow all on port 443"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    443, 
                    80
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 443 and 80"
            }
        ]
    }
}
2021-01-12 14:24:36,405 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:24:36,444 p=11433 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'180.149.227.210/32'])
2021-01-12 14:24:36,455 p=11433 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'198.168.25.64/29'])
2021-01-12 14:24:36,466 p=11433 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}, u'10.2.0.0/16'])
2021-01-12 14:24:36,493 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:24:36,521 p=11433 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                443, 
                80
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 443 and 80"
        }
    ]
}
2021-01-12 14:24:36,552 p=11433 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:24:37,230 p=11433 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Must provide description when state is present."}
2021-01-12 14:24:37,233 p=11433 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:24:37,233 p=11433 u=utewatia n=ansible | aws                        : ok=36   changed=1    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2021-01-12 14:30:08,930 p=12633 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:30:09,193 p=12633 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:30:09,213 p=12633 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:30:19,306 p=12633 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:30:19,307 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:30:19,332 p=12633 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:30:19,371 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:30:19,398 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:30:19,581 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:30:19,619 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:30:19,667 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:30:19,693 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:30:29,649 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:30:29,678 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:30:29,715 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:30:29,742 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:30:34,669 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:30:34,694 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:30:34,733 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:30:34,762 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:30:34,795 p=12872 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:30:39,697 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:30:42,570 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:30:42,607 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:30:42,652 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:30:42,683 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:30:47,794 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:30:50,562 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:30:54,930 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:30:59,711 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:31:06,459 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:31:06,506 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:31:06,581 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:31:06,624 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:31:11,178 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:31:11,199 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:31:11,249 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:31:11,312 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:31:11,341 p=12633 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:31:11,470 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:31:11,481 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:31:11,530 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:31:11,576 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:31:11,613 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:31:14,391 p=12633 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:31:14,418 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:31:14,461 p=13244 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:31:14,521 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:31:14,528 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:31:14,572 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:31:14,602 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:14,633 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:31:14,656 p=13248 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:31:14,687 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:31:14,730 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:31:14,767 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:31:14,804 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:31:21,877 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:21,903 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:31:21,934 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:31:21,974 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:31:22,011 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:22,052 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:31:22,081 p=13294 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:31:22,102 p=12633 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:31:22,133 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:31:22,163 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:31:22,195 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:31:29,593 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:29,630 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:31:29,671 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:31:29,711 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:31:29,786 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:31:29,874 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:31:29,883 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:31:29,892 p=12633 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:31:29,948 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:31:29,979 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:30,019 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:31:30,065 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}) 
2021-01-12 14:31:30,076 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}) 
2021-01-12 14:31:30,117 p=12633 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:31:30,158 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh access", 
        "name": "security_group_web_app", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    443
                ], 
                "proto": "tcp", 
                "rule_desc": "allow all on port 443"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    443, 
                    80
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 443 and 80"
            }
        ]
    }
}
2021-01-12 14:31:30,198 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:31:30,253 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'180.149.227.210/32'])
2021-01-12 14:31:30,271 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'198.168.25.64/29'])
2021-01-12 14:31:30,286 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}, u'10.2.0.0/16'])
2021-01-12 14:31:30,329 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:31:30,356 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                443, 
                80
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 443 and 80"
        }
    ]
}
2021-01-12 14:31:30,387 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:31:58,888 p=12633 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:31:58,932 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:31:58,991 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for ssh access", 
        "failed": false, 
        "group_id": "sg-0474c27cf8d80bf20", 
        "group_name": "security_group_web_app", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:31:59,047 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:31:59,093 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:31:59,147 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:31:59,198 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}) 
2021-01-12 14:31:59,205 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}) 
2021-01-12 14:31:59,240 p=12633 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:31:59,278 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh", 
        "name": "security_group_ssh", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow ssh"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 22"
            }
        ]
    }
}
2021-01-12 14:31:59,319 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:31:59,376 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'180.149.227.210/32'])
2021-01-12 14:31:59,390 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'198.168.25.64/29'])
2021-01-12 14:31:59,406 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}, u'10.2.0.0/16'])
2021-01-12 14:31:59,448 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:31:59,489 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 22"
        }
    ]
}
2021-01-12 14:31:59,529 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:32:15,166 p=12633 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:32:15,203 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:32:15,247 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for ssh", 
        "failed": false, 
        "group_id": "sg-039a33058872d9286", 
        "group_name": "security_group_ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 22"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow ssh"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow ssh"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:32:15,292 p=12633 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:32:15,327 p=12633 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:32:15,371 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:32:15,420 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}) 
2021-01-12 14:32:15,432 p=12633 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}) 
2021-01-12 14:32:15,535 p=12633 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:32:15,605 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for postgres", 
        "name": "postgres_access_sg", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access within vpc"
            }
        ]
    }
}
2021-01-12 14:32:15,707 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:32:15,775 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'180.149.227.210/32'])
2021-01-12 14:32:15,789 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'198.168.25.64/29'])
2021-01-12 14:32:15,808 p=12633 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}, u'10.2.0.0/16'])
2021-01-12 14:32:15,859 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:32:15,904 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access within vpc"
        }
    ]
}
2021-01-12 14:32:15,955 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:32:32,960 p=12633 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:32:33,007 p=12633 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:32:33,059 p=12633 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for postgres", 
        "failed": false, 
        "group_id": "sg-095b3f027dd78dcde", 
        "group_name": "postgres_access_sg", 
        "ip_permissions": [
            {
                "from_port": 5432, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow postgres access within vpc"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow postgres access"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow postgres access"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 5432, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:32:33,064 p=12633 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:32:33,066 p=12633 u=utewatia n=ansible | aws                        : ok=50   changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2021-01-12 14:34:21,452 p=13751 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-12 14:34:21,734 p=13751 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-12 14:34:21,751 p=13751 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-12 14:34:34,856 p=13751 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-12 14:34:34,857 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:34:34,908 p=13751 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-12 14:34:34,964 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-12 14:34:34,992 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:34:35,188 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-12 14:34:35,229 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:34:35,287 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:34:35,331 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-12 14:34:44,999 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:34:45,029 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-12 14:34:45,078 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-12 14:34:45,113 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-12 14:34:48,900 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:34:48,978 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-12 14:34:49,082 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:34:49,163 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-12 14:34:49,250 p=13961 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:34:52,383 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-12 14:34:57,430 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-12 14:34:57,501 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-12 14:34:57,564 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:34:57,607 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-12 14:35:02,188 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-12 14:35:06,187 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-12 14:35:09,060 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-12 14:35:13,207 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-12 14:35:16,252 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-12 14:35:16,334 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-12 14:35:16,401 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-12 14:35:16,443 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-12 14:35:20,554 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-12 14:35:20,567 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-12 14:35:20,613 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-12 14:35:20,680 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-12 14:35:20,709 p=13751 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-12 14:35:20,764 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-12 14:35:20,773 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-12 14:35:20,802 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-12 14:35:20,837 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-12 14:35:20,864 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-12 14:35:24,896 p=13751 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-12 14:35:24,965 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:35:25,106 p=14279 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:35:25,213 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:35:25,221 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-12 14:35:25,264 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:35:25,290 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:25,327 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:35:25,354 p=14283 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:35:25,385 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-12 14:35:25,425 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:35:25,459 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-12 14:35:25,499 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:35:32,493 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:32,528 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:35:32,567 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:35:32,609 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:35:32,643 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:32,685 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-12 14:35:32,712 p=14332 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-12 14:35:32,746 p=13751 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-12 14:35:32,784 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-12 14:35:32,819 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-12 14:35:32,866 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-12 14:35:41,768 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:41,799 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-12 14:35:41,827 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-12 14:35:41,860 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-12 14:35:41,912 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-12 14:35:41,997 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:35:42,003 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:35:42,009 p=13751 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-12 14:35:42,049 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:35:42,076 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:42,115 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:35:42,165 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}) 
2021-01-12 14:35:42,177 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}) 
2021-01-12 14:35:42,218 p=13751 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:35:42,248 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh access", 
        "name": "security_group_web_app", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    443
                ], 
                "proto": "tcp", 
                "rule_desc": "allow all on port 443"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    443, 
                    80
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 443 and 80"
            }
        ]
    }
}
2021-01-12 14:35:42,275 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:35:42,323 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'180.149.227.210/32'])
2021-01-12 14:35:42,347 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'198.168.25.64/29'])
2021-01-12 14:35:42,359 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}, u'10.2.0.0/16'])
2021-01-12 14:35:42,400 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:35:42,438 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                443, 
                80
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 443 and 80"
        }
    ]
}
2021-01-12 14:35:42,478 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:35:57,650 p=13751 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:35:57,690 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:35:57,730 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for ssh access", 
        "failed": false, 
        "group_id": "sg-0474c27cf8d80bf20", 
        "group_name": "security_group_web_app", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "security_group_web_app", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:35:57,772 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:35:57,807 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:35:57,848 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:35:57,893 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}) 
2021-01-12 14:35:57,903 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}) 
2021-01-12 14:35:57,943 p=13751 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:35:57,986 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh", 
        "name": "security_group_ssh", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow ssh"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 22"
            }
        ]
    }
}
2021-01-12 14:35:58,027 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:35:58,081 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'180.149.227.210/32'])
2021-01-12 14:35:58,098 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'198.168.25.64/29'])
2021-01-12 14:35:58,119 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}, u'10.2.0.0/16'])
2021-01-12 14:35:58,177 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:35:58,221 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 22"
        }
    ]
}
2021-01-12 14:35:58,274 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:36:10,570 p=13751 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:36:10,596 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:36:10,634 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for ssh", 
        "failed": false, 
        "group_id": "sg-039a33058872d9286", 
        "group_name": "security_group_ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 22"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow ssh"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow ssh"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "security_group_ssh", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:36:10,673 p=13751 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-12 14:36:10,710 p=13751 u=utewatia n=ansible | ok: [aws]
2021-01-12 14:36:10,753 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-12 14:36:10,800 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}) 
2021-01-12 14:36:10,810 p=13751 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}) 
2021-01-12 14:36:10,852 p=13751 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-12 14:36:10,895 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for postgres", 
        "name": "postgres_access_sg", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access within vpc"
            }
        ]
    }
}
2021-01-12 14:36:10,935 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-12 14:36:10,987 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'180.149.227.210/32'])
2021-01-12 14:36:10,999 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'198.168.25.64/29'])
2021-01-12 14:36:11,013 p=13751 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}, u'10.2.0.0/16'])
2021-01-12 14:36:11,055 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-12 14:36:11,093 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access within vpc"
        }
    ]
}
2021-01-12 14:36:11,134 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-12 14:36:24,662 p=13751 u=utewatia n=ansible | changed: [aws]
2021-01-12 14:36:24,702 p=13751 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-12 14:36:24,743 p=13751 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": true, 
        "description": "security group for postgres", 
        "failed": false, 
        "group_id": "sg-095b3f027dd78dcde", 
        "group_name": "postgres_access_sg", 
        "ip_permissions": [
            {
                "from_port": 5432, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow postgres access within vpc"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow postgres access"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow postgres access"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 5432, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "postgres_access_sg", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-12 14:36:24,748 p=13751 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-12 14:36:24,749 p=13751 u=utewatia n=ansible | aws                        : ok=50   changed=4    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2021-01-13 13:11:22,838 p=1379 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 13:11:23,419 p=1379 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 13:11:23,464 p=1379 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 13:11:35,003 p=1379 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 13:11:35,003 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:11:35,030 p=1379 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-13 13:11:35,090 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 13:11:35,118 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-13 13:11:35,309 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc.yml for aws
2021-01-13 13:11:35,343 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:11:35,381 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:11:35,407 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create VPC] ********************************************************************************************
2021-01-13 13:11:47,304 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:11:47,339 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print VPC result] **************************************************************************************
2021-01-13 13:11:47,376 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "vpc_create_op": {
        "changed": false, 
        "failed": false, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }
        }
    }
}
2021-01-13 13:11:47,402 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Internet Gateway] *******************************************************************************
2021-01-13 13:11:52,128 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:11:52,154 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Internet Gateway Result] *************************************************************************
2021-01-13 13:11:52,190 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "igw_create_op": {
        "changed": false, 
        "failed": false, 
        "gateway_id": "igw-0e2c57a47c8ec696e", 
        "tags": {
            "Name": "my_test_vpc_igw", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-13 13:11:52,216 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnets] *********************************************************************************
2021-01-13 13:11:52,249 p=1610 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-13 13:11:57,558 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'})
2021-01-13 13:12:02,248 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'})
2021-01-13 13:12:02,280 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Result] ****************************************************************************
2021-01-13 13:12:02,330 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "public_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.0.0/24", 
                    "name": "my_test_vpc_1a_public", 
                    "ngw": {
                        "name": "my_test_vpc_igw_1a_public_ng"
                    }
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 250, 
                    "cidr_block": "10.2.0.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0830e0e4b165518d1", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                    "tags": {
                        "Name": "my_test_vpc_1a_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": true, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.1.0/24", 
                    "name": "my_test_vpc_1b_public"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.1.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-026d54abaffe52f41", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": true, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                    "tags": {
                        "Name": "my_test_vpc_1b_public", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-13 13:12:02,367 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Private Subnet] *********************************************************************************
2021-01-13 13:12:09,122 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.2.0/24', u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_private'})
2021-01-13 13:12:12,993 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.3.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_private'})
2021-01-13 13:12:15,528 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.4.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private'})
2021-01-13 13:12:19,904 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.5.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private2'})
2021-01-13 13:12:22,774 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'cidr': u'10.2.6.0/24', u'az': u'us-east-1c', u'name': u'my_test_vpc_1c_private3'})
2021-01-13 13:12:22,810 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Private Subnet Results] **************************************************************************
2021-01-13 13:12:22,871 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "private_subnet_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1a", 
                        "cidr": "10.2.2.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1a_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1a", 
                    "cidr": "10.2.2.0/24", 
                    "name": "my_test_vpc_1a_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1a", 
                    "availability_zone_id": "use1-az2", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.2.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b2fb03d582b02b30", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                    "tags": {
                        "Name": "my_test_vpc_1a_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1b", 
                        "cidr": "10.2.3.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1b_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1b", 
                    "cidr": "10.2.3.0/24", 
                    "name": "my_test_vpc_1b_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1b", 
                    "availability_zone_id": "use1-az4", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.3.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0b16f2c25ce03bfdb", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                    "tags": {
                        "Name": "my_test_vpc_1b_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.4.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.4.0/24", 
                    "name": "my_test_vpc_1c_private"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.4.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f90e193abd6bfe06", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.5.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private2", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.5.0/24", 
                    "name": "my_test_vpc_1c_private2"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.5.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-083623b0faa2897a4", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private2", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }, 
            {
                "ansible_loop_var": "item2", 
                "changed": false, 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "assign_instances_ipv6": false, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "az": "us-east-1c", 
                        "cidr": "10.2.6.0/24", 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "ipv6_cidr": "", 
                        "map_public": false, 
                        "profile": null, 
                        "purge_tags": true, 
                        "region": "us-east-1", 
                        "security_token": null, 
                        "state": "present", 
                        "tags": {
                            "Name": "my_test_vpc_1c_private3", 
                            "source": "ansible"
                        }, 
                        "validate_certs": true, 
                        "vpc_id": "vpc-0900f0b1a57906750", 
                        "wait": true, 
                        "wait_timeout": 300
                    }
                }, 
                "item2": {
                    "az": "us-east-1c", 
                    "cidr": "10.2.6.0/24", 
                    "name": "my_test_vpc_1c_private3"
                }, 
                "subnet": {
                    "assign_ipv6_address_on_creation": false, 
                    "availability_zone": "us-east-1c", 
                    "availability_zone_id": "use1-az6", 
                    "available_ip_address_count": 251, 
                    "cidr_block": "10.2.6.0/24", 
                    "default_for_az": false, 
                    "id": "subnet-0f08e788427c12c35", 
                    "ipv6_association_id": "", 
                    "ipv6_cidr_block": "", 
                    "ipv6_cidr_block_association_set": [], 
                    "map_customer_owned_ip_on_launch": false, 
                    "map_public_ip_on_launch": false, 
                    "owner_id": "166032887324", 
                    "state": "available", 
                    "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                    "tags": {
                        "Name": "my_test_vpc_1c_private3", 
                        "source": "ansible"
                    }, 
                    "vpc_id": "vpc-0900f0b1a57906750"
                }
            }
        ]
    }
}
2021-01-13 13:12:22,902 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Public Subnet Nat Gateway] **********************************************************************
2021-01-13 13:12:26,232 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False})
2021-01-13 13:12:26,243 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'map_public_ip_on_launch': True}, u'ansible_loop_var': u'item', u'failed': False, u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}) 
2021-01-13 13:12:26,281 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Public Subnet Nat Gateway] ***********************************************************************
2021-01-13 13:12:26,386 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "nat_gateway_create_op": {
        "changed": false, 
        "msg": "All items completed", 
        "results": [
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "create_time": "2021-01-08T12:22:34+00:00", 
                "failed": false, 
                "invocation": {
                    "module_args": {
                        "allocation_id": null, 
                        "aws_access_key": null, 
                        "aws_secret_key": null, 
                        "client_token": null, 
                        "debug_botocore_endpoint_logs": false, 
                        "ec2_url": null, 
                        "eip_address": null, 
                        "if_exist_do_not_create": true, 
                        "nat_gateway_id": null, 
                        "profile": null, 
                        "region": "us-east-1", 
                        "release_eip": true, 
                        "security_token": null, 
                        "state": "present", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "validate_certs": true, 
                        "wait": true, 
                        "wait_timeout": 320
                    }
                }, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1a", 
                            "cidr": "10.2.0.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1a_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1a", 
                        "cidr": "10.2.0.0/24", 
                        "name": "my_test_vpc_1a_public", 
                        "ngw": {
                            "name": "my_test_vpc_igw_1a_public_ng"
                        }
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1a", 
                        "availability_zone_id": "use1-az2", 
                        "available_ip_address_count": 250, 
                        "cidr_block": "10.2.0.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-0830e0e4b165518d1", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                        "tags": {
                            "Name": "my_test_vpc_1a_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "msg": "NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1", 
                "nat_gateway_addresses": [
                    {
                        "allocation_id": "eipalloc-0dcaae8c68e1037f7", 
                        "network_interface_id": "eni-0403d378329d97fe3", 
                        "private_ip": "10.2.0.183", 
                        "public_ip": "18.211.189.208"
                    }
                ], 
                "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                "state": "available", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "success": true, 
                "tags": [
                    {
                        "key": "source", 
                        "value": "ansible"
                    }, 
                    {
                        "key": "Name", 
                        "value": "my_test_vpc_igw_1a_public_ng"
                    }
                ], 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "ansible_loop_var": "item3", 
                "changed": false, 
                "item3": {
                    "ansible_loop_var": "item", 
                    "changed": false, 
                    "failed": false, 
                    "invocation": {
                        "module_args": {
                            "assign_instances_ipv6": false, 
                            "aws_access_key": null, 
                            "aws_secret_key": null, 
                            "az": "us-east-1b", 
                            "cidr": "10.2.1.0/24", 
                            "debug_botocore_endpoint_logs": false, 
                            "ec2_url": null, 
                            "ipv6_cidr": "", 
                            "map_public": true, 
                            "profile": null, 
                            "purge_tags": true, 
                            "region": "us-east-1", 
                            "security_token": null, 
                            "state": "present", 
                            "tags": {
                                "Name": "my_test_vpc_1b_public", 
                                "source": "ansible"
                            }, 
                            "validate_certs": true, 
                            "vpc_id": "vpc-0900f0b1a57906750", 
                            "wait": true, 
                            "wait_timeout": 300
                        }
                    }, 
                    "item": {
                        "az": "us-east-1b", 
                        "cidr": "10.2.1.0/24", 
                        "name": "my_test_vpc_1b_public"
                    }, 
                    "subnet": {
                        "assign_ipv6_address_on_creation": false, 
                        "availability_zone": "us-east-1b", 
                        "availability_zone_id": "use1-az4", 
                        "available_ip_address_count": 251, 
                        "cidr_block": "10.2.1.0/24", 
                        "default_for_az": false, 
                        "id": "subnet-026d54abaffe52f41", 
                        "ipv6_association_id": "", 
                        "ipv6_cidr_block": "", 
                        "ipv6_cidr_block_association_set": [], 
                        "map_customer_owned_ip_on_launch": false, 
                        "map_public_ip_on_launch": true, 
                        "owner_id": "166032887324", 
                        "state": "available", 
                        "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                        "tags": {
                            "Name": "my_test_vpc_1b_public", 
                            "source": "ansible"
                        }, 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                }, 
                "skip_reason": "Conditional result was False", 
                "skipped": true
            }
        ]
    }
}
2021-01-13 13:12:26,415 p=1379 u=utewatia n=ansible | TASK [aws-vpc : NAT Gateway Mapping] ***********************************************************************************
2021-01-13 13:12:26,544 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'ansible_loop_var': u'item3', u'nat_gateway_id': u'nat-095b3a13c5aa8e4f5', u'success': True, u'tags': [{u'key': u'source', u'value': u'ansible'}, {u'key': u'Name', u'value': u'my_test_vpc_igw_1a_public_ng'}], u'subnet_id': u'subnet-0830e0e4b165518d1', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1a', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 250, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.0.0/24', u'ngw': {u'name': u'my_test_vpc_igw_1a_public_ng'}, u'az': u'us-east-1a', u'name': u'my_test_vpc_1a_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.0.0/24', u'az': u'us-east-1a', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'nat_gateway_addresses': [{u'public_ip': u'18.211.189.208', u'network_interface_id': u'eni-0403d378329d97fe3', u'private_ip': u'10.2.0.183', u'allocation_id': u'eipalloc-0dcaae8c68e1037f7'}], u'changed': False, u'failed': False, u'state': u'available', u'create_time': u'2021-01-08T12:22:34+00:00', u'invocation': {u'module_args': {u'profile': None, u'eip_address': None, u'debug_botocore_endpoint_logs': False, u'if_exist_do_not_create': True, u'wait_timeout': 320, u'ec2_url': None, u'release_eip': True, u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'nat_gateway_id': None, u'security_token': None, u'allocation_id': None, u'subnet_id': u'subnet-0830e0e4b165518d1', u'region': u'us-east-1', u'state': u'present', u'client_token': None, u'validate_certs': True}}, u'vpc_id': u'vpc-0900f0b1a57906750', u'msg': u'NAT Gateway nat-095b3a13c5aa8e4f5 already exists in subnet_id subnet-0830e0e4b165518d1'})
2021-01-13 13:12:26,557 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'skip_reason': u'Conditional result was False', u'item3': {u'subnet': {u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'ipv6_association_id': u'', u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'availability_zone': u'us-east-1b', u'vpc_id': u'vpc-0900f0b1a57906750', u'map_public_ip_on_launch': True, u'available_ip_address_count': 251, u'ipv6_cidr_block': u'', u'owner_id': u'166032887324'}, u'ansible_loop_var': u'item', u'item': {u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'name': u'my_test_vpc_1b_public'}, u'failed': False, u'invocation': {u'module_args': {u'profile': None, u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'purge_tags': True, u'debug_botocore_endpoint_logs': False, u'wait_timeout': 300, u'ec2_url': None, u'cidr': u'10.2.1.0/24', u'az': u'us-east-1b', u'wait': True, u'aws_secret_key': None, u'aws_access_key': None, u'assign_instances_ipv6': False, u'ipv6_cidr': u'', u'security_token': None, u'region': u'us-east-1', u'state': u'present', u'map_public': True, u'vpc_id': u'vpc-0900f0b1a57906750', u'validate_certs': True}}, u'changed': False}, u'skipped': True, u'ansible_loop_var': u'item3', u'changed': False}) 
2021-01-13 13:12:26,595 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print NAT Gateway Mapping] *****************************************************************************
2021-01-13 13:12:26,643 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "ngw_mapping": {
        "my_test_vpc_igw_1a_public_ng": "nat-095b3a13c5aa8e4f5"
    }
}
2021-01-13 13:12:26,673 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update NAT Gateway Tags] *******************************************************************************
2021-01-13 13:12:30,282 p=1379 u=utewatia n=ansible | changed: [aws] => (item={u'key': u'my_test_vpc_igw_1a_public_ng', u'value': u'nat-095b3a13c5aa8e4f5'})
2021-01-13 13:12:30,311 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-13 13:12:30,346 p=1995 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-13 13:12:30,407 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-13 13:12:30,413 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_route_table.yml for aws
2021-01-13 13:12:30,458 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:12:30,482 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:12:30,507 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-13 13:12:30,537 p=1999 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-13 13:12:30,557 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'gateway_name': u'my_test_vpc_igw'})
2021-01-13 13:12:30,586 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-13 13:12:30,612 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "igw-0e2c57a47c8ec696e"
        }
    ]
}
2021-01-13 13:12:30,638 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-13 13:12:38,598 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:12:38,630 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-13 13:12:38,656 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-08c3dd6bb917015b2", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-0830e0e4b165518d1"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-04974f574be6a5c9a", 
                    "route_table_id": "rtb-0802031417c5ca93c", 
                    "subnet_id": "subnet-026d54abaffe52f41"
                }
            ], 
            "id": "rtb-0802031417c5ca93c", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0802031417c5ca93c", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0e2c57a47c8ec696e", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 13:12:38,682 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:12:38,708 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:12:38,738 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update Gateway Name with Gateway id] *******************************************************************
2021-01-13 13:12:38,758 p=2048 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-13 13:12:38,780 p=1379 u=utewatia n=ansible | ok: [aws] => (item={u'dest': u'0.0.0.0/0', u'natgateway_name': u'my_test_vpc_igw_1a_public_ng'})
2021-01-13 13:12:38,808 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Gateway Name with Gateway id] ********************************************************************
2021-01-13 13:12:38,833 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "routes_gw": [
        {
            "dest": "0.0.0.0/0", 
            "gateway_id": "nat-095b3a13c5aa8e4f5"
        }
    ]
}
2021-01-13 13:12:38,859 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Route Table] ************************************************************************************
2021-01-13 13:12:47,514 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:12:47,550 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Route Tables] ************************************************************************************
2021-01-13 13:12:47,580 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "rt_create_op": {
        "changed": false, 
        "failed": false, 
        "route_table": {
            "associations": [
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0b81d1fa5a10d7ef5", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0f90e193abd6bfe06"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-0c0258621619bb159", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b16f2c25ce03bfdb"
                }, 
                {
                    "association_state": {
                        "state": "associated"
                    }, 
                    "main": false, 
                    "route_table_association_id": "rtbassoc-05033f4cb3d4b02ef", 
                    "route_table_id": "rtb-0b6da29ad0e634fb3", 
                    "subnet_id": "subnet-0b2fb03d582b02b30"
                }
            ], 
            "id": "rtb-0b6da29ad0e634fb3", 
            "owner_id": "166032887324", 
            "propagating_vgws": [], 
            "route_table_id": "rtb-0b6da29ad0e634fb3", 
            "routes": [
                {
                    "destination_cidr_block": "10.2.0.0/16", 
                    "gateway_id": "local", 
                    "origin": "CreateRouteTable", 
                    "state": "active"
                }, 
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "nat_gateway_id": "nat-095b3a13c5aa8e4f5", 
                    "origin": "CreateRoute", 
                    "state": "active"
                }
            ], 
            "tags": {
                "Name": "my_test_vpc_rt_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 13:12:47,606 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Egress Security Groups] *************************************************************************
2021-01-13 13:12:47,659 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Ingress Security Groups] ************************************************************************
2021-01-13 13:12:47,745 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-13 13:12:47,753 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-13 13:12:47,759 p=1379 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_sg.yml for aws
2021-01-13 13:12:47,803 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:12:47,827 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:12:47,854 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-13 13:12:47,887 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}) 
2021-01-13 13:12:47,894 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}) 
2021-01-13 13:12:47,922 p=1379 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-13 13:12:47,949 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh access", 
        "name": "security_group_web_app", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    443
                ], 
                "proto": "tcp", 
                "rule_desc": "allow all on port 443"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    443, 
                    80
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 443 and 80"
            }
        ]
    }
}
2021-01-13 13:12:47,975 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-13 13:12:48,012 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'180.149.227.210/32'])
2021-01-13 13:12:48,023 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow all on port 443', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [443]}, u'198.168.25.64/29'])
2021-01-13 13:12:48,032 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 443 and 80', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [443, 80]}, u'10.2.0.0/16'])
2021-01-13 13:12:48,059 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-13 13:12:48,083 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                443
            ], 
            "proto": "tcp", 
            "rule_desc": "allow all on port 443"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                443, 
                80
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 443 and 80"
        }
    ]
}
2021-01-13 13:12:48,110 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-13 13:13:01,862 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:13:01,888 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-13 13:13:01,917 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": false, 
        "description": "security group for ssh access", 
        "failed": false, 
        "group_id": "sg-0474c27cf8d80bf20", 
        "group_name": "security_group_web_app", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow all on port 443"
                    }, 
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 443 and 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "security_group_web_app", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-13 13:13:01,943 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:13:01,974 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:13:02,000 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-13 13:13:02,031 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}) 
2021-01-13 13:13:02,038 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}) 
2021-01-13 13:13:02,065 p=1379 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-13 13:13:02,110 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for ssh", 
        "name": "security_group_ssh", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow ssh"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    22
                ], 
                "proto": "tcp", 
                "rule_desc": "allow vpc on port 22"
            }
        ]
    }
}
2021-01-13 13:13:02,136 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-13 13:13:02,175 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'180.149.227.210/32'])
2021-01-13 13:13:02,186 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow ssh', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [22]}, u'198.168.25.64/29'])
2021-01-13 13:13:02,198 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow vpc on port 22', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [22]}, u'10.2.0.0/16'])
2021-01-13 13:13:02,230 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-13 13:13:02,257 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow ssh"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                22
            ], 
            "proto": "tcp", 
            "rule_desc": "allow vpc on port 22"
        }
    ]
}
2021-01-13 13:13:02,284 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-13 13:13:13,169 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:13:13,197 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-13 13:13:13,224 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": false, 
        "description": "security group for ssh", 
        "failed": false, 
        "group_id": "sg-039a33058872d9286", 
        "group_name": "security_group_ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow vpc on port 22"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow ssh"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow ssh"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "security_group_ssh", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-13 13:13:13,250 p=1379 u=utewatia n=ansible | TASK [aws-vpc : set_fact] **********************************************************************************************
2021-01-13 13:13:13,280 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:13:13,310 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Update sg_rules when no cidrip] ************************************************************************
2021-01-13 13:13:13,343 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}) 
2021-01-13 13:13:13,350 p=1379 u=utewatia n=ansible | skipping: [aws] => (item={u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}) 
2021-01-13 13:13:13,377 p=1379 u=utewatia n=ansible | TASK [aws-vpc : debug] *************************************************************************************************
2021-01-13 13:13:13,406 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_conf": {
        "description": "security group for postgres", 
        "name": "postgres_access_sg", 
        "rules": [
            {
                "cidr_ips": [
                    "180.149.227.210/32", 
                    "198.168.25.64/29"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access"
            }, 
            {
                "cidr_ips": [
                    "10.2.0.0/16"
                ], 
                "ports": [
                    5432
                ], 
                "proto": "tcp", 
                "rule_desc": "allow postgres access within vpc"
            }
        ]
    }
}
2021-01-13 13:13:13,438 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create rules from cidr_ips] ****************************************************************************
2021-01-13 13:13:13,478 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'180.149.227.210/32'])
2021-01-13 13:13:13,487 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access', u'cidr_ips': [u'180.149.227.210/32', u'198.168.25.64/29'], u'ports': [5432]}, u'198.168.25.64/29'])
2021-01-13 13:13:13,498 p=1379 u=utewatia n=ansible | ok: [aws] => (item=[{u'proto': u'tcp', u'rule_desc': u'allow postgres access within vpc', u'cidr_ips': [u'10.2.0.0/16'], u'ports': [5432]}, u'10.2.0.0/16'])
2021-01-13 13:13:13,524 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print sg rules] ****************************************************************************************
2021-01-13 13:13:13,549 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_rules": [
        {
            "cidr_ip": "180.149.227.210/32", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "198.168.25.64/29", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access"
        }, 
        {
            "cidr_ip": "10.2.0.0/16", 
            "ports": [
                5432
            ], 
            "proto": "tcp", 
            "rule_desc": "allow postgres access within vpc"
        }
    ]
}
2021-01-13 13:13:13,576 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Create Security Groups] ********************************************************************************
2021-01-13 13:13:25,251 p=1379 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:13:25,285 p=1379 u=utewatia n=ansible | TASK [aws-vpc : Print Sg create Op] ************************************************************************************
2021-01-13 13:13:25,313 p=1379 u=utewatia n=ansible | ok: [aws] => {
    "sg_create_op": {
        "changed": false, 
        "description": "security group for postgres", 
        "failed": false, 
        "group_id": "sg-095b3f027dd78dcde", 
        "group_name": "postgres_access_sg", 
        "ip_permissions": [
            {
                "from_port": 5432, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.2.0.0/16", 
                        "description": "allow postgres access within vpc"
                    }, 
                    {
                        "cidr_ip": "198.168.25.64/29", 
                        "description": "allow postgres access"
                    }, 
                    {
                        "cidr_ip": "180.149.227.210/32", 
                        "description": "allow postgres access"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 5432, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "166032887324", 
        "tags": {
            "Name": "postgres_access_sg", 
            "source": "ansible"
        }, 
        "vpc_id": "vpc-0900f0b1a57906750"
    }
}
2021-01-13 13:13:25,318 p=1379 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 13:13:25,318 p=1379 u=utewatia n=ansible | aws                        : ok=50   changed=1    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2021-01-13 13:13:33,688 p=2310 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 13:13:33,936 p=2310 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 13:13:33,955 p=2310 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 13:13:42,891 p=2310 u=utewatia n=ansible | fatal: [aws]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: Could not resolve hostname aws: No address associated with hostname", "unreachable": true}
2021-01-13 13:13:42,893 p=2310 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 13:13:42,893 p=2310 u=utewatia n=ansible | aws                        : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 13:15:58,702 p=2584 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 13:15:58,936 p=2584 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 13:15:58,954 p=2584 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 13:16:09,181 p=2584 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 13:16:09,182 p=2584 u=utewatia n=ansible | ok: [aws]
2021-01-13 13:16:09,210 p=2584 u=utewatia n=ansible | TASK [Asserting a compatible Ansible Version] **************************************************************************
2021-01-13 13:16:09,250 p=2584 u=utewatia n=ansible | fatal: [aws]: FAILED! => {
    "assertion": false, 
    "changed": false, 
    "evaluated_to": false, 
    "msg": "This playbook is not compatible with Ansible 2.9.16"
}
2021-01-13 13:16:09,253 p=2584 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 13:16:09,253 p=2584 u=utewatia n=ansible | aws                        : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:39:47,691 p=7451 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:39:47,825 p=7451 u=utewatia n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: No JSON object could be decoded

Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/utewatia/ansible_practice/_aws_vpc_info.yml': line 4, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - name: Ansible Compatible Version
    assert:
    ^ here

2021-01-13 14:40:36,257 p=7547 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:40:36,413 p=7547 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:40:36,427 p=7547 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:40:39,889 p=7547 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:40:39,889 p=7547 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:40:39,910 p=7547 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:40:39,943 p=7547 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Invalid options for assert: mssg"}
2021-01-13 14:40:39,944 p=7547 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:40:39,944 p=7547 u=utewatia n=ansible | aws                        : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:40:50,939 p=7686 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:40:51,059 p=7686 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:40:51,069 p=7686 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:40:54,437 p=7686 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:40:54,437 p=7686 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:40:54,453 p=7686 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:40:54,475 p=7686 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:40:54,491 p=7686 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:40:54,535 p=7686 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "Could not find or access '/home/utewatia/ansible_practice/roles/aws-vpc/_vpc_info.yml' on the Ansible Controller."}
2021-01-13 14:40:54,536 p=7686 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:40:54,537 p=7686 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:41:39,560 p=7891 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:41:39,684 p=7891 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:41:39,694 p=7891 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:41:42,782 p=7891 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:41:42,782 p=7891 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:41:42,804 p=7891 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:41:42,829 p=7891 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:41:42,848 p=7891 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:41:42,942 p=7891 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:41:42,958 p=7891 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:41:42,981 p=7891 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:41:43,000 p=7891 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 14:41:43,372 p=7891 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (ec2_vpc_net_info) module: filter Supported parameters include: aws_access_key, aws_secret_key, debug_botocore_endpoint_logs, ec2_url, filters, profile, region, security_token, validate_certs, vpc_ids"}
2021-01-13 14:41:43,373 p=7891 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:41:43,374 p=7891 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:42:18,887 p=8112 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:42:19,024 p=8112 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:42:19,035 p=8112 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:42:22,217 p=8112 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:42:22,218 p=8112 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:42:22,233 p=8112 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:42:22,258 p=8112 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:42:22,274 p=8112 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:42:22,367 p=8112 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:42:22,390 p=8112 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:42:22,416 p=8112 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:42:22,432 p=8112 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 14:42:29,014 p=8112 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:42:29,029 p=8112 u=utewatia n=ansible | TASK [Print VPC info] **************************************************************************************************
2021-01-13 14:42:29,051 p=8112 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": []
    }
}
2021-01-13 14:42:29,054 p=8112 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:42:29,054 p=8112 u=utewatia n=ansible | aws                        : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 14:44:21,500 p=8466 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:44:21,623 p=8466 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:44:21,634 p=8466 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:44:24,747 p=8466 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:44:24,748 p=8466 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:44:24,764 p=8466 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:44:24,786 p=8466 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:44:24,804 p=8466 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:44:24,895 p=8466 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:44:24,910 p=8466 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:44:24,944 p=8466 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'vpc_name' is undefined\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 2, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n---\n- set_fact:\n  ^ here\n"}
2021-01-13 14:44:24,946 p=8466 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:44:24,946 p=8466 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:47:15,218 p=8870 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:47:15,343 p=8870 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:47:15,353 p=8870 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:47:18,447 p=8870 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:47:18,448 p=8870 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:47:18,465 p=8870 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:47:18,490 p=8870 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:47:18,510 p=8870 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:47:18,587 p=8870 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:47:18,603 p=8870 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:47:18,635 p=8870 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'vpc_name' is undefined\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 2, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n---\n- set_fact:\n  ^ here\n"}
2021-01-13 14:47:18,636 p=8870 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:47:18,636 p=8870 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 14:48:23,515 p=9103 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:48:23,638 p=9103 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:48:23,648 p=9103 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:48:28,193 p=9103 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:48:28,193 p=9103 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:48:28,209 p=9103 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:48:28,231 p=9103 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:48:28,246 p=9103 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:48:28,323 p=9103 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:48:28,340 p=9103 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:48:28,364 p=9103 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:48:28,380 p=9103 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:48:28,412 p=9103 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:48:28,427 p=9103 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 14:48:34,998 p=9103 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:48:35,001 p=9103 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:48:35,001 p=9103 u=utewatia n=ansible | aws                        : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 14:49:25,969 p=9358 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 14:49:26,094 p=9358 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 14:49:26,105 p=9358 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 14:49:29,321 p=9358 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 14:49:29,321 p=9358 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:49:29,342 p=9358 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 14:49:29,365 p=9358 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 14:49:29,383 p=9358 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 14:49:29,485 p=9358 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 14:49:29,508 p=9358 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:49:29,532 p=9358 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:49:29,551 p=9358 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 14:49:29,588 p=9358 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:49:29,608 p=9358 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 14:49:36,046 p=9358 u=utewatia n=ansible | ok: [aws]
2021-01-13 14:49:36,061 p=9358 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 14:49:36,082 p=9358 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 14:49:36,084 p=9358 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 14:49:36,084 p=9358 u=utewatia n=ansible | aws                        : ok=7    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:21:02,742 p=12366 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:21:02,888 p=12366 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:21:02,901 p=12366 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:21:06,501 p=12366 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:21:06,501 p=12366 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:21:06,520 p=12366 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:21:06,545 p=12366 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:21:06,565 p=12366 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:21:06,644 p=12366 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "conflicting action statements: region, ec2_vpc_subnet_info\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 25, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: VPC Subnet Info\n  ^ here\n"}
2021-01-13 15:21:06,645 p=12366 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:21:06,645 p=12366 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:22:46,352 p=12659 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:22:46,474 p=12659 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:22:46,484 p=12659 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:22:49,572 p=12659 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:22:49,573 p=12659 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:22:49,592 p=12659 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:22:49,618 p=12659 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:22:49,635 p=12659 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:22:49,765 p=12659 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "couldn't resolve module/action 'set_facts'. This often indicates a misspelling, missing collection, or incorrect module path.\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 37, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- set_facts:\n  ^ here\n"}
2021-01-13 15:22:49,768 p=12659 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:22:49,768 p=12659 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:23:21,139 p=12831 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:23:21,277 p=12831 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:23:21,289 p=12831 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:23:24,495 p=12831 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:23:24,495 p=12831 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:23:24,511 p=12831 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:23:24,533 p=12831 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:23:24,550 p=12831 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:23:24,628 p=12831 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:23:24,644 p=12831 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:23:24,666 p=12831 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:23:24,682 p=12831 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:23:24,721 p=12831 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:23:24,738 p=12831 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:23:31,136 p=12831 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:23:31,153 p=12831 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:23:31,174 p=12831 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:23:31,189 p=12831 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:23:31,210 p=12831 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'vpc'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 20, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- set_fact:\n  ^ here\n"}
2021-01-13 15:23:31,211 p=12831 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:23:31,211 p=12831 u=utewatia n=ansible | aws                        : ok=7    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:24:13,135 p=13075 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:24:13,270 p=13075 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:24:13,283 p=13075 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:24:16,429 p=13075 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:24:16,429 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:16,444 p=13075 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:24:16,467 p=13075 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:24:16,487 p=13075 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:24:16,567 p=13075 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:24:16,583 p=13075 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:24:16,605 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:16,621 p=13075 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:24:16,660 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:16,678 p=13075 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:24:20,606 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:20,621 p=13075 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:24:20,644 p=13075 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:24:20,658 p=13075 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:24:20,681 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:20,696 p=13075 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:24:22,455 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:22,470 p=13075 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:24:22,496 p=13075 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:24:22,512 p=13075 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:24:22,534 p=13075 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:24:22,536 p=13075 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:24:22,536 p=13075 u=utewatia n=ansible | aws                        : ok=11   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:27:59,689 p=13608 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:27:59,811 p=13608 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:27:59,821 p=13608 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:28:03,126 p=13608 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:28:03,126 p=13608 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:03,150 p=13608 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:28:03,177 p=13608 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:28:03,193 p=13608 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:28:03,270 p=13608 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "conflicting action statements: internal_subnets, set_fact\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 40, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- set_fact:\n  ^ here\n"}
2021-01-13 15:28:03,271 p=13608 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:28:03,272 p=13608 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:28:44,504 p=13795 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:28:44,634 p=13795 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:28:44,645 p=13795 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:28:47,755 p=13795 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:28:47,755 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:47,774 p=13795 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:28:47,798 p=13795 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:28:47,814 p=13795 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:28:47,912 p=13795 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:28:47,932 p=13795 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:28:47,957 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:47,973 p=13795 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:28:48,007 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:48,022 p=13795 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:28:54,667 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:54,682 p=13795 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:28:54,703 p=13795 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:28:54,717 p=13795 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:28:54,743 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:54,759 p=13795 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:28:58,398 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:58,413 p=13795 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:28:58,441 p=13795 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:28:58,458 p=13795 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:28:58,478 p=13795 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:28:58,493 p=13795 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:28:58,514 p=13795 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'subnet' is undefined\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml': line 40, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- set_fact:\n  ^ here\n"}
2021-01-13 15:28:58,515 p=13795 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:28:58,515 p=13795 u=utewatia n=ansible | aws                        : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:30:47,382 p=14171 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:30:47,519 p=14171 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:30:47,530 p=14171 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:30:50,694 p=14171 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:30:50,694 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:30:50,710 p=14171 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:30:50,732 p=14171 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:30:50,751 p=14171 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:30:50,852 p=14171 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:30:50,873 p=14171 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:30:50,896 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:30:50,915 p=14171 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:30:50,949 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:30:50,966 p=14171 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:30:57,052 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:30:57,067 p=14171 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:30:57,089 p=14171 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:30:57,104 p=14171 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:30:57,131 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:30:57,147 p=14171 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:31:02,182 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:31:02,197 p=14171 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:31:02,224 p=14171 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:31:02,241 p=14171 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:31:02,263 p=14171 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:31:02,278 p=14171 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:31:02,308 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:31:02,313 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:31:02,319 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:31:02,325 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:31:02,332 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:31:02,339 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:31:02,347 p=14171 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:31:02,369 p=14171 u=utewatia n=ansible | TASK [Print Subnets] ***************************************************************************************************
2021-01-13 15:31:02,396 p=14171 u=utewatia n=ansible | ok: [aws] => {
    "internal_subnets": {
        "my_test_vpc_1a_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.2.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b2fb03d582b02b30", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
            "subnet_id": "subnet-0b2fb03d582b02b30", 
            "tags": {
                "Name": "my_test_vpc_1a_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1a_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 250, 
            "cidr_block": "10.2.0.0/24", 
            "default_for_az": false, 
            "id": "subnet-0830e0e4b165518d1", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
            "subnet_id": "subnet-0830e0e4b165518d1", 
            "tags": {
                "Name": "my_test_vpc_1a_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.3.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b16f2c25ce03bfdb", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
            "subnet_id": "subnet-0b16f2c25ce03bfdb", 
            "tags": {
                "Name": "my_test_vpc_1b_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.1.0/24", 
            "default_for_az": false, 
            "id": "subnet-026d54abaffe52f41", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
            "subnet_id": "subnet-026d54abaffe52f41", 
            "tags": {
                "Name": "my_test_vpc_1b_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.4.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f90e193abd6bfe06", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
            "subnet_id": "subnet-0f90e193abd6bfe06", 
            "tags": {
                "Name": "my_test_vpc_1c_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private2": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.5.0/24", 
            "default_for_az": false, 
            "id": "subnet-083623b0faa2897a4", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
            "subnet_id": "subnet-083623b0faa2897a4", 
            "tags": {
                "Name": "my_test_vpc_1c_private2", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private3": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.6.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f08e788427c12c35", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
            "subnet_id": "subnet-0f08e788427c12c35", 
            "tags": {
                "Name": "my_test_vpc_1c_private3", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:31:02,397 p=14171 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:31:02,398 p=14171 u=utewatia n=ansible | aws                        : ok=13   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:35:18,693 p=14813 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:35:18,811 p=14813 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:35:18,821 p=14813 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:35:22,052 p=14813 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:35:22,052 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:22,073 p=14813 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:35:22,097 p=14813 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:35:22,112 p=14813 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:35:22,208 p=14813 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:35:22,228 p=14813 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:35:22,249 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:22,267 p=14813 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:35:22,303 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:22,322 p=14813 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:35:28,831 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:28,846 p=14813 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:35:28,869 p=14813 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:35:28,886 p=14813 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:35:28,909 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:28,925 p=14813 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:35:30,542 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:30,557 p=14813 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:35:30,583 p=14813 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:35:30,599 p=14813 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:35:30,620 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:30,634 p=14813 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:35:30,665 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:35:30,672 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:35:30,681 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:35:30,686 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:35:30,693 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:35:30,701 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:35:30,709 p=14813 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:35:30,729 p=14813 u=utewatia n=ansible | TASK [Print Subnets] ***************************************************************************************************
2021-01-13 15:35:30,758 p=14813 u=utewatia n=ansible | ok: [aws] => {
    "internal_subnets": {
        "my_test_vpc_1a_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.2.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b2fb03d582b02b30", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
            "subnet_id": "subnet-0b2fb03d582b02b30", 
            "tags": {
                "Name": "my_test_vpc_1a_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1a_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 250, 
            "cidr_block": "10.2.0.0/24", 
            "default_for_az": false, 
            "id": "subnet-0830e0e4b165518d1", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
            "subnet_id": "subnet-0830e0e4b165518d1", 
            "tags": {
                "Name": "my_test_vpc_1a_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.3.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b16f2c25ce03bfdb", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
            "subnet_id": "subnet-0b16f2c25ce03bfdb", 
            "tags": {
                "Name": "my_test_vpc_1b_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.1.0/24", 
            "default_for_az": false, 
            "id": "subnet-026d54abaffe52f41", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
            "subnet_id": "subnet-026d54abaffe52f41", 
            "tags": {
                "Name": "my_test_vpc_1b_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.4.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f90e193abd6bfe06", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
            "subnet_id": "subnet-0f90e193abd6bfe06", 
            "tags": {
                "Name": "my_test_vpc_1c_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private2": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.5.0/24", 
            "default_for_az": false, 
            "id": "subnet-083623b0faa2897a4", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
            "subnet_id": "subnet-083623b0faa2897a4", 
            "tags": {
                "Name": "my_test_vpc_1c_private2", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private3": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.6.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f08e788427c12c35", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
            "subnet_id": "subnet-0f08e788427c12c35", 
            "tags": {
                "Name": "my_test_vpc_1c_private3", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:35:30,774 p=14813 u=utewatia n=ansible | TASK [Security Group Info] *********************************************************************************************
2021-01-13 15:35:33,599 p=14813 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:35:33,614 p=14813 u=utewatia n=ansible | TASK [Print SG info] ***************************************************************************************************
2021-01-13 15:35:33,641 p=14813 u=utewatia n=ansible | ok: [aws] => {
    "vpc_sg_info_list": {
        "changed": false, 
        "failed": false, 
        "security_groups": [
            {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:35:33,643 p=14813 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:35:33,644 p=14813 u=utewatia n=ansible | aws                        : ok=15   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:45:06,975 p=15929 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:45:07,096 p=15929 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:45:07,106 p=15929 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:45:11,481 p=15929 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:45:11,481 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:11,500 p=15929 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:45:11,526 p=15929 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:45:11,546 p=15929 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:45:11,631 p=15929 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:45:11,653 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:11,675 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:11,695 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:11,732 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:11,750 p=15929 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:45:18,226 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:18,242 p=15929 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:45:18,269 p=15929 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:45:18,286 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:18,310 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:18,325 p=15929 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:45:21,991 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:22,006 p=15929 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:45:22,031 p=15929 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:45:22,049 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:22,075 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:22,092 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:22,123 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:45:22,128 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:45:22,135 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:45:22,141 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:45:22,149 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:45:22,156 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:45:22,166 p=15929 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:45:22,187 p=15929 u=utewatia n=ansible | TASK [Print Subnets] ***************************************************************************************************
2021-01-13 15:45:22,214 p=15929 u=utewatia n=ansible | ok: [aws] => {
    "internal_subnets": {
        "my_test_vpc_1a_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.2.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b2fb03d582b02b30", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
            "subnet_id": "subnet-0b2fb03d582b02b30", 
            "tags": {
                "Name": "my_test_vpc_1a_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1a_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 250, 
            "cidr_block": "10.2.0.0/24", 
            "default_for_az": false, 
            "id": "subnet-0830e0e4b165518d1", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
            "subnet_id": "subnet-0830e0e4b165518d1", 
            "tags": {
                "Name": "my_test_vpc_1a_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.3.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b16f2c25ce03bfdb", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
            "subnet_id": "subnet-0b16f2c25ce03bfdb", 
            "tags": {
                "Name": "my_test_vpc_1b_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.1.0/24", 
            "default_for_az": false, 
            "id": "subnet-026d54abaffe52f41", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
            "subnet_id": "subnet-026d54abaffe52f41", 
            "tags": {
                "Name": "my_test_vpc_1b_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.4.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f90e193abd6bfe06", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
            "subnet_id": "subnet-0f90e193abd6bfe06", 
            "tags": {
                "Name": "my_test_vpc_1c_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private2": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.5.0/24", 
            "default_for_az": false, 
            "id": "subnet-083623b0faa2897a4", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
            "subnet_id": "subnet-083623b0faa2897a4", 
            "tags": {
                "Name": "my_test_vpc_1c_private2", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private3": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.6.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f08e788427c12c35", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
            "subnet_id": "subnet-0f08e788427c12c35", 
            "tags": {
                "Name": "my_test_vpc_1c_private3", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:45:22,231 p=15929 u=utewatia n=ansible | TASK [Security Group Info] *********************************************************************************************
2021-01-13 15:45:23,860 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:23,877 p=15929 u=utewatia n=ansible | TASK [Print SG info] ***************************************************************************************************
2021-01-13 15:45:23,902 p=15929 u=utewatia n=ansible | ok: [aws] => {
    "vpc_sg_info_list": {
        "changed": false, 
        "failed": false, 
        "security_groups": [
            {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:45:23,919 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:23,940 p=15929 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:45:23,956 p=15929 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:45:23,995 p=15929 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token ',', got ':'. String: {{ internal_security_groups | combine(sg.group_name:sg) }}"}
2021-01-13 15:45:23,997 p=15929 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:45:23,997 p=15929 u=utewatia n=ansible | aws                        : ok=16   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-13 15:47:13,326 p=16372 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:47:13,449 p=16372 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:47:13,459 p=16372 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:47:16,764 p=16372 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:47:16,764 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:16,787 p=16372 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:47:16,811 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:47:16,827 p=16372 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:47:16,904 p=16372 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:47:16,919 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:16,942 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:16,960 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:16,994 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:17,008 p=16372 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:47:22,798 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:22,814 p=16372 u=utewatia n=ansible | TASK [Print Vpc Info] **************************************************************************************************
2021-01-13 15:47:22,835 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info_op": {
        "changed": false, 
        "failed": false, 
        "vpcs": [
            {
                "cidr_block": "10.2.0.0/16", 
                "cidr_block_association_set": [
                    {
                        "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                        "cidr_block": "10.2.0.0/16", 
                        "cidr_block_state": {
                            "state": "associated"
                        }
                    }
                ], 
                "classic_link_dns_supported": false, 
                "classic_link_enabled": false, 
                "dhcp_options_id": "dopt-56009e2c", 
                "enable_dns_hostnames": true, 
                "enable_dns_support": true, 
                "id": "vpc-0900f0b1a57906750", 
                "instance_tenancy": "default", 
                "is_default": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "tags": {
                    "Name": "my_test_vpc", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:47:22,850 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:22,872 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:22,887 p=16372 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:47:24,459 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:24,475 p=16372 u=utewatia n=ansible | TASK [Print Subnet Info] ***********************************************************************************************
2021-01-13 15:47:24,500 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "vpc_subnet_info_list": {
        "changed": false, 
        "failed": false, 
        "subnets": [
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:47:24,516 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:24,538 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:24,554 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:24,583 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:47:24,590 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:47:24,595 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:47:24,602 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:47:24,610 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:47:24,617 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:47:24,625 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:47:24,644 p=16372 u=utewatia n=ansible | TASK [Print Subnets] ***************************************************************************************************
2021-01-13 15:47:24,672 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "internal_subnets": {
        "my_test_vpc_1a_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.2.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b2fb03d582b02b30", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
            "subnet_id": "subnet-0b2fb03d582b02b30", 
            "tags": {
                "Name": "my_test_vpc_1a_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1a_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1a", 
            "availability_zone_id": "use1-az2", 
            "available_ip_address_count": 250, 
            "cidr_block": "10.2.0.0/24", 
            "default_for_az": false, 
            "id": "subnet-0830e0e4b165518d1", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
            "subnet_id": "subnet-0830e0e4b165518d1", 
            "tags": {
                "Name": "my_test_vpc_1a_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.3.0/24", 
            "default_for_az": false, 
            "id": "subnet-0b16f2c25ce03bfdb", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
            "subnet_id": "subnet-0b16f2c25ce03bfdb", 
            "tags": {
                "Name": "my_test_vpc_1b_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1b_public": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1b", 
            "availability_zone_id": "use1-az4", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.1.0/24", 
            "default_for_az": false, 
            "id": "subnet-026d54abaffe52f41", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": true, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
            "subnet_id": "subnet-026d54abaffe52f41", 
            "tags": {
                "Name": "my_test_vpc_1b_public", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.4.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f90e193abd6bfe06", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
            "subnet_id": "subnet-0f90e193abd6bfe06", 
            "tags": {
                "Name": "my_test_vpc_1c_private", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private2": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.5.0/24", 
            "default_for_az": false, 
            "id": "subnet-083623b0faa2897a4", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
            "subnet_id": "subnet-083623b0faa2897a4", 
            "tags": {
                "Name": "my_test_vpc_1c_private2", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "my_test_vpc_1c_private3": {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "us-east-1c", 
            "availability_zone_id": "use1-az6", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.2.6.0/24", 
            "default_for_az": false, 
            "id": "subnet-0f08e788427c12c35", 
            "ipv6_cidr_block_association_set": [], 
            "map_customer_owned_ip_on_launch": false, 
            "map_public_ip_on_launch": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
            "subnet_id": "subnet-0f08e788427c12c35", 
            "tags": {
                "Name": "my_test_vpc_1c_private3", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:47:24,688 p=16372 u=utewatia n=ansible | TASK [Security Group Info] *********************************************************************************************
2021-01-13 15:47:27,954 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:27,970 p=16372 u=utewatia n=ansible | TASK [Print SG info] ***************************************************************************************************
2021-01-13 15:47:27,996 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "vpc_sg_info_list": {
        "changed": false, 
        "failed": false, 
        "security_groups": [
            {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ]
    }
}
2021-01-13 15:47:28,013 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:28,035 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:28,050 p=16372 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:47:28,079 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:47:28,087 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:47:28,096 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:47:28,103 p=16372 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:47:28,121 p=16372 u=utewatia n=ansible | TASK [Print Security Groups] *******************************************************************************************
2021-01-13 15:47:28,149 p=16372 u=utewatia n=ansible | ok: [aws] => {
    "internal_security_groups": {
        "default": {
            "description": "default VPC security group", 
            "group_id": "sg-0b6b0e39c02ada443", 
            "group_name": "default", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": [
                        {
                            "group_id": "sg-0b6b0e39c02ada443", 
                            "user_id": "166032887324"
                        }
                    ]
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "166032887324", 
            "tags": {}, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "postgres_access_sg": {
            "description": "security group for postgres", 
            "group_id": "sg-095b3f027dd78dcde", 
            "group_name": "postgres_access_sg", 
            "ip_permissions": [
                {
                    "from_port": 5432, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.2.0.0/16", 
                            "description": "allow postgres access within vpc"
                        }, 
                        {
                            "cidr_ip": "198.168.25.64/29", 
                            "description": "allow postgres access"
                        }, 
                        {
                            "cidr_ip": "180.149.227.210/32", 
                            "description": "allow postgres access"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 5432, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "166032887324", 
            "tags": {
                "Name": "postgres_access_sg", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "security_group_ssh": {
            "description": "security group for ssh", 
            "group_id": "sg-039a33058872d9286", 
            "group_name": "security_group_ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.2.0.0/16", 
                            "description": "allow vpc on port 22"
                        }, 
                        {
                            "cidr_ip": "180.149.227.210/32", 
                            "description": "allow ssh"
                        }, 
                        {
                            "cidr_ip": "198.168.25.64/29", 
                            "description": "allow ssh"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "166032887324", 
            "tags": {
                "Name": "security_group_ssh", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }, 
        "security_group_web_app": {
            "description": "security group for ssh access", 
            "group_id": "sg-0474c27cf8d80bf20", 
            "group_name": "security_group_web_app", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.2.0.0/16", 
                            "description": "allow vpc on port 443 and 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "180.149.227.210/32", 
                            "description": "allow all on port 443"
                        }, 
                        {
                            "cidr_ip": "198.168.25.64/29", 
                            "description": "allow all on port 443"
                        }, 
                        {
                            "cidr_ip": "10.2.0.0/16", 
                            "description": "allow vpc on port 443 and 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "166032887324", 
            "tags": {
                "Name": "security_group_web_app", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:47:28,165 p=16372 u=utewatia n=ansible | TASK [VPC INFO] ********************************************************************************************************
2021-01-13 15:47:28,177 p=16372 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:47:28,179 p=16372 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:47:28,179 p=16372 u=utewatia n=ansible | aws                        : ok=19   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:51:10,824 p=16987 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:51:10,962 p=16987 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:51:10,971 p=16987 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:51:14,535 p=16987 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:51:14,535 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:14,561 p=16987 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:51:14,590 p=16987 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:51:14,608 p=16987 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:51:14,699 p=16987 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:51:14,724 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:14,810 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:14,888 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:15,069 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:15,153 p=16987 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:51:23,654 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:23,669 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:23,690 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:23,705 p=16987 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:51:26,465 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:26,480 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:26,500 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:26,516 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:26,545 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:51:26,551 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:51:26,560 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:51:26,566 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:51:26,573 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:51:26,581 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:51:26,590 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:51:26,609 p=16987 u=utewatia n=ansible | TASK [Security Group Info] *********************************************************************************************
2021-01-13 15:51:28,231 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:28,247 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:28,273 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:28,288 p=16987 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:51:28,318 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:51:28,325 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:51:28,333 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:51:28,345 p=16987 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:51:28,365 p=16987 u=utewatia n=ansible | TASK [Complete VPC INFO] ***********************************************************************************************
2021-01-13 15:51:28,377 p=16987 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:51:28,394 p=16987 u=utewatia n=ansible | TASK [Print VPC INFO] **************************************************************************************************
2021-01-13 15:51:28,418 p=16987 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": "internal_security_groups", 
        "subnet": "internal_subnets", 
        "vpc": "internal_vpc"
    }
}
2021-01-13 15:51:28,420 p=16987 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:51:28,420 p=16987 u=utewatia n=ansible | aws                        : ok=15   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-13 15:52:26,737 p=17351 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-13 15:52:26,861 p=17351 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-13 15:52:26,872 p=17351 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-13 15:52:30,371 p=17351 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-13 15:52:30,371 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:30,393 p=17351 u=utewatia n=ansible | TASK [Ansible Compatible Version] **************************************************************************************
2021-01-13 15:52:30,420 p=17351 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-13 15:52:30,437 p=17351 u=utewatia n=ansible | TASK [Get VPC Info] ****************************************************************************************************
2021-01-13 15:52:30,524 p=17351 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-13 15:52:30,542 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:30,567 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:30,587 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:30,631 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:30,652 p=17351 u=utewatia n=ansible | TASK [VPC Info] ********************************************************************************************************
2021-01-13 15:52:37,561 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:37,576 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:37,598 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:37,614 p=17351 u=utewatia n=ansible | TASK [VPC Subnet Info] *************************************************************************************************
2021-01-13 15:52:40,301 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:40,316 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:40,336 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:40,352 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:40,384 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-13 15:52:40,389 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:52:40,396 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-13 15:52:40,402 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:52:40,408 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:52:40,417 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:52:40,425 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-13 15:52:40,443 p=17351 u=utewatia n=ansible | TASK [Security Group Info] *********************************************************************************************
2021-01-13 15:52:41,998 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:42,013 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:42,035 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:42,050 p=17351 u=utewatia n=ansible | TASK [set_fact] ********************************************************************************************************
2021-01-13 15:52:42,082 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:52:42,088 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:52:42,097 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:52:42,104 p=17351 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-13 15:52:42,123 p=17351 u=utewatia n=ansible | TASK [Complete VPC INFO] ***********************************************************************************************
2021-01-13 15:52:42,156 p=17351 u=utewatia n=ansible | ok: [aws]
2021-01-13 15:52:42,173 p=17351 u=utewatia n=ansible | TASK [Print VPC INFO] **************************************************************************************************
2021-01-13 15:52:42,208 p=17351 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-13 15:52:42,210 p=17351 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-13 15:52:42,210 p=17351 u=utewatia n=ansible | aws                        : ok=15   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-14 23:15:03,022 p=7601 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:15:03,641 p=7601 u=utewatia n=ansible | ERROR! no module/action detected in task.

The error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/main.yml': line 1, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name:
  ^ here

2021-01-14 23:16:12,095 p=7722 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:16:12,385 p=7722 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:16:12,424 p=7722 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:16:23,524 p=7722 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:16:23,524 p=7722 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:16:23,553 p=7722 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:16:23,616 p=7722 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:16:23,648 p=7722 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:16:23,730 p=7722 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "conflicting action statements: var, include_tasks\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml': line 7, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 instance'\n  ^ here\n"}
2021-01-14 23:16:23,732 p=7722 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:16:23,733 p=7722 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-14 23:17:02,149 p=7924 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:17:02,410 p=7924 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:17:02,427 p=7924 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:17:12,605 p=7924 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:17:12,605 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:12,632 p=7924 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:17:12,667 p=7924 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:17:12,694 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:17:12,762 p=7924 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:17:12,787 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:17:12,926 p=7924 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:17:12,966 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:13,024 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:13,053 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:17:20,940 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:20,966 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:20,989 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:21,016 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:17:24,777 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:24,803 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:24,825 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:24,850 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:24,888 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:17:24,896 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:17:24,907 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:17:24,919 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:17:24,932 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:17:24,945 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:17:24,960 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:17:24,994 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:17:30,365 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:30,392 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:30,416 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:30,443 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:30,481 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:17:30,493 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:17:30,509 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:17:30,524 p=7924 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:17:30,559 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:17:30,602 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:30,632 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:17:30,676 p=7924 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:17:30,706 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:17:30,727 p=8175 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:17:30,772 p=7924 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:17:30,807 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:30,830 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:30,858 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:30,881 p=7924 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:17:30,908 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:17:30,938 p=7924 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:17:30,966 p=7924 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:17:31,009 p=7924 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 15, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Machine\n  ^ here\n"}
2021-01-14 23:17:31,011 p=7924 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:17:31,012 p=7924 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:20:23,098 p=8474 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:20:23,335 p=8474 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:20:23,353 p=8474 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:20:33,577 p=8474 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:20:33,577 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:33,612 p=8474 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:20:33,649 p=8474 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:20:33,675 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:20:33,740 p=8474 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:20:33,766 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:20:33,912 p=8474 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:20:33,940 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:33,986 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:34,014 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:20:41,728 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:41,755 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:41,780 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:41,831 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:20:45,165 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:45,191 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:45,212 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:45,240 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:45,276 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:20:45,285 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:20:45,296 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:20:45,308 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:20:45,320 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:20:45,336 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:20:45,349 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:20:45,382 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:20:47,597 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:47,627 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:47,652 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:47,682 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:47,721 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:20:47,732 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:20:47,745 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:20:47,760 p=8474 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:20:47,793 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:20:47,833 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:47,860 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:20:47,902 p=8474 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:20:47,930 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:20:47,949 p=8722 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:20:47,992 p=8474 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:20:48,026 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:48,050 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:48,083 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:48,109 p=8474 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:20:48,139 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:20:48,168 p=8474 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:20:48,197 p=8474 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:20:48,282 p=8474 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 14, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Machine\n  ^ here\n"}
2021-01-14 23:20:48,284 p=8474 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:20:48,284 p=8474 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:33:19,629 p=9914 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:33:19,867 p=9914 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:33:19,888 p=9914 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:33:30,429 p=9914 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:33:30,429 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:30,457 p=9914 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:33:30,497 p=9914 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:33:30,530 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:33:30,619 p=9914 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:33:30,648 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:33:30,800 p=9914 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:33:30,829 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:30,874 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:30,901 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:33:38,235 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:38,266 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:38,300 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:38,325 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:33:42,242 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:42,276 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:42,304 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:42,333 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:42,372 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:33:42,382 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:33:42,392 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:33:42,405 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:33:42,417 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:33:42,430 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:33:42,444 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:33:42,476 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:33:44,547 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:44,574 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:44,598 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:44,625 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:44,666 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:33:44,679 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:33:44,693 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:33:44,706 p=9914 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:33:44,738 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:33:44,781 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:44,808 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:33:44,850 p=9914 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:33:44,876 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:33:44,895 p=10170 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:33:44,938 p=9914 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:33:44,973 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:44,996 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:45,024 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:45,048 p=9914 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:33:45,074 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:33:45,104 p=9914 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:33:45,129 p=9914 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Instance] ***********************************************************************************
2021-01-14 23:33:45,179 p=9914 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 14, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Instance\n  ^ here\n"}
2021-01-14 23:33:45,181 p=9914 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:33:45,182 p=9914 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:36:00,457 p=10433 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:36:00,704 p=10433 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:36:00,722 p=10433 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:36:10,612 p=10433 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:36:10,613 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:10,651 p=10433 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:36:10,691 p=10433 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:36:10,717 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:36:10,783 p=10433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:36:10,808 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:36:10,961 p=10433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:36:10,989 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:11,039 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:11,065 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:36:17,985 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:18,011 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:18,035 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:18,061 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:36:20,285 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:20,321 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:20,344 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:20,371 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:20,408 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:36:20,416 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:36:20,428 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:36:20,439 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:36:20,453 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:36:20,466 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:36:20,480 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:36:20,515 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:36:24,854 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:24,881 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:24,903 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:24,932 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:24,975 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:36:24,986 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:36:25,001 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:36:25,017 p=10433 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:36:25,048 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:36:25,086 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:25,113 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:36:25,153 p=10433 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:36:25,180 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:36:25,199 p=10678 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:36:25,243 p=10433 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:36:25,279 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:25,302 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:25,328 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:25,351 p=10433 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:36:25,378 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:36:25,412 p=10433 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:36:25,439 p=10433 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:36:25,481 p=10433 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Machine\n  ^ here\n"}
2021-01-14 23:36:25,483 p=10433 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:36:25,484 p=10433 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:37:45,661 p=10835 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:37:45,886 p=10835 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:37:45,911 p=10835 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:37:55,104 p=10835 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:37:55,105 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:37:55,131 p=10835 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:37:55,169 p=10835 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:37:55,196 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:37:55,272 p=10835 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:37:55,303 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:37:55,462 p=10835 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:37:55,522 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:37:55,574 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:37:55,605 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:38:03,064 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:03,089 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:03,119 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:03,150 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:38:06,559 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:06,586 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:06,606 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:06,633 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:06,667 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:38:06,676 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:38:06,686 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:38:06,698 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:38:06,711 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:38:06,723 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:38:06,736 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:38:06,768 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:38:09,018 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:09,046 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:09,068 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:09,093 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:09,130 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:38:09,142 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:38:09,156 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:38:09,170 p=10835 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:38:09,203 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:38:09,241 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:09,270 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:38:09,310 p=10835 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:38:09,335 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:38:09,352 p=11112 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:38:09,393 p=10835 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:38:09,427 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:09,449 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:09,475 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:09,498 p=10835 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:38:09,528 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:38:09,561 p=10835 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:38:09,588 p=10835 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:38:09,625 p=10835 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Machine\n  ^ here\n"}
2021-01-14 23:38:09,627 p=10835 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:38:09,627 p=10835 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:41:17,550 p=11425 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:41:17,786 p=11425 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:41:17,809 p=11425 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:41:28,303 p=11425 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:41:28,303 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:28,331 p=11425 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:41:28,369 p=11425 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:41:28,399 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:41:28,471 p=11425 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:41:28,498 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:41:28,652 p=11425 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:41:28,685 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:28,739 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:28,768 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:41:35,817 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:35,844 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:35,870 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:35,897 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:41:39,141 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:39,169 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:39,192 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:39,218 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:39,260 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:41:39,274 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:41:39,286 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:41:39,299 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:41:39,314 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:41:39,329 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:41:39,345 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:41:39,379 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:41:41,497 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:41,524 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:41,554 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:41,586 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:41,623 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:41:41,635 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:41:41,649 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:41:41,662 p=11425 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:41:41,695 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:41:41,735 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:41,762 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:41:41,807 p=11425 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:41:41,834 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:41:41,852 p=11699 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:41:41,903 p=11425 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:41:41,936 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:41,960 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:41,986 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:42,014 p=11425 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:41:42,052 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:41:42,082 p=11425 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:41:42,109 p=11425 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:41:42,153 p=11425 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create Ec2 Machine\n  ^ here\n"}
2021-01-14 23:41:42,155 p=11425 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:41:42,155 p=11425 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:42:13,686 p=11785 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:42:13,898 p=11785 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:42:13,916 p=11785 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:42:24,158 p=11785 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:42:24,159 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:24,187 p=11785 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:42:24,227 p=11785 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:42:24,258 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:42:24,334 p=11785 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:42:24,360 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:42:24,501 p=11785 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:42:24,529 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:24,575 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:24,602 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:42:31,549 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:31,577 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:31,601 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:31,627 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:42:35,449 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:35,480 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:35,501 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:35,528 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:35,567 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:42:35,577 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:42:35,588 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:42:35,600 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:42:35,613 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:42:35,627 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:42:35,641 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:42:35,676 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:42:38,028 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:38,056 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:38,080 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:38,110 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:38,152 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:42:38,163 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:42:38,177 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:42:38,190 p=11785 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:42:38,221 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:42:38,263 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:38,289 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:42:38,330 p=11785 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:42:38,358 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:42:38,376 p=12049 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:42:38,419 p=11785 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:42:38,453 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:38,477 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:38,507 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:38,530 p=11785 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:42:38,557 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:42:38,593 p=11785 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:42:38,621 p=11785 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:42:38,681 p=11785 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: unexpected char u\"'\" at 45. String: {{ ec2_details.detailed_monitoring | default('no) }}"}
2021-01-14 23:42:38,684 p=11785 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:42:38,684 p=11785 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:43:24,478 p=12153 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:43:24,744 p=12153 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:43:24,768 p=12153 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:43:37,799 p=12153 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:43:37,800 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:37,858 p=12153 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:43:37,914 p=12153 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:43:37,961 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:43:38,074 p=12153 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:43:38,102 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:43:38,365 p=12153 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:43:38,412 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:38,480 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:38,548 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:43:45,447 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:45,482 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:45,507 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:45,550 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:43:48,112 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:48,192 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:48,246 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:48,321 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:48,418 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:43:48,447 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:43:48,492 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:43:48,551 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:43:48,590 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:43:48,611 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:43:48,638 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:43:48,699 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:43:53,291 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:53,353 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:53,427 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:53,509 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:53,656 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:43:53,716 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:43:53,742 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:43:53,760 p=12153 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:43:53,821 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:43:53,874 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:53,910 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:43:53,959 p=12153 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:43:53,989 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:43:54,010 p=12415 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:43:54,085 p=12153 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:43:54,143 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:54,180 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:54,224 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:54,266 p=12153 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:43:54,324 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:43:54,384 p=12153 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:43:54,434 p=12153 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:43:55,646 p=12153 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "argument volumes is of type <type 'dict'> and we were unable to convert to list: <type 'dict'> cannot be converted to a list"}
2021-01-14 23:43:55,653 p=12153 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:43:55,655 p=12153 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:45:16,693 p=12601 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:45:17,111 p=12601 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:45:17,143 p=12601 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:45:28,709 p=12601 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:45:28,710 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:28,739 p=12601 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:45:28,785 p=12601 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:45:28,827 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:45:28,936 p=12601 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:45:28,974 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:45:29,145 p=12601 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:45:29,172 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:29,216 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:29,246 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:45:37,647 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:37,690 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:37,731 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:37,774 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:45:41,764 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:41,820 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:41,850 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:41,891 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:41,953 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:45:41,969 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:45:41,987 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:45:42,006 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:45:42,028 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:45:42,049 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:45:42,074 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:45:42,131 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:45:44,579 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:44,639 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:44,685 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:44,712 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:44,752 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:45:44,764 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:45:44,779 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:45:44,794 p=12601 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:45:44,836 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:45:44,892 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:44,933 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:45:44,998 p=12601 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:45:45,042 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:45:45,071 p=12852 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:45:45,139 p=12601 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:45:45,188 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:45,215 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:45,252 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:45,281 p=12601 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:45:45,328 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:45:45,387 p=12601 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:45:45,443 p=12601 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:45:46,254 p=12601 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "argument volumes is of type <type 'dict'> and we were unable to convert to list: <type 'dict'> cannot be converted to a list"}
2021-01-14 23:45:46,258 p=12601 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:45:46,259 p=12601 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:47:01,979 p=13039 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:47:02,294 p=13039 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:47:02,326 p=13039 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:47:14,676 p=13039 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:47:14,677 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:14,720 p=13039 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:47:14,772 p=13039 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:47:14,816 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:47:14,906 p=13039 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:47:14,934 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:47:15,083 p=13039 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:47:15,111 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:15,157 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:15,200 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:47:22,316 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:22,344 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:22,371 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:22,400 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:47:26,950 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:26,981 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:27,009 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:27,055 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:27,134 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:47:27,158 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:47:27,182 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:47:27,206 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:47:27,235 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:47:27,265 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:47:27,298 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:47:27,373 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:47:33,938 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:33,983 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:34,019 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:34,059 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:34,104 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:47:34,119 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:47:34,136 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:47:34,154 p=13039 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:47:34,206 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:47:34,269 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:34,313 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:47:34,382 p=13039 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:47:34,428 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:47:34,460 p=13299 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:47:34,530 p=13039 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:47:34,585 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:34,620 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:34,665 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:34,702 p=13039 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:47:34,745 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:47:34,792 p=13039 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:47:34,835 p=13039 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:47:35,598 p=13039 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "argument volumes is of type <type 'dict'> and we were unable to convert to list: <type 'dict'> cannot be converted to a list"}
2021-01-14 23:47:35,602 p=13039 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:47:35,602 p=13039 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:48:48,459 p=13473 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:48:48,670 p=13473 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:48:48,687 p=13473 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:48:54,245 p=13473 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:48:54,245 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:48:54,271 p=13473 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:48:54,307 p=13473 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:48:54,335 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:48:54,403 p=13473 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:48:54,432 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:48:54,575 p=13473 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:48:54,604 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:48:54,648 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:48:54,676 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:49:01,939 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:01,970 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:01,994 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:02,021 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:49:03,936 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:03,962 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:03,982 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:04,008 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:04,042 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:49:04,051 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:49:04,061 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:49:04,074 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:49:04,087 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:49:04,100 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:49:04,116 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:49:04,159 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:49:07,998 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:08,025 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:08,048 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:08,075 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:08,112 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:49:08,123 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:49:08,137 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:49:08,149 p=13473 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:49:08,179 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:49:08,217 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:08,243 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:49:08,282 p=13473 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:49:08,308 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:49:08,326 p=13736 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:49:08,370 p=13473 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:49:08,402 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:08,424 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:08,450 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:08,472 p=13473 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:49:08,498 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:49:08,527 p=13473 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:49:08,553 p=13473 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:49:14,196 p=13473 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: Unknown parameter in BlockDeviceMappings[0]: "DeleteOnTermination", must be one of: DeviceName, VirtualName, Ebs, NoDevice
2021-01-14 23:49:14,197 p=13473 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"boto3_version": "1.16.49", "botocore_version": "1.19.49", "changed": false, "msg": "Failed to create new EC2 instance: Parameter validation failed:\nUnknown parameter in BlockDeviceMappings[0]: \"DeleteOnTermination\", must be one of: DeviceName, VirtualName, Ebs, NoDevice"}
2021-01-14 23:49:14,199 p=13473 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:49:14,199 p=13473 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:50:07,342 p=13886 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:50:07,552 p=13886 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:50:07,570 p=13886 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:50:13,966 p=13886 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:50:13,967 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:13,996 p=13886 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:50:14,038 p=13886 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:50:14,065 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:50:14,130 p=13886 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:50:14,155 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:50:14,291 p=13886 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:50:14,318 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:14,364 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:14,389 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:50:21,681 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:21,708 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:21,731 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:21,757 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:50:25,456 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:25,482 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:25,505 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:25,532 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:25,567 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:50:25,579 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:50:25,587 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:50:25,598 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:50:25,611 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:50:25,621 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:50:25,635 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:50:25,668 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:50:27,624 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:27,651 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:27,673 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:27,699 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:27,735 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:50:27,745 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:50:27,759 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:50:27,772 p=13886 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:50:27,803 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:50:27,841 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:27,867 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:50:27,907 p=13886 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:50:27,935 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:50:27,954 p=14125 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:50:27,997 p=13886 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:50:28,030 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:28,052 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:28,077 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:28,099 p=13886 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:50:28,125 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:50:28,153 p=13886 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:50:28,178 p=13886 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:50:34,740 p=13886 u=utewatia n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ClientError: An error occurred (InvalidAMIID.Malformed) when calling the RunInstances operation: Invalid id: "amzn2-ami-hvm-2.0.20200904.0-x86_64-gp2" (expecting "ami-...")
2021-01-14 23:50:34,741 p=13886 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"boto3_version": "1.16.49", "botocore_version": "1.19.49", "changed": false, "error": {"code": "InvalidAMIID.Malformed", "message": "Invalid id: \"amzn2-ami-hvm-2.0.20200904.0-x86_64-gp2\" (expecting \"ami-...\")"}, "msg": "Failed to create new EC2 instance: An error occurred (InvalidAMIID.Malformed) when calling the RunInstances operation: Invalid id: \"amzn2-ami-hvm-2.0.20200904.0-x86_64-gp2\" (expecting \"ami-...\")", "response_metadata": {"http_headers": {"cache-control": "no-cache, no-store", "connection": "close", "date": "Thu, 14 Jan 2021 18:20:33 GMT", "server": "AmazonEC2", "strict-transport-security": "max-age=31536000; includeSubDomains", "transfer-encoding": "chunked", "x-amzn-requestid": "786af068-65db-4c8a-ab3c-b4d8b651eea8"}, "http_status_code": 400, "request_id": "786af068-65db-4c8a-ab3c-b4d8b651eea8", "retry_attempts": 0}}
2021-01-14 23:50:34,744 p=13886 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:50:34,745 p=13886 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:51:11,454 p=14256 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:51:11,659 p=14256 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:51:11,676 p=14256 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:51:18,287 p=14256 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:51:18,288 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:18,313 p=14256 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:51:18,347 p=14256 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:51:18,382 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:51:18,447 p=14256 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:51:18,473 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:51:18,608 p=14256 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:51:18,635 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:18,678 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:18,708 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:51:25,529 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:25,555 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:25,579 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:25,606 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:51:29,297 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:29,325 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:29,349 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:29,377 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:29,414 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-14 23:51:29,423 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:51:29,438 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:51:29,451 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:51:29,466 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:51:29,485 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:51:29,502 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:51:29,535 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:51:35,310 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:35,339 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:35,362 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:35,389 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:35,427 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:51:35,440 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:51:35,453 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:51:35,467 p=14256 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:51:35,500 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:51:35,539 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:35,566 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:51:35,605 p=14256 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:51:35,632 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:51:35,650 p=14533 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:51:35,694 p=14256 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:51:35,730 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:35,753 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:35,780 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:35,804 p=14256 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:51:35,834 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:51:35,867 p=14256 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:51:35,894 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:55:43,170 p=14256 u=utewatia n=ansible | changed: [aws]
2021-01-14 23:55:43,200 p=14256 u=utewatia n=ansible | TASK [aws-ec2 : Print Create OP] ***************************************************************************************
2021-01-14 23:55:43,236 p=14256 u=utewatia n=ansible | ok: [aws] => {
    "ec2_instance_create_op": {
        "changed": true, 
        "failed": false, 
        "instance_ids": [
            "i-00ee02a3466b51825"
        ], 
        "instances": [
            {
                "ami_launch_index": 0, 
                "architecture": "x86_64", 
                "block_device_mappings": [
                    {
                        "device_name": "/dev/xvda", 
                        "ebs": {
                            "attach_time": "2021-01-14T18:21:42+00:00", 
                            "delete_on_termination": true, 
                            "status": "attached", 
                            "volume_id": "vol-0d6a1b6631c42fa54"
                        }
                    }
                ], 
                "capacity_reservation_specification": {
                    "capacity_reservation_preference": "open"
                }, 
                "client_token": "d8ce71ea164b4f9888f74aa6b1a28a30", 
                "cpu_options": {
                    "core_count": 1, 
                    "threads_per_core": 1
                }, 
                "ebs_optimized": false, 
                "ena_support": true, 
                "enclave_options": {
                    "enabled": false
                }, 
                "hibernation_options": {
                    "configured": false
                }, 
                "hypervisor": "xen", 
                "image_id": "ami-0c94855ba95c71c99", 
                "instance_id": "i-00ee02a3466b51825", 
                "instance_type": "t2.micro", 
                "launch_time": "2021-01-14T18:21:41+00:00", 
                "metadata_options": {
                    "http_endpoint": "enabled", 
                    "http_put_response_hop_limit": 1, 
                    "http_tokens": "optional", 
                    "state": "applied"
                }, 
                "monitoring": {
                    "state": "disabled"
                }, 
                "network_interfaces": [
                    {
                        "association": {
                            "ip_owner_id": "amazon", 
                            "public_dns_name": "ec2-54-174-98-229.compute-1.amazonaws.com", 
                            "public_ip": "54.174.98.229"
                        }, 
                        "attachment": {
                            "attach_time": "2021-01-14T18:21:41+00:00", 
                            "attachment_id": "eni-attach-024dcc6c15e295ead", 
                            "delete_on_termination": true, 
                            "device_index": 0, 
                            "network_card_index": 0, 
                            "status": "attached"
                        }, 
                        "description": "", 
                        "groups": [
                            {
                                "group_id": "sg-039a33058872d9286", 
                                "group_name": "security_group_ssh"
                            }
                        ], 
                        "interface_type": "interface", 
                        "ipv6_addresses": [], 
                        "mac_address": "12:5c:25:4d:7b:89", 
                        "network_interface_id": "eni-0bd278825074beab8", 
                        "owner_id": "166032887324", 
                        "private_dns_name": "ip-10-2-0-197.ec2.internal", 
                        "private_ip_address": "10.2.0.197", 
                        "private_ip_addresses": [
                            {
                                "association": {
                                    "ip_owner_id": "amazon", 
                                    "public_dns_name": "ec2-54-174-98-229.compute-1.amazonaws.com", 
                                    "public_ip": "54.174.98.229"
                                }, 
                                "primary": true, 
                                "private_dns_name": "ip-10-2-0-197.ec2.internal", 
                                "private_ip_address": "10.2.0.197"
                            }
                        ], 
                        "source_dest_check": true, 
                        "status": "in-use", 
                        "subnet_id": "subnet-0830e0e4b165518d1", 
                        "vpc_id": "vpc-0900f0b1a57906750"
                    }
                ], 
                "placement": {
                    "availability_zone": "us-east-1a", 
                    "group_name": "", 
                    "tenancy": "default"
                }, 
                "private_dns_name": "ip-10-2-0-197.ec2.internal", 
                "private_ip_address": "10.2.0.197", 
                "product_codes": [], 
                "public_dns_name": "ec2-54-174-98-229.compute-1.amazonaws.com", 
                "public_ip_address": "54.174.98.229", 
                "root_device_name": "/dev/xvda", 
                "root_device_type": "ebs", 
                "security_groups": [
                    {
                        "group_id": "sg-039a33058872d9286", 
                        "group_name": "security_group_ssh"
                    }
                ], 
                "source_dest_check": true, 
                "state": {
                    "code": 16, 
                    "name": "running"
                }, 
                "state_transition_reason": "", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "source": "ansible"
                }, 
                "virtualization_type": "hvm", 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        ], 
        "spec": {
            "BlockDeviceMappings": [
                {}
            ], 
            "ClientToken": "d8ce71ea164b4f9888f74aa6b1a28a30", 
            "DisableApiTermination": false, 
            "ImageId": "ami-0c94855ba95c71c99", 
            "InstanceType": "t2.micro", 
            "MaxCount": 1, 
            "MinCount": 1, 
            "NetworkInterfaces": [
                {
                    "DeviceIndex": 0, 
                    "Groups": [
                        "sg-039a33058872d9286"
                    ], 
                    "SubnetId": "subnet-0830e0e4b165518d1"
                }
            ], 
            "TagSpecifications": [
                {
                    "ResourceType": "volume", 
                    "Tags": [
                        {
                            "Key": "source", 
                            "Value": "ansible"
                        }
                    ]
                }, 
                {
                    "ResourceType": "instance", 
                    "Tags": [
                        {
                            "Key": "source", 
                            "Value": "ansible"
                        }
                    ]
                }
            ]
        }
    }
}
2021-01-14 23:55:43,239 p=14256 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:55:43,240 p=14256 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-01-14 23:57:16,388 p=15121 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:57:16,593 p=15121 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:57:16,609 p=15121 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:57:23,524 p=15121 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:57:23,524 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:23,551 p=15121 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:57:23,590 p=15121 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:57:23,619 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:57:23,697 p=15121 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:57:23,732 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:57:23,877 p=15121 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:57:23,905 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:23,954 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:23,980 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:57:30,672 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:30,697 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:30,720 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:30,747 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:57:34,789 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:34,816 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:34,837 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:34,864 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:34,901 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 249, u'map_public_ip_on_launch': True})
2021-01-14 23:57:34,910 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:57:34,922 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:57:34,933 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:57:34,946 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:57:34,958 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:57:34,971 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:57:35,005 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:57:36,966 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:36,991 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:37,013 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:37,039 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:37,076 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:57:37,087 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:57:37,100 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:57:37,115 p=15121 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:57:37,143 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:57:37,184 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:37,210 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:57:37,249 p=15121 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 249, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:57:37,275 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:57:37,292 p=15373 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:57:37,335 p=15121 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:57:37,369 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:37,393 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:37,418 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:37,440 p=15121 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:57:37,466 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:57:37,495 p=15121 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:57:37,520 p=15121 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:57:38,113 p=15121 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "argument volumes is of type <type 'dict'> and we were unable to convert to list: <type 'dict'> cannot be converted to a list"}
2021-01-14 23:57:38,116 p=15121 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:57:38,116 p=15121 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:58:50,038 p=15544 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:58:50,244 p=15544 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:58:50,261 p=15544 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:58:56,720 p=15544 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:58:56,720 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:58:56,744 p=15544 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:58:56,777 p=15544 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:58:56,803 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:58:56,870 p=15544 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:58:56,897 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:58:57,033 p=15544 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:58:57,060 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:58:57,101 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:58:57,126 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:59:03,793 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:03,818 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:03,840 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:03,868 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:59:07,599 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:07,625 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:07,645 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:07,671 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:07,706 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 249, u'map_public_ip_on_launch': True})
2021-01-14 23:59:07,714 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:07,726 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:59:07,737 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:07,749 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:07,763 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:07,774 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:07,808 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:59:09,699 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:09,725 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:09,747 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:09,773 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:09,809 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:09,821 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:09,834 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:09,850 p=15544 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:09,882 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:59:09,919 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:09,945 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:59:09,984 p=15544 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 249, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:59:10,011 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:59:10,028 p=15807 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:59:10,069 p=15544 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:59:10,102 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:10,128 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:10,155 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:10,178 p=15544 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:59:10,204 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:10,232 p=15544 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:10,257 p=15544 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-14 23:59:10,852 p=15544 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": false, "msg": "argument volumes is of type <type 'dict'> and we were unable to convert to list: <type 'dict'> cannot be converted to a list"}
2021-01-14 23:59:10,854 p=15544 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-14 23:59:10,854 p=15544 u=utewatia n=ansible | aws                        : ok=18   changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2021-01-14 23:59:33,367 p=15908 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-14 23:59:33,578 p=15908 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-14 23:59:33,597 p=15908 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-14 23:59:39,996 p=15908 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-14 23:59:39,996 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:40,021 p=15908 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-14 23:59:40,055 p=15908 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-14 23:59:40,080 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-14 23:59:40,146 p=15908 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-14 23:59:40,172 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-14 23:59:40,309 p=15908 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-14 23:59:40,336 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:40,378 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:40,405 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-14 23:59:47,663 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:47,689 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:47,714 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:47,742 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-14 23:59:51,330 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:51,357 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:51,379 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:51,407 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:51,443 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 249, u'map_public_ip_on_launch': True})
2021-01-14 23:59:51,452 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:51,464 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-14 23:59:51,475 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:51,487 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:51,501 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:51,515 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-14 23:59:51,551 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-14 23:59:53,386 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:53,411 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:53,434 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:53,460 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:53,496 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:53,506 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:53,521 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:53,536 p=15908 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-14 23:59:53,569 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-14 23:59:53,608 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:53,634 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-14 23:59:53,674 p=15908 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 249, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-14 23:59:53,705 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-14 23:59:53,731 p=16147 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-14 23:59:53,774 p=15908 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-14 23:59:53,809 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:53,833 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:53,859 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:53,883 p=15908 u=utewatia n=ansible | skipping: [aws]
2021-01-14 23:59:53,909 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-14 23:59:53,944 p=15908 u=utewatia n=ansible | ok: [aws]
2021-01-14 23:59:53,970 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-15 00:00:48,605 p=15908 u=utewatia n=ansible | changed: [aws]
2021-01-15 00:00:48,633 p=15908 u=utewatia n=ansible | TASK [aws-ec2 : Print Create OP] ***************************************************************************************
2021-01-15 00:00:48,660 p=15908 u=utewatia n=ansible | ok: [aws] => {
    "ec2_instance_create_op": {
        "changed": true, 
        "failed": false, 
        "instances": [
            {
                "ami_launch_index": 0, 
                "architecture": "x86_64", 
                "block_device_mappings": [], 
                "capacity_reservation_specification": {
                    "capacity_reservation_preference": "open"
                }, 
                "client_token": "d8ce71ea164b4f9888f74aa6b1a28a30", 
                "cpu_options": {
                    "core_count": 1, 
                    "threads_per_core": 1
                }, 
                "ebs_optimized": false, 
                "ena_support": true, 
                "enclave_options": {
                    "enabled": false
                }, 
                "hibernation_options": {
                    "configured": false
                }, 
                "hypervisor": "xen", 
                "image_id": "ami-0c94855ba95c71c99", 
                "instance_id": "i-00ee02a3466b51825", 
                "instance_type": "t2.micro", 
                "launch_time": "2021-01-14T18:21:41+00:00", 
                "metadata_options": {
                    "http_endpoint": "enabled", 
                    "http_put_response_hop_limit": 1, 
                    "http_tokens": "optional", 
                    "state": "pending"
                }, 
                "monitoring": {
                    "state": "disabled"
                }, 
                "network_interfaces": [], 
                "placement": {
                    "availability_zone": "us-east-1a", 
                    "group_name": "", 
                    "tenancy": "default"
                }, 
                "private_dns_name": "", 
                "product_codes": [], 
                "public_dns_name": "", 
                "root_device_name": "/dev/xvda", 
                "root_device_type": "ebs", 
                "security_groups": [], 
                "state": {
                    "code": 48, 
                    "name": "terminated"
                }, 
                "state_reason": {
                    "code": "Client.UserInitiatedShutdown", 
                    "message": "Client.UserInitiatedShutdown: User initiated shutdown"
                }, 
                "state_transition_reason": "User initiated (2021-01-14 18:29:58 GMT)", 
                "tags": {
                    "source": "ansible"
                }, 
                "virtualization_type": "hvm"
            }
        ], 
        "msg": "Instances terminated", 
        "terminate_failed": [], 
        "terminate_success": [
            "i-00ee02a3466b51825"
        ]
    }
}
2021-01-15 00:00:48,663 p=15908 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-15 00:00:48,664 p=15908 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-01-15 00:02:18,500 p=16437 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-15 00:02:18,711 p=16437 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-15 00:02:18,729 p=16437 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-15 00:02:25,246 p=16437 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-15 00:02:25,246 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:25,275 p=16437 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-15 00:02:25,311 p=16437 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-15 00:02:25,339 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-15 00:02:25,407 p=16437 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-15 00:02:25,434 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-15 00:02:25,578 p=16437 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-15 00:02:25,607 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:25,652 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:25,680 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-15 00:02:32,568 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:32,596 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:32,634 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:32,666 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-15 00:02:38,153 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:38,181 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:38,207 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:38,233 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:38,268 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 250, u'map_public_ip_on_launch': True})
2021-01-15 00:02:38,278 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:02:38,288 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-15 00:02:38,299 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:02:38,310 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:02:38,323 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:02:38,337 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:02:38,369 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-15 00:02:42,133 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:42,168 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:42,205 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:42,241 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:42,284 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:02:42,297 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:02:42,312 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:02:42,327 p=16437 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:02:42,360 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-15 00:02:42,400 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:42,428 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-15 00:02:42,471 p=16437 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 250, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-15 00:02:42,503 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-15 00:02:42,525 p=16703 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-15 00:02:42,567 p=16437 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-15 00:02:42,603 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:42,628 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:42,654 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:42,678 p=16437 u=utewatia n=ansible | skipping: [aws]
2021-01-15 00:02:42,704 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:02:42,733 p=16437 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:02:42,761 p=16437 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-15 00:05:38,985 p=16437 u=utewatia n=ansible |  [ERROR]: User interrupted execution

2021-01-15 00:05:59,049 p=17054 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-15 00:05:59,255 p=17054 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-15 00:05:59,272 p=17054 u=utewatia n=ansible | TASK [Gathering Facts] *************************************************************************************************
2021-01-15 00:06:05,638 p=17054 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-15 00:06:05,639 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:05,664 p=17054 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-15 00:06:05,699 p=17054 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-15 00:06:05,725 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2] ********************************************************************************************
2021-01-15 00:06:05,790 p=17054 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2.yml for aws
2021-01-15 00:06:05,816 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Get VPC Info] ******************************************************************************************
2021-01-15 00:06:05,957 p=17054 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-vpc/tasks/_vpc_info.yml for aws
2021-01-15 00:06:05,984 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:06,028 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:06,054 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : VPC Info] **********************************************************************************************
2021-01-15 00:06:13,180 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:13,204 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:13,227 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:13,263 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : VPC Subnet Info] ***************************************************************************************
2021-01-15 00:06:17,007 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:17,033 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:17,054 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:17,080 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:17,115 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.0.0/24', u'id': u'subnet-0830e0e4b165518d1', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_public'}, u'subnet_id': u'subnet-0830e0e4b165518d1', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 249, u'map_public_ip_on_launch': True})
2021-01-15 00:06:17,125 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.3.0/24', u'id': u'subnet-0b16f2c25ce03bfdb', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_private'}, u'subnet_id': u'subnet-0b16f2c25ce03bfdb', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:06:17,135 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az4', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.1.0/24', u'id': u'subnet-026d54abaffe52f41', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1b_public'}, u'subnet_id': u'subnet-026d54abaffe52f41', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41', u'availability_zone': u'us-east-1b', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': True})
2021-01-15 00:06:17,146 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.6.0/24', u'id': u'subnet-0f08e788427c12c35', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private3'}, u'subnet_id': u'subnet-0f08e788427c12c35', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:06:17,158 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az2', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.2.0/24', u'id': u'subnet-0b2fb03d582b02b30', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1a_private'}, u'subnet_id': u'subnet-0b2fb03d582b02b30', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30', u'availability_zone': u'us-east-1a', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:06:17,169 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.5.0/24', u'id': u'subnet-083623b0faa2897a4', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private2'}, u'subnet_id': u'subnet-083623b0faa2897a4', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:06:17,183 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'assign_ipv6_address_on_creation': False, u'availability_zone_id': u'use1-az6', u'map_customer_owned_ip_on_launch': False, u'cidr_block': u'10.2.4.0/24', u'id': u'subnet-0f90e193abd6bfe06', u'tags': {u'source': u'ansible', u'Name': u'my_test_vpc_1c_private'}, u'subnet_id': u'subnet-0f90e193abd6bfe06', u'subnet_arn': u'arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06', u'availability_zone': u'us-east-1c', u'default_for_az': False, u'state': u'available', u'ipv6_cidr_block_association_set': [], u'vpc_id': u'vpc-0900f0b1a57906750', u'owner_id': u'166032887324', u'available_ip_address_count': 251, u'map_public_ip_on_launch': False})
2021-01-15 00:06:17,219 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Security Group Info] ***********************************************************************************
2021-01-15 00:06:19,165 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:19,190 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:19,212 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:19,237 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:19,276 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow vpc on port 22', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow ssh', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow ssh', u'cidr_ip': u'198.168.25.64/29'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh', u'tags': {u'source': u'ansible', u'Name': u'security_group_ssh'}, u'group_name': u'security_group_ssh', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-039a33058872d9286', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:06:19,287 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'180.149.227.210/32'}, {u'description': u'allow all on port 443', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow vpc on port 443 and 80', u'cidr_ip': u'10.2.0.0/16'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for ssh access', u'tags': {u'source': u'ansible', u'Name': u'security_group_web_app'}, u'group_name': u'security_group_web_app', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0474c27cf8d80bf20', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:06:19,302 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'from_port': 5432, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 5432, u'ip_ranges': [{u'description': u'allow postgres access within vpc', u'cidr_ip': u'10.2.0.0/16'}, {u'description': u'allow postgres access', u'cidr_ip': u'198.168.25.64/29'}, {u'description': u'allow postgres access', u'cidr_ip': u'180.149.227.210/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'security group for postgres', u'tags': {u'source': u'ansible', u'Name': u'postgres_access_sg'}, u'group_name': u'postgres_access_sg', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-095b3f027dd78dcde', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:06:19,314 p=17054 u=utewatia n=ansible | ok: [aws] => (item={u'ip_permissions': [{u'ipv6_ranges': [], u'ip_ranges': [], u'ip_protocol': u'-1', u'user_id_group_pairs': [{u'group_id': u'sg-0b6b0e39c02ada443', u'user_id': u'166032887324'}], u'prefix_list_ids': []}], u'description': u'default VPC security group', u'tags': {}, u'group_name': u'default', u'vpc_id': u'vpc-0900f0b1a57906750', u'group_id': u'sg-0b6b0e39c02ada443', u'ip_permissions_egress': [{u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'owner_id': u'166032887324'})
2021-01-15 00:06:19,345 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Complete VPC INFO] *************************************************************************************
2021-01-15 00:06:19,384 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:19,409 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Print VPC INFO] ****************************************************************************************
2021-01-15 00:06:19,447 p=17054 u=utewatia n=ansible | ok: [aws] => {
    "vpc_info": {
        "region": "us-east-1", 
        "security_group": {
            "default": {
                "description": "default VPC security group", 
                "group_id": "sg-0b6b0e39c02ada443", 
                "group_name": "default", 
                "ip_permissions": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": [
                            {
                                "group_id": "sg-0b6b0e39c02ada443", 
                                "user_id": "166032887324"
                            }
                        ]
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {}, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "postgres_access_sg": {
                "description": "security group for postgres", 
                "group_id": "sg-095b3f027dd78dcde", 
                "group_name": "postgres_access_sg", 
                "ip_permissions": [
                    {
                        "from_port": 5432, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow postgres access within vpc"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow postgres access"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow postgres access"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 5432, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "postgres_access_sg", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_ssh": {
                "description": "security group for ssh", 
                "group_id": "sg-039a33058872d9286", 
                "group_name": "security_group_ssh", 
                "ip_permissions": [
                    {
                        "from_port": 22, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 22"
                            }, 
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow ssh"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow ssh"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 22, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_ssh", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "security_group_web_app": {
                "description": "security group for ssh access", 
                "group_id": "sg-0474c27cf8d80bf20", 
                "group_name": "security_group_web_app", 
                "ip_permissions": [
                    {
                        "from_port": 80, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 80, 
                        "user_id_group_pairs": []
                    }, 
                    {
                        "from_port": 443, 
                        "ip_protocol": "tcp", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "180.149.227.210/32", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "198.168.25.64/29", 
                                "description": "allow all on port 443"
                            }, 
                            {
                                "cidr_ip": "10.2.0.0/16", 
                                "description": "allow vpc on port 443 and 80"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "to_port": 443, 
                        "user_id_group_pairs": []
                    }
                ], 
                "ip_permissions_egress": [
                    {
                        "ip_protocol": "-1", 
                        "ip_ranges": [
                            {
                                "cidr_ip": "0.0.0.0/0"
                            }
                        ], 
                        "ipv6_ranges": [], 
                        "prefix_list_ids": [], 
                        "user_id_group_pairs": []
                    }
                ], 
                "owner_id": "166032887324", 
                "tags": {
                    "Name": "security_group_web_app", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "subnet": {
            "my_test_vpc_1a_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.2.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b2fb03d582b02b30", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b2fb03d582b02b30", 
                "subnet_id": "subnet-0b2fb03d582b02b30", 
                "tags": {
                    "Name": "my_test_vpc_1a_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1a_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1a", 
                "availability_zone_id": "use1-az2", 
                "available_ip_address_count": 249, 
                "cidr_block": "10.2.0.0/24", 
                "default_for_az": false, 
                "id": "subnet-0830e0e4b165518d1", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0830e0e4b165518d1", 
                "subnet_id": "subnet-0830e0e4b165518d1", 
                "tags": {
                    "Name": "my_test_vpc_1a_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.3.0/24", 
                "default_for_az": false, 
                "id": "subnet-0b16f2c25ce03bfdb", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0b16f2c25ce03bfdb", 
                "subnet_id": "subnet-0b16f2c25ce03bfdb", 
                "tags": {
                    "Name": "my_test_vpc_1b_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1b_public": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1b", 
                "availability_zone_id": "use1-az4", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.1.0/24", 
                "default_for_az": false, 
                "id": "subnet-026d54abaffe52f41", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": true, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-026d54abaffe52f41", 
                "subnet_id": "subnet-026d54abaffe52f41", 
                "tags": {
                    "Name": "my_test_vpc_1b_public", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.4.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f90e193abd6bfe06", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f90e193abd6bfe06", 
                "subnet_id": "subnet-0f90e193abd6bfe06", 
                "tags": {
                    "Name": "my_test_vpc_1c_private", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private2": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.5.0/24", 
                "default_for_az": false, 
                "id": "subnet-083623b0faa2897a4", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-083623b0faa2897a4", 
                "subnet_id": "subnet-083623b0faa2897a4", 
                "tags": {
                    "Name": "my_test_vpc_1c_private2", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }, 
            "my_test_vpc_1c_private3": {
                "assign_ipv6_address_on_creation": false, 
                "availability_zone": "us-east-1c", 
                "availability_zone_id": "use1-az6", 
                "available_ip_address_count": 251, 
                "cidr_block": "10.2.6.0/24", 
                "default_for_az": false, 
                "id": "subnet-0f08e788427c12c35", 
                "ipv6_cidr_block_association_set": [], 
                "map_customer_owned_ip_on_launch": false, 
                "map_public_ip_on_launch": false, 
                "owner_id": "166032887324", 
                "state": "available", 
                "subnet_arn": "arn:aws:ec2:us-east-1:166032887324:subnet/subnet-0f08e788427c12c35", 
                "subnet_id": "subnet-0f08e788427c12c35", 
                "tags": {
                    "Name": "my_test_vpc_1c_private3", 
                    "source": "ansible"
                }, 
                "vpc_id": "vpc-0900f0b1a57906750"
            }
        }, 
        "vpc": {
            "cidr_block": "10.2.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-07106fbebe8578749", 
                    "cidr_block": "10.2.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-56009e2c", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0900f0b1a57906750", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "166032887324", 
            "state": "available", 
            "tags": {
                "Name": "my_test_vpc", 
                "source": "ansible"
            }, 
            "vpc_id": "vpc-0900f0b1a57906750"
        }
    }
}
2021-01-15 00:06:19,477 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 instance'] **********************************************************************************
2021-01-15 00:06:19,495 p=17293 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-15 00:06:19,538 p=17054 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-ec2/tasks/_ec2_instance.yml for aws
2021-01-15 00:06:19,571 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:19,593 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:19,618 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:19,643 p=17054 u=utewatia n=ansible | skipping: [aws]
2021-01-15 00:06:19,674 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : set_fact] **********************************************************************************************
2021-01-15 00:06:19,705 p=17054 u=utewatia n=ansible | ok: [aws]
2021-01-15 00:06:19,731 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Create Ec2 Machine] ************************************************************************************
2021-01-15 00:07:01,916 p=17054 u=utewatia n=ansible | changed: [aws]
2021-01-15 00:07:01,952 p=17054 u=utewatia n=ansible | TASK [aws-ec2 : Print Create OP] ***************************************************************************************
2021-01-15 00:07:01,984 p=17054 u=utewatia n=ansible | ok: [aws] => {
    "ec2_instance_create_op": {
        "changed": true, 
        "failed": false, 
        "instances": [
            {
                "ami_launch_index": 0, 
                "architecture": "x86_64", 
                "block_device_mappings": [], 
                "capacity_reservation_specification": {
                    "capacity_reservation_preference": "open"
                }, 
                "client_token": "00454706efac405a8abf28a43cede79d", 
                "cpu_options": {
                    "core_count": 1, 
                    "threads_per_core": 1
                }, 
                "ebs_optimized": false, 
                "ena_support": true, 
                "enclave_options": {
                    "enabled": false
                }, 
                "hibernation_options": {
                    "configured": false
                }, 
                "hypervisor": "xen", 
                "image_id": "ami-0c94855ba95c71c99", 
                "instance_id": "i-00caa5405ce884a17", 
                "instance_type": "t2.micro", 
                "launch_time": "2021-01-14T18:32:48+00:00", 
                "metadata_options": {
                    "http_endpoint": "enabled", 
                    "http_put_response_hop_limit": 1, 
                    "http_tokens": "optional", 
                    "state": "pending"
                }, 
                "monitoring": {
                    "state": "disabled"
                }, 
                "network_interfaces": [], 
                "placement": {
                    "availability_zone": "us-east-1a", 
                    "group_name": "", 
                    "tenancy": "default"
                }, 
                "private_dns_name": "", 
                "product_codes": [], 
                "public_dns_name": "", 
                "root_device_name": "/dev/xvda", 
                "root_device_type": "ebs", 
                "security_groups": [], 
                "state": {
                    "code": 48, 
                    "name": "terminated"
                }, 
                "state_reason": {
                    "code": "Client.UserInitiatedShutdown", 
                    "message": "Client.UserInitiatedShutdown: User initiated shutdown"
                }, 
                "state_transition_reason": "User initiated (2021-01-14 18:36:27 GMT)", 
                "tags": {
                    "Name": "my-second-instance", 
                    "source": "ansible"
                }, 
                "virtualization_type": "hvm"
            }
        ], 
        "msg": "Instances terminated", 
        "terminate_failed": [], 
        "terminate_success": [
            "i-00caa5405ce884a17"
        ]
    }
}
2021-01-15 00:07:01,987 p=17054 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-15 00:07:01,987 p=17054 u=utewatia n=ansible | aws                        : ok=20   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2021-01-16 21:55:06,896 p=1548 u=root n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-16 21:55:07,212 p=1548 u=root n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-16 21:55:07,242 p=1548 u=root n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-16 21:55:07,284 p=1548 u=root n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-16 21:55:07,286 p=1548 u=root n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-16 21:55:07,286 p=1548 u=root n=ansible | aws                        : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 15:26:12,510 p=4748 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:26:13,101 p=4748 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:26:13,171 p=4748 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:26:13,248 p=4748 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:26:13,253 p=4748 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:26:13,254 p=4748 u=utewatia n=ansible | aws                        : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 15:30:03,133 p=5246 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:30:03,356 p=5246 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:30:03,377 p=5246 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:30:03,427 p=5246 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:30:03,430 p=5246 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:30:03,431 p=5246 u=utewatia n=ansible | aws                        : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 15:30:54,414 p=5387 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:30:54,645 p=5387 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:30:54,664 p=5387 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:30:54,700 p=5387 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:30:54,704 p=5387 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:30:54,746 p=5387 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:30:54,750 p=5387 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:30:54,780 p=5399 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:30:54,804 p=5387 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"reason": "We were unable to read either as JSON nor YAML, these are the errors we got from each:\nJSON: No JSON object could be decoded\n\nSyntax Error while loading YAML.\n  mapping values are not allowed in this context\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 14, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n- name: Create Sns Topic\n    sns_topic:\n             ^ here\n"}
2021-01-17 15:30:54,806 p=5387 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:30:54,806 p=5387 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:32:42,385 p=5607 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:32:42,645 p=5607 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:32:42,665 p=5607 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:32:42,706 p=5607 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:32:42,713 p=5607 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:32:42,760 p=5607 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:32:42,765 p=5607 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:32:42,795 p=5619 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:32:43,256 p=5607 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:32:43,262 p=5607 u=utewatia n=ansible | TASK [aws-sns : Create Sns Topic] **************************************************************************************
2021-01-17 15:32:43,307 p=5607 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 2, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n---\n- name: Create Sns Topic\n  ^ here\n"}
2021-01-17 15:32:43,309 p=5607 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:32:43,310 p=5607 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:36:09,440 p=5972 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:36:09,677 p=5972 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:36:09,697 p=5972 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:36:09,745 p=5972 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:36:09,750 p=5972 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:36:09,791 p=5972 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:36:09,796 p=5972 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:36:09,830 p=5984 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:36:10,111 p=5972 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:36:10,117 p=5972 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:36:10,156 p=5972 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 15:36:10,158 p=5972 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:36:10,158 p=5972 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:37:31,052 p=6136 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:37:31,299 p=6136 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:37:31,326 p=6136 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:37:31,363 p=6136 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:37:31,367 p=6136 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:37:31,409 p=6136 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:37:31,414 p=6136 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:37:31,450 p=6148 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:37:31,629 p=6136 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:37:31,634 p=6136 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:37:31,675 p=6136 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 15:37:31,677 p=6136 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:37:31,678 p=6136 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:38:10,383 p=6229 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:38:10,634 p=6229 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:38:10,657 p=6229 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:38:10,704 p=6229 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:38:10,709 p=6229 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:38:10,751 p=6229 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:38:10,756 p=6229 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:38:10,787 p=6241 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:38:10,884 p=6229 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:38:10,890 p=6229 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:38:10,934 p=6229 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 15:38:10,936 p=6229 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:38:10,937 p=6229 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:39:15,994 p=6372 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:39:16,226 p=6372 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:39:16,254 p=6372 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:39:16,301 p=6372 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:39:16,305 p=6372 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:39:16,352 p=6372 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:39:16,359 p=6372 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:39:16,391 p=6387 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:39:16,494 p=6372 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:39:16,500 p=6372 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:39:29,724 p=6372 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 15:39:29,725 p=6372 u=utewatia n=ansible | changed: [aws]
2021-01-17 15:39:29,732 p=6372 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 15:39:29,763 p=6372 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": true, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [
                "display_name"
            ], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "PendingConfirmation", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [
                [
                    "email", 
                    "ujjwaltewatia@gmail.com"
                ]
            ], 
            "subscriptions_confirmed": "0", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 15:39:29,766 p=6372 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:39:29,766 p=6372 u=utewatia n=ansible | aws                        : ok=5    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 15:52:46,292 p=7661 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:52:46,527 p=7661 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:52:46,551 p=7661 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:52:46,620 p=7661 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:52:46,624 p=7661 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:52:46,664 p=7661 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:52:46,669 p=7661 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:52:46,699 p=7673 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:52:46,802 p=7661 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:52:46,807 p=7661 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:52:46,844 p=7661 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: {{ item.region }}: 'dict object' has no attribute 'region'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 15:52:46,846 p=7661 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:52:46,846 p=7661 u=utewatia n=ansible | aws                        : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 15:53:27,276 p=7770 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:53:27,481 p=7770 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:53:27,499 p=7770 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:53:27,535 p=7770 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:53:27,540 p=7770 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:53:27,589 p=7770 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:53:27,593 p=7770 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:53:27,625 p=7782 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:53:27,720 p=7770 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:53:27,726 p=7770 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:53:38,456 p=7770 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 15:53:38,456 p=7770 u=utewatia n=ansible | ok: [aws]
2021-01-17 15:53:38,460 p=7770 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 15:53:38,484 p=7770 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 15:53:38,487 p=7770 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:53:38,488 p=7770 u=utewatia n=ansible | aws                        : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 15:53:53,577 p=7879 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 15:53:53,797 p=7879 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 15:53:53,823 p=7879 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 15:53:53,870 p=7879 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 15:53:53,875 p=7879 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:53:53,924 p=7879 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 15:53:53,929 p=7879 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 15:53:53,959 p=7894 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 15:53:54,050 p=7879 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 15:53:54,055 p=7879 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 15:54:02,844 p=7879 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 15:54:02,845 p=7879 u=utewatia n=ansible | ok: [aws]
2021-01-17 15:54:02,849 p=7879 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 15:54:02,876 p=7879 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 15:54:02,879 p=7879 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 15:54:02,880 p=7879 u=utewatia n=ansible | aws                        : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:06:51,195 p=9152 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:06:51,463 p=9152 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:06:51,484 p=9152 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:06:51,523 p=9152 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:06:51,527 p=9152 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:06:51,571 p=9152 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:06:51,577 p=9152 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:06:51,606 p=9164 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:06:51,700 p=9152 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:06:51,705 p=9152 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:07:01,596 p=9152 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:07:01,596 p=9152 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:07:01,607 p=9152 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:07:03,892 p=9152 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn sns_create.sns_topic.topic_arn --tags \"[{'value': u'ansible', 'key': u'source'}]\"", "delta": "0:00:01.907564", "end": "2021-01-17 16:07:03.867285", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:07:01.959721", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:07:03,895 p=9152 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:07:03,896 p=9152 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:09:00,543 p=9474 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:09:00,767 p=9474 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:09:00,788 p=9474 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:09:00,826 p=9474 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:09:00,830 p=9474 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:09:00,875 p=9474 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:09:00,880 p=9474 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:09:00,909 p=9486 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:09:01,010 p=9474 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:09:01,015 p=9474 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:09:11,362 p=9474 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:09:11,363 p=9474 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:09:11,370 p=9474 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:09:12,603 p=9474 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation --tags \"[{'value': u'ansible', 'key': u'source'}]\"", "delta": "0:00:00.808793", "end": "2021-01-17 16:09:12.569241", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:09:11.760448", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:09:12,606 p=9474 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:09:12,607 p=9474 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:09:56,592 p=9665 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:09:56,823 p=9665 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:09:56,842 p=9665 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:09:56,878 p=9665 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:09:56,884 p=9665 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:09:56,932 p=9665 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:09:56,937 p=9665 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:09:56,968 p=9677 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:09:57,064 p=9665 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:09:57,069 p=9665 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:10:07,316 p=9665 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:10:07,316 p=9665 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:10:07,321 p=9665 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:10:08,367 p=9665 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn \"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\" --tags \"[{'value': u'ansible', 'key': u'source'}]\"", "delta": "0:00:00.668918", "end": "2021-01-17 16:10:08.345788", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:10:07.676870", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:10:08,369 p=9665 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:10:08,369 p=9665 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:13:53,032 p=10148 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:13:53,258 p=10148 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:13:53,282 p=10148 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:13:53,319 p=10148 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:13:53,323 p=10148 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:13:53,371 p=10148 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:13:53,377 p=10148 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:13:53,408 p=10160 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:13:53,511 p=10148 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:13:53,516 p=10148 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:14:03,999 p=10148 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:14:03,999 p=10148 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:14:04,007 p=10148 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:14:04,046 p=10148 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token 'name', got 'end of print statement'. String: aws sns tag-resource --resource-arn \"{{ sns_create.sns_topic.topic_arn }}\" --tags \"{{ sns_topic.tags|default({})| combine(aws_default_tags)|dict2items(key_name='Key',value_name='Value')| }}\""}
2021-01-17 16:14:04,048 p=10148 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:14:04,048 p=10148 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:14:32,280 p=10275 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:14:32,489 p=10275 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:14:32,510 p=10275 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:14:32,549 p=10275 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:14:32,553 p=10275 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:14:32,596 p=10275 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:14:32,600 p=10275 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:14:32,630 p=10290 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:14:32,724 p=10275 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:14:32,729 p=10275 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:14:40,763 p=10275 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:14:40,764 p=10275 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:14:40,768 p=10275 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:14:40,795 p=10275 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "template error while templating string: expected token 'name', got 'end of print statement'. String: aws sns tag-resource --resource-arn {{ sns_create.sns_topic.topic_arn }} --tags \"{{ sns_topic.tags|default({})| combine(aws_default_tags)|dict2items(key_name='Key',value_name='Value')| }}\""}
2021-01-17 16:14:40,797 p=10275 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:14:40,797 p=10275 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:14:54,525 p=10370 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:14:54,775 p=10370 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:14:54,797 p=10370 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:14:54,835 p=10370 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:14:54,839 p=10370 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:14:54,884 p=10370 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:14:54,889 p=10370 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:14:54,925 p=10385 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:14:55,023 p=10370 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:14:55,028 p=10370 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:15:06,585 p=10370 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:15:06,585 p=10370 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:15:06,589 p=10370 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:15:07,670 p=10370 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation --tags \"[{'Value': u'ansible', 'Key': u'source'}]\"", "delta": "0:00:00.708148", "end": "2021-01-17 16:15:07.646411", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:15:06.938263", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:15:07,673 p=10370 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:15:07,673 p=10370 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:15:49,334 p=10561 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:15:49,572 p=10561 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:15:49,595 p=10561 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:15:49,643 p=10561 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:15:49,648 p=10561 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:15:49,689 p=10561 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:15:49,694 p=10561 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:15:49,723 p=10573 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:15:49,818 p=10561 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:15:49,823 p=10561 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:15:59,811 p=10561 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:15:59,812 p=10561 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:15:59,817 p=10561 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:16:00,812 p=10561 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation --tags \"[{\"Value\": \"ansible\", \"Key\": \"source\"}]\"", "delta": "0:00:00.628242", "end": "2021-01-17 16:16:00.785181", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:16:00.156939", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:16:00,815 p=10561 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:16:00,816 p=10561 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:17:06,223 p=10782 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:17:06,475 p=10782 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:17:06,497 p=10782 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:17:06,548 p=10782 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:17:06,552 p=10782 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:17:06,597 p=10782 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:17:06,603 p=10782 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:17:06,636 p=10797 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:17:06,729 p=10782 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:17:06,735 p=10782 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:17:16,623 p=10782 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:17:16,623 p=10782 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:17:16,627 p=10782 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:17:22,893 p=10782 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:17:22,900 p=10782 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:17:22,930 p=10782 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:17:22,933 p=10782 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:17:22,933 p=10782 u=utewatia n=ansible | aws                        : ok=6    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:18:27,234 p=11017 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:18:27,459 p=11017 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:18:27,481 p=11017 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:18:27,521 p=11017 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:18:27,526 p=11017 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:18:27,568 p=11017 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:18:27,573 p=11017 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:18:27,603 p=11029 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:18:27,696 p=11017 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:18:27,702 p=11017 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:18:37,510 p=11017 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:18:37,511 p=11017 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:18:37,515 p=11017 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:18:43,690 p=11017 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:18:43,697 p=11017 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:18:43,726 p=11017 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:18:43,729 p=11017 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:18:43,729 p=11017 u=utewatia n=ansible | aws                        : ok=6    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:21:23,268 p=11383 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:21:23,500 p=11383 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:21:23,522 p=11383 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:21:23,558 p=11383 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:21:23,562 p=11383 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:21:23,605 p=11383 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:21:23,612 p=11383 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:21:23,651 p=11395 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:21:23,751 p=11383 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:21:23,756 p=11383 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:21:23,762 p=11383 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:21:34,629 p=11383 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:21:34,630 p=11383 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:21:34,634 p=11383 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:21:40,639 p=11383 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:21:40,645 p=11383 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:21:40,674 p=11383 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:21:40,678 p=11383 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:21:51,573 p=11383 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:21:51,577 p=11383 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:21:57,343 p=11383 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:21:57,350 p=11383 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:21:57,384 p=11383 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "changed": true, 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
        "sns_topic": {
            "attributes_set": [
                "display_name"
            ], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation2", 
            "name": "rds-cpu-utilisation2", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "PendingConfirmation", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2"
                }
            ], 
            "subscriptions_added": [
                [
                    "email", 
                    "ujjwaltewatia@gmail.com"
                ]
            ], 
            "subscriptions_confirmed": "0", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:21:57,386 p=11383 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:21:57,387 p=11383 u=utewatia n=ansible | aws                        : ok=10   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:23:16,431 p=11732 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:23:16,641 p=11732 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:23:16,663 p=11732 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:23:16,719 p=11732 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:23:16,724 p=11732 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:23:16,767 p=11732 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:23:16,772 p=11732 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:23:16,803 p=11747 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:23:16,911 p=11732 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:23:16,915 p=11732 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:23:16,922 p=11732 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:23:16,950 p=11732 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'list object' has no attribute 'display_name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 16:23:16,954 p=11732 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:23:16,954 p=11732 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:24:04,852 p=11848 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:24:05,099 p=11848 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:24:05,121 p=11848 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:24:05,157 p=11848 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:24:05,161 p=11848 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:24:05,203 p=11848 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:24:05,209 p=11848 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:24:05,239 p=11860 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:24:05,348 p=11848 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:24:05,353 p=11848 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:24:05,358 p=11848 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:24:05,384 p=11848 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'list object' has no attribute 'display_name'\n\nThe error appears to be in '/home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Create SNS Topic\n  ^ here\n"}
2021-01-17 16:24:05,386 p=11848 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:24:05,386 p=11848 u=utewatia n=ansible | aws                        : ok=4    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:26:13,241 p=12085 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:26:13,500 p=12085 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:26:13,521 p=12085 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:26:13,564 p=12085 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:26:13,568 p=12085 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:26:13,613 p=12085 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:26:13,619 p=12085 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:26:13,651 p=12085 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"msg": "Unexpected templating type error occurred on ({{ sns_conf.topics| dict2items | default({})}}): dict2items requires a dictionary, got <type 'list'> instead."}
2021-01-17 16:26:13,652 p=12085 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:26:13,653 p=12085 u=utewatia n=ansible | aws                        : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:27:03,673 p=12196 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:27:03,898 p=12196 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:27:03,919 p=12196 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:27:03,958 p=12196 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:27:03,962 p=12196 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:27:04,005 p=12196 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:27:04,009 p=12196 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:27:04,038 p=12208 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:27:04,137 p=12196 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:27:04,142 p=12196 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:27:04,147 p=12196 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:27:14,945 p=12196 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:27:14,946 p=12196 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:27:14,953 p=12196 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:27:20,926 p=12196 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:27:20,934 p=12196 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:27:20,967 p=12196 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:27:20,972 p=12196 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:27:27,848 p=12196 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:27:27,853 p=12196 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:27:33,918 p=12196 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:27:33,923 p=12196 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:27:33,948 p=12196 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "changed": false, 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation2", 
            "name": "rds-cpu-utilisation2", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "PendingConfirmation", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "0", 
            "subscriptions_deleted": "1", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "1", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:27:33,950 p=12196 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:27:33,950 p=12196 u=utewatia n=ansible | aws                        : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:28:37,267 p=12504 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:28:37,489 p=12504 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:28:37,510 p=12504 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:28:37,551 p=12504 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:28:37,556 p=12504 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:28:37,602 p=12504 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:28:37,610 p=12504 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:28:37,646 p=12516 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:28:37,750 p=12504 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:28:37,758 p=12504 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:28:37,766 p=12504 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:28:47,417 p=12504 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:28:47,417 p=12504 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:28:47,422 p=12504 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:28:48,421 p=12504 u=utewatia n=ansible | fatal: [aws]: FAILED! => {"changed": true, "cmd": "aws sns tag-resource --resource-arn arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation --tags '[{'Value': u'ansible', 'Key': u'source'}, {'Value': u'rds-cpu-utilisation', 'Key': u'Name'}]'", "delta": "0:00:00.619533", "end": "2021-01-17 16:28:48.389411", "msg": "non-zero return code", "rc": 255, "start": "2021-01-17 16:28:47.769878", "stderr": "\nExpecting property name enclosed in double quotes: line 1 column 3 (char 2)", "stderr_lines": ["", "Expecting property name enclosed in double quotes: line 1 column 3 (char 2)"], "stdout": "", "stdout_lines": []}
2021-01-17 16:28:48,424 p=12504 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:28:48,425 p=12504 u=utewatia n=ansible | aws                        : ok=5    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-01-17 16:29:19,249 p=12674 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:29:19,454 p=12674 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:29:19,473 p=12674 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:29:19,508 p=12674 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:29:19,513 p=12674 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:29:19,556 p=12674 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:29:19,561 p=12674 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:29:19,594 p=12686 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:29:19,694 p=12674 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:29:19,698 p=12674 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:29:19,703 p=12674 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:29:29,287 p=12674 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:29:29,287 p=12674 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:29:29,292 p=12674 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:29:34,932 p=12674 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:29:34,937 p=12674 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:29:34,962 p=12674 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:29:34,966 p=12674 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:29:45,466 p=12674 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:29:45,470 p=12674 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:29:48,774 p=12674 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:29:48,779 p=12674 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:29:48,804 p=12674 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "changed": false, 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation2", 
            "name": "rds-cpu-utilisation2", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "PendingConfirmation", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "0", 
            "subscriptions_deleted": "1", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "1", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:29:48,808 p=12674 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:29:48,808 p=12674 u=utewatia n=ansible | aws                        : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-01-17 16:30:57,902 p=12996 u=utewatia n=ansible | [WARNING]: Invalid characters were found in group names but not replaced, use -vvvv to see details

2021-01-17 16:30:58,129 p=12996 u=utewatia n=ansible | PLAY [aws-cluster] *****************************************************************************************************
2021-01-17 16:30:58,159 p=12996 u=utewatia n=ansible | TASK [Check Ansible Compatible Version] ********************************************************************************
2021-01-17 16:30:58,202 p=12996 u=utewatia n=ansible | ok: [aws] => {
    "changed": false, 
    "msg": "All assertions passed"
}
2021-01-17 16:30:58,206 p=12996 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:30:58,257 p=12996 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic.yml for aws
2021-01-17 16:30:58,263 p=12996 u=utewatia n=ansible | TASK [aws-sns : Create sns] ********************************************************************************************
2021-01-17 16:30:58,298 p=13008 u=utewatia n=ansible | [WARNING]: The loop variable 'item' is already in use. You should set the `loop_var` value in the `loop_control` option
for the task to something else to avoid variable collisions and unexpected behavior.

2021-01-17 16:30:58,402 p=12996 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:30:58,406 p=12996 u=utewatia n=ansible | included: /home/utewatia/ansible_practice/roles/aws-sns/tasks/_sns_topic_create.yml for aws
2021-01-17 16:30:58,411 p=12996 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:31:08,728 p=12996 u=utewatia n=ansible | [DEPRECATION WARNING]: Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python 
for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered 
platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html
 for more information. This feature will be removed in version 2.12. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2021-01-17 16:31:08,728 p=12996 u=utewatia n=ansible | ok: [aws]
2021-01-17 16:31:08,733 p=12996 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:31:16,736 p=12996 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:31:16,741 p=12996 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:31:16,766 p=12996 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python"
        }, 
        "changed": false, 
        "deprecations": [
            {
                "msg": "Distribution Ubuntu 18.04 on host aws should use /usr/bin/python3, but is using /usr/bin/python for backward compatibility with prior Ansible releases. A future Ansible release will default to using the discovered platform python for this host. See https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information", 
                "version": "2.12"
            }
        ], 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "delivery_policy": "{\"http\":{\"defaultHealthyRetryPolicy\":{\"minDelayTarget\":20,\"maxDelayTarget\":20,\"numRetries\":3,\"numMaxDelayRetries\":0,\"numNoDelayRetries\":0,\"numMinDelayRetries\":0,\"backoffFunction\":\"linear\"},\"disableSubscriptionOverrides\":false}}", 
            "display_name": "RDS_CPU_utilisation", 
            "name": "rds-cpu-utilisation", 
            "owner": "166032887324", 
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"166032887324\"}}}]}", 
            "state": "present", 
            "subscriptions": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "owner": "166032887324", 
                    "protocol": "email", 
                    "subscription_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation:f6e47e98-28d8-4ab8-9137-e3d856b266a6", 
                    "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation"
                }
            ], 
            "subscriptions_added": [], 
            "subscriptions_confirmed": "1", 
            "subscriptions_deleted": "0", 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_pending": "0", 
            "subscriptions_purge": true, 
            "topic_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation", 
            "topic_created": false, 
            "topic_deleted": false
        }
    }
}
2021-01-17 16:31:16,770 p=12996 u=utewatia n=ansible | TASK [aws-sns : Create SNS Topic] **************************************************************************************
2021-01-17 16:31:23,490 p=12996 u=utewatia n=ansible | changed: [aws]
2021-01-17 16:31:23,496 p=12996 u=utewatia n=ansible | TASK [aws-sns : Add tags to topic] *************************************************************************************
2021-01-17 16:31:23,522 p=12996 u=utewatia n=ansible | skipping: [aws]
2021-01-17 16:31:23,527 p=12996 u=utewatia n=ansible | TASK [aws-sns : Print Sns Create op] ***********************************************************************************
2021-01-17 16:31:23,553 p=12996 u=utewatia n=ansible | ok: [aws] => {
    "sns_create": {
        "changed": true, 
        "failed": false, 
        "sns_arn": "arn:aws:sns:us-east-1:166032887324:rds-cpu-utilisation2", 
        "sns_topic": {
            "attributes_set": [], 
            "check_mode": false, 
            "name": "rds-cpu-utilisation2", 
            "state": "absent", 
            "subscriptions_added": [], 
            "subscriptions_deleted": [], 
            "subscriptions_existing": [], 
            "subscriptions_new": [
                {
                    "endpoint": "ujjwaltewatia@gmail.com", 
                    "protocol": "email"
                }
            ], 
            "subscriptions_purge": true, 
            "topic_created": false, 
            "topic_deleted": true
        }
    }
}
2021-01-17 16:31:23,556 p=12996 u=utewatia n=ansible | PLAY RECAP *************************************************************************************************************
2021-01-17 16:31:23,556 p=12996 u=utewatia n=ansible | aws                        : ok=9    changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
